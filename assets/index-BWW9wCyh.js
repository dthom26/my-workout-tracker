(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function T1(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Um={exports:{}},$l={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dE;function w1(){if(dE)return $l;dE=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var c=null;if(u!==void 0&&(c=""+u),o.key!==void 0&&(c=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:c,ref:o!==void 0?o:null,props:u}}return $l.Fragment=e,$l.jsx=n,$l.jsxs=n,$l}var mE;function S1(){return mE||(mE=1,Um.exports=w1()),Um.exports}var T=S1(),jm={exports:{}},be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pE;function b1(){if(pE)return be;pE=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),I=Symbol.iterator;function M(P){return P===null||typeof P!="object"?null:(P=I&&P[I]||P["@@iterator"],typeof P=="function"?P:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,B={};function X(P,W,ie){this.props=P,this.context=W,this.refs=B,this.updater=ie||U}X.prototype.isReactComponent={},X.prototype.setState=function(P,W){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,W,"setState")},X.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function re(){}re.prototype=X.prototype;function Z(P,W,ie){this.props=P,this.context=W,this.refs=B,this.updater=ie||U}var le=Z.prototype=new re;le.constructor=Z,$(le,X.prototype),le.isPureReactComponent=!0;var me=Array.isArray;function ae(){}var D={H:null,A:null,T:null,S:null},b=Object.prototype.hasOwnProperty;function A(P,W,ie){var fe=ie.ref;return{$$typeof:r,type:P,key:W,ref:fe!==void 0?fe:null,props:ie}}function C(P,W){return A(P.type,W,P.props)}function x(P){return typeof P=="object"&&P!==null&&P.$$typeof===r}function O(P){var W={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(ie){return W[ie]})}var N=/\/+/g;function pe(P,W){return typeof P=="object"&&P!==null&&P.key!=null?O(""+P.key):W.toString(36)}function Ie(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(ae,ae):(P.status="pending",P.then(function(W){P.status==="pending"&&(P.status="fulfilled",P.value=W)},function(W){P.status==="pending"&&(P.status="rejected",P.reason=W)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function H(P,W,ie,fe,we){var Ne=typeof P;(Ne==="undefined"||Ne==="boolean")&&(P=null);var Ue=!1;if(P===null)Ue=!0;else switch(Ne){case"bigint":case"string":case"number":Ue=!0;break;case"object":switch(P.$$typeof){case r:case e:Ue=!0;break;case _:return Ue=P._init,H(Ue(P._payload),W,ie,fe,we)}}if(Ue)return we=we(P),Ue=fe===""?"."+pe(P,0):fe,me(we)?(ie="",Ue!=null&&(ie=Ue.replace(N,"$&/")+"/"),H(we,W,ie,"",function(hr){return hr})):we!=null&&(x(we)&&(we=C(we,ie+(we.key==null||P&&P.key===we.key?"":(""+we.key).replace(N,"$&/")+"/")+Ue)),W.push(we)),1;Ue=0;var Ut=fe===""?".":fe+":";if(me(P))for(var ot=0;ot<P.length;ot++)fe=P[ot],Ne=Ut+pe(fe,ot),Ue+=H(fe,W,ie,Ne,we);else if(ot=M(P),typeof ot=="function")for(P=ot.call(P),ot=0;!(fe=P.next()).done;)fe=fe.value,Ne=Ut+pe(fe,ot++),Ue+=H(fe,W,ie,Ne,we);else if(Ne==="object"){if(typeof P.then=="function")return H(Ie(P),W,ie,fe,we);throw W=String(P),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Ue}function se(P,W,ie){if(P==null)return P;var fe=[],we=0;return H(P,fe,"","",function(Ne){return W.call(ie,Ne,we++)}),fe}function ve(P){if(P._status===-1){var W=P._result;W=W(),W.then(function(ie){(P._status===0||P._status===-1)&&(P._status=1,P._result=ie)},function(ie){(P._status===0||P._status===-1)&&(P._status=2,P._result=ie)}),P._status===-1&&(P._status=0,P._result=W)}if(P._status===1)return P._result.default;throw P._result}var Be=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},$e={map:se,forEach:function(P,W,ie){se(P,function(){W.apply(this,arguments)},ie)},count:function(P){var W=0;return se(P,function(){W++}),W},toArray:function(P){return se(P,function(W){return W})||[]},only:function(P){if(!x(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return be.Activity=w,be.Children=$e,be.Component=X,be.Fragment=n,be.Profiler=o,be.PureComponent=Z,be.StrictMode=s,be.Suspense=p,be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,be.__COMPILER_RUNTIME={__proto__:null,c:function(P){return D.H.useMemoCache(P)}},be.cache=function(P){return function(){return P.apply(null,arguments)}},be.cacheSignal=function(){return null},be.cloneElement=function(P,W,ie){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var fe=$({},P.props),we=P.key;if(W!=null)for(Ne in W.key!==void 0&&(we=""+W.key),W)!b.call(W,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&W.ref===void 0||(fe[Ne]=W[Ne]);var Ne=arguments.length-2;if(Ne===1)fe.children=ie;else if(1<Ne){for(var Ue=Array(Ne),Ut=0;Ut<Ne;Ut++)Ue[Ut]=arguments[Ut+2];fe.children=Ue}return A(P.type,we,fe)},be.createContext=function(P){return P={$$typeof:c,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:u,_context:P},P},be.createElement=function(P,W,ie){var fe,we={},Ne=null;if(W!=null)for(fe in W.key!==void 0&&(Ne=""+W.key),W)b.call(W,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(we[fe]=W[fe]);var Ue=arguments.length-2;if(Ue===1)we.children=ie;else if(1<Ue){for(var Ut=Array(Ue),ot=0;ot<Ue;ot++)Ut[ot]=arguments[ot+2];we.children=Ut}if(P&&P.defaultProps)for(fe in Ue=P.defaultProps,Ue)we[fe]===void 0&&(we[fe]=Ue[fe]);return A(P,Ne,we)},be.createRef=function(){return{current:null}},be.forwardRef=function(P){return{$$typeof:m,render:P}},be.isValidElement=x,be.lazy=function(P){return{$$typeof:_,_payload:{_status:-1,_result:P},_init:ve}},be.memo=function(P,W){return{$$typeof:g,type:P,compare:W===void 0?null:W}},be.startTransition=function(P){var W=D.T,ie={};D.T=ie;try{var fe=P(),we=D.S;we!==null&&we(ie,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(ae,Be)}catch(Ne){Be(Ne)}finally{W!==null&&ie.types!==null&&(W.types=ie.types),D.T=W}},be.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},be.use=function(P){return D.H.use(P)},be.useActionState=function(P,W,ie){return D.H.useActionState(P,W,ie)},be.useCallback=function(P,W){return D.H.useCallback(P,W)},be.useContext=function(P){return D.H.useContext(P)},be.useDebugValue=function(){},be.useDeferredValue=function(P,W){return D.H.useDeferredValue(P,W)},be.useEffect=function(P,W){return D.H.useEffect(P,W)},be.useEffectEvent=function(P){return D.H.useEffectEvent(P)},be.useId=function(){return D.H.useId()},be.useImperativeHandle=function(P,W,ie){return D.H.useImperativeHandle(P,W,ie)},be.useInsertionEffect=function(P,W){return D.H.useInsertionEffect(P,W)},be.useLayoutEffect=function(P,W){return D.H.useLayoutEffect(P,W)},be.useMemo=function(P,W){return D.H.useMemo(P,W)},be.useOptimistic=function(P,W){return D.H.useOptimistic(P,W)},be.useReducer=function(P,W,ie){return D.H.useReducer(P,W,ie)},be.useRef=function(P){return D.H.useRef(P)},be.useState=function(P){return D.H.useState(P)},be.useSyncExternalStore=function(P,W,ie){return D.H.useSyncExternalStore(P,W,ie)},be.useTransition=function(){return D.H.useTransition()},be.version="19.2.0",be}var gE;function jp(){return gE||(gE=1,jm.exports=b1()),jm.exports}var L=jp();const ga=T1(L);var zm={exports:{}},Kl={},Bm={exports:{}},qm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yE;function A1(){return yE||(yE=1,function(r){function e(H,se){var ve=H.length;H.push(se);e:for(;0<ve;){var Be=ve-1>>>1,$e=H[Be];if(0<o($e,se))H[Be]=se,H[ve]=$e,ve=Be;else break e}}function n(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var se=H[0],ve=H.pop();if(ve!==se){H[0]=ve;e:for(var Be=0,$e=H.length,P=$e>>>1;Be<P;){var W=2*(Be+1)-1,ie=H[W],fe=W+1,we=H[fe];if(0>o(ie,ve))fe<$e&&0>o(we,ie)?(H[Be]=we,H[fe]=ve,Be=fe):(H[Be]=ie,H[W]=ve,Be=W);else if(fe<$e&&0>o(we,ve))H[Be]=we,H[fe]=ve,Be=fe;else break e}}return se}function o(H,se){var ve=H.sortIndex-se.sortIndex;return ve!==0?ve:H.id-se.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var c=Date,m=c.now();r.unstable_now=function(){return c.now()-m}}var p=[],g=[],_=1,w=null,I=3,M=!1,U=!1,$=!1,B=!1,X=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function le(H){for(var se=n(g);se!==null;){if(se.callback===null)s(g);else if(se.startTime<=H)s(g),se.sortIndex=se.expirationTime,e(p,se);else break;se=n(g)}}function me(H){if($=!1,le(H),!U)if(n(p)!==null)U=!0,ae||(ae=!0,O());else{var se=n(g);se!==null&&Ie(me,se.startTime-H)}}var ae=!1,D=-1,b=5,A=-1;function C(){return B?!0:!(r.unstable_now()-A<b)}function x(){if(B=!1,ae){var H=r.unstable_now();A=H;var se=!0;try{e:{U=!1,$&&($=!1,re(D),D=-1),M=!0;var ve=I;try{t:{for(le(H),w=n(p);w!==null&&!(w.expirationTime>H&&C());){var Be=w.callback;if(typeof Be=="function"){w.callback=null,I=w.priorityLevel;var $e=Be(w.expirationTime<=H);if(H=r.unstable_now(),typeof $e=="function"){w.callback=$e,le(H),se=!0;break t}w===n(p)&&s(p),le(H)}else s(p);w=n(p)}if(w!==null)se=!0;else{var P=n(g);P!==null&&Ie(me,P.startTime-H),se=!1}}break e}finally{w=null,I=ve,M=!1}se=void 0}}finally{se?O():ae=!1}}}var O;if(typeof Z=="function")O=function(){Z(x)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,pe=N.port2;N.port1.onmessage=x,O=function(){pe.postMessage(null)}}else O=function(){X(x,0)};function Ie(H,se){D=X(function(){H(r.unstable_now())},se)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return I},r.unstable_next=function(H){switch(I){case 1:case 2:case 3:var se=3;break;default:se=I}var ve=I;I=se;try{return H()}finally{I=ve}},r.unstable_requestPaint=function(){B=!0},r.unstable_runWithPriority=function(H,se){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ve=I;I=H;try{return se()}finally{I=ve}},r.unstable_scheduleCallback=function(H,se,ve){var Be=r.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?Be+ve:Be):ve=Be,H){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=ve+$e,H={id:_++,callback:se,priorityLevel:H,startTime:ve,expirationTime:$e,sortIndex:-1},ve>Be?(H.sortIndex=ve,e(g,H),n(p)===null&&H===n(g)&&($?(re(D),D=-1):$=!0,Ie(me,ve-Be))):(H.sortIndex=$e,e(p,H),U||M||(U=!0,ae||(ae=!0,O()))),H},r.unstable_shouldYield=C,r.unstable_wrapCallback=function(H){var se=I;return function(){var ve=I;I=se;try{return H.apply(this,arguments)}finally{I=ve}}}}(qm)),qm}var vE;function R1(){return vE||(vE=1,Bm.exports=A1()),Bm.exports}var Fm={exports:{}},Jt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _E;function I1(){if(_E)return Jt;_E=1;var r=jp();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,g,_){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:p,containerInfo:g,implementation:_}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Jt.createPortal=function(p,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(p,g,null,_)},Jt.flushSync=function(p){var g=c.T,_=s.p;try{if(c.T=null,s.p=2,p)return p()}finally{c.T=g,s.p=_,s.d.f()}},Jt.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},Jt.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Jt.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var _=g.as,w=m(_,g.crossOrigin),I=typeof g.integrity=="string"?g.integrity:void 0,M=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:w,integrity:I,fetchPriority:M}):_==="script"&&s.d.X(p,{crossOrigin:w,integrity:I,fetchPriority:M,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Jt.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=m(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},Jt.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,w=m(_,g.crossOrigin);s.d.L(p,_,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Jt.preloadModule=function(p,g){if(typeof p=="string")if(g){var _=m(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},Jt.requestFormReset=function(p){s.d.r(p)},Jt.unstable_batchedUpdates=function(p,g){return p(g)},Jt.useFormState=function(p,g,_){return c.H.useFormState(p,g,_)},Jt.useFormStatus=function(){return c.H.useHostTransitionStatus()},Jt.version="19.2.0",Jt}var EE;function C1(){if(EE)return Fm.exports;EE=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Fm.exports=I1(),Fm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TE;function N1(){if(TE)return Kl;TE=1;var r=R1(),e=jp(),n=C1();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function c(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(u(t)!==t)throw Error(s(188))}function g(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return p(f),t;if(d===l)return p(f),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=f,l=d;else{for(var v=!1,S=f.child;S;){if(S===a){v=!0,a=f,l=d;break}if(S===l){v=!0,l=f,a=d;break}S=S.sibling}if(!v){for(S=d.child;S;){if(S===a){v=!0,a=d,l=f;break}if(S===l){v=!0,l=d,a=f;break}S=S.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function _(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=_(t),i!==null)return i;t=t.sibling}return null}var w=Object.assign,I=Symbol.for("react.element"),M=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),re=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),me=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),C=Symbol.for("react.memo_cache_sentinel"),x=Symbol.iterator;function O(t){return t===null||typeof t!="object"?null:(t=x&&t[x]||t["@@iterator"],typeof t=="function"?t:null)}var N=Symbol.for("react.client.reference");function pe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===N?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $:return"Fragment";case X:return"Profiler";case B:return"StrictMode";case me:return"Suspense";case ae:return"SuspenseList";case A:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case U:return"Portal";case Z:return t.displayName||"Context";case re:return(t._context.displayName||"Context")+".Consumer";case le:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case D:return i=t.displayName||null,i!==null?i:pe(t.type)||"Memo";case b:i=t._payload,t=t._init;try{return pe(t(i))}catch{}}return null}var Ie=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},Be=[],$e=-1;function P(t){return{current:t}}function W(t){0>$e||(t.current=Be[$e],Be[$e]=null,$e--)}function ie(t,i){$e++,Be[$e]=t.current,t.current=i}var fe=P(null),we=P(null),Ne=P(null),Ue=P(null);function Ut(t,i){switch(ie(Ne,i),ie(we,t),ie(fe,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?P_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=P_(i),t=L_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}W(fe),ie(fe,t)}function ot(){W(fe),W(we),W(Ne)}function hr(t){t.memoizedState!==null&&ie(Ue,t);var i=fe.current,a=L_(i,t.type);i!==a&&(ie(we,t),ie(fe,a))}function Vr(t){we.current===t&&(W(fe),W(we)),Ue.current===t&&(W(Ue),ql._currentValue=ve)}var Ps,Oa;function Wn(t){if(Ps===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Ps=i&&i[1]||"",Oa=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ps+t+Oa}var Ls=!1;function ka(t,i){if(!t||Ls)return"";Ls=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(K){var G=K}Reflect.construct(t,[],ee)}else{try{ee.call()}catch(K){G=K}t.call(ee.prototype)}}else{try{throw Error()}catch(K){G=K}(ee=t())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(K){if(K&&G&&typeof K.stack=="string")return[K.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],S=d[1];if(v&&S){var k=v.split(`
`),F=S.split(`
`);for(f=l=0;l<k.length&&!k[l].includes("DetermineComponentFrameRoot");)l++;for(;f<F.length&&!F[f].includes("DetermineComponentFrameRoot");)f++;if(l===k.length||f===F.length)for(l=k.length-1,f=F.length-1;1<=l&&0<=f&&k[l]!==F[f];)f--;for(;1<=l&&0<=f;l--,f--)if(k[l]!==F[f]){if(l!==1||f!==1)do if(l--,f--,0>f||k[l]!==F[f]){var Y=`
`+k[l].replace(" at new "," at ");return t.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",t.displayName)),Y}while(1<=l&&0<=f);break}}}finally{Ls=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Wn(a):""}function Vf(t,i){switch(t.tag){case 26:case 27:case 5:return Wn(t.type);case 16:return Wn("Lazy");case 13:return t.child!==i&&i!==null?Wn("Suspense Fallback"):Wn("Suspense");case 19:return Wn("SuspenseList");case 0:case 15:return ka(t.type,!1);case 11:return ka(t.type.render,!1);case 1:return ka(t.type,!0);case 31:return Wn("Activity");default:return""}}function Lu(t){try{var i="",a=null;do i+=Vf(t,a),a=t,t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Ma=Object.prototype.hasOwnProperty,Us=r.unstable_scheduleCallback,Va=r.unstable_cancelCallback,Pf=r.unstable_shouldYield,Go=r.unstable_requestPaint,jt=r.unstable_now,Uu=r.unstable_getCurrentPriorityLevel,Nt=r.unstable_ImmediatePriority,Ot=r.unstable_UserBlockingPriority,Pr=r.unstable_NormalPriority,ju=r.unstable_LowPriority,$o=r.unstable_IdlePriority,Lf=r.log,js=r.unstable_setDisableYieldValue,wi=null,Xt=null;function Mn(t){if(typeof Lf=="function"&&js(t),Xt&&typeof Xt.setStrictMode=="function")try{Xt.setStrictMode(wi,t)}catch{}}var sn=Math.clz32?Math.clz32:zu,Uf=Math.log,Ko=Math.LN2;function zu(t){return t>>>=0,t===0?32:31-(Uf(t)/Ko|0)|0}var zs=256,fr=262144,Si=4194304;function Jn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Vn(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var f=0,d=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var S=l&134217727;return S!==0?(l=S&~d,l!==0?f=Jn(l):(v&=S,v!==0?f=Jn(v):a||(a=S&~t,a!==0&&(f=Jn(a))))):(S=l&~d,S!==0?f=Jn(S):v!==0?f=Jn(v):a||(a=l&~t,a!==0&&(f=Jn(a)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:f}function bi(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Pa(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qo(){var t=Si;return Si<<=1,(Si&62914560)===0&&(Si=4194304),t}function Lr(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Ai(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function zt(t,i,a,l,f,d){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var S=t.entanglements,k=t.expirationTimes,F=t.hiddenUpdates;for(a=v&~a;0<a;){var Y=31-sn(a),ee=1<<Y;S[Y]=0,k[Y]=-1;var G=F[Y];if(G!==null)for(F[Y]=null,Y=0;Y<G.length;Y++){var K=G[Y];K!==null&&(K.lane&=-536870913)}a&=~ee}l!==0&&Yo(t,l,0),d!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=d&~(v&~i))}function Yo(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-sn(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Ri(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-sn(a),f=1<<l;f&i|t[l]&i&&(t[l]|=i),a&=~f}}function Ii(t,i){var a=i&-i;return a=(a&42)!==0?1:Xo(a),(a&(t.suspendedLanes|i))!==0?0:a}function Xo(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Wo(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ur(){var t=se.p;return t!==0?t:(t=window.event,t===void 0?32:aE(t.type))}function Bu(t,i){var a=se.p;try{return se.p=t,i()}finally{se.p=a}}var dr=Math.random().toString(36).slice(2),ht="__reactFiber$"+dr,Bt="__reactProps$"+dr,mr="__reactContainer$"+dr,Ci="__reactEvents$"+dr,pr="__reactListeners$"+dr,qu="__reactHandles$"+dr,Jo="__reactResources$"+dr,jr="__reactMarker$"+dr;function Bs(t){delete t[ht],delete t[Bt],delete t[Ci],delete t[pr],delete t[qu]}function zr(t){var i=t[ht];if(i)return i;for(var a=t.parentNode;a;){if(i=a[mr]||a[ht]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=H_(t);t!==null;){if(a=t[ht])return a;t=H_(t)}return i}t=a,a=t.parentNode}return null}function Br(t){if(t=t[ht]||t[mr]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function qs(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function Zn(t){var i=t[Jo];return i||(i=t[Jo]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function gt(t){t[jr]=!0}var La=new Set,Ni={};function an(t,i){gr(t,i),gr(t+"Capture",i)}function gr(t,i){for(Ni[t]=i,t=0;t<i.length;t++)La.add(i[t])}var jf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zo={},el={};function Fu(t){return Ma.call(el,t)?!0:Ma.call(Zo,t)?!1:jf.test(t)?el[t]=!0:(Zo[t]=!0,!1)}function xi(t,i,a){if(Fu(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function Di(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function Pn(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}function on(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Hu(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function zf(t,i,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return f.call(this)},set:function(v){a=""+v,d.call(this,v)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Ua(t){if(!t._valueTracker){var i=Hu(t)?"checked":"value";t._valueTracker=zf(t,i,""+t[i])}}function tl(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=Hu(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function ja(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var qr=/[\n"\\]/g;function ft(t){return t.replace(qr,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Oi(t,i,a,l,f,d,v,S){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),i!=null?v==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+on(i)):t.value!==""+on(i)&&(t.value=""+on(i)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),i!=null?za(t,v,on(i)):a!=null?za(t,v,on(a)):l!=null&&t.removeAttribute("value"),f==null&&d!=null&&(t.defaultChecked=!!d),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.name=""+on(S):t.removeAttribute("name")}function Fs(t,i,a,l,f,d,v,S){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){Ua(t);return}a=a!=null?""+on(a):"",i=i!=null?""+on(i):a,S||i===t.value||(t.value=i),t.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=S?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),Ua(t)}function za(t,i,a){i==="number"&&ja(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function qe(t,i,a,l){if(t=t.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<t.length;a++)f=i.hasOwnProperty("$"+t[a].value),t[a].selected!==f&&(t[a].selected=f),f&&l&&(t[a].defaultSelected=!0)}else{for(a=""+on(a),i=null,f=0;f<t.length;f++){if(t[f].value===a){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}i!==null||t[f].disabled||(i=t[f])}i!==null&&(i.selected=!0)}}function Hs(t,i,a){if(i!=null&&(i=""+on(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+on(a):""}function ki(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(Ie(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=on(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Ua(t)}function Ln(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var Bf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nl(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||Bf.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Gu(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&nl(t,f,l)}else for(var d in i)i.hasOwnProperty(d)&&nl(t,d,i[d])}function rl(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ff=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yr(t){return Ff.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function kt(){}var Ba=null;function qa(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fr=null,wn=null;function $u(t){var i=Br(t);if(i&&(t=i.stateNode)){var a=t[Bt]||null;e:switch(t=i.stateNode,i.type){case"input":if(Oi(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ft(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var f=l[Bt]||null;if(!f)throw Error(s(90));Oi(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&tl(l)}break e;case"textarea":Hs(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&qe(t,!!a.multiple,i,!1)}}}var il=!1;function Ku(t,i,a){if(il)return t(i,a);il=!0;try{var l=t(i);return l}finally{if(il=!1,(Fr!==null||wn!==null)&&(Fc(),Fr&&(i=Fr,t=wn,wn=Fr=null,$u(i),t)))for(i=0;i<t.length;i++)$u(t[i])}}function hn(t,i){var a=t.stateNode;if(a===null)return null;var l=a[Bt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sl=!1;if(er)try{var vr={};Object.defineProperty(vr,"passive",{get:function(){sl=!0}}),window.addEventListener("test",vr,vr),window.removeEventListener("test",vr,vr)}catch{sl=!1}var Sn=null,Fa=null,_r=null;function Mi(){if(_r)return _r;var t,i=Fa,a=i.length,l,f="value"in Sn?Sn.value:Sn.textContent,d=f.length;for(t=0;t<a&&i[t]===f[t];t++);var v=a-t;for(l=1;l<=v&&i[a-l]===f[d-l];l++);return _r=f.slice(t,1<l?1-l:void 0)}function Gs(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Vi(){return!0}function nt(){return!1}function Wt(t){function i(a,l,f,d,v){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(a=t[S],this[S]=a?a(d):d[S]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Vi:nt,this.isPropagationStopped=nt,this}return w(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Vi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Vi)},persist:function(){},isPersistent:Vi}),i}var Hr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$s=Wt(Hr),Pi=w({},Hr,{view:0,detail:0}),Qu=Wt(Pi),Li,Ha,ln,Ks=w({},Pi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ji,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&t.type==="mousemove"?(Li=t.screenX-ln.screenX,Ha=t.screenY-ln.screenY):Ha=Li=0,ln=t),Li)},movementY:function(t){return"movementY"in t?t.movementY:Ha}}),Yu=Wt(Ks),Qs=w({},Ks,{dataTransfer:0}),Xu=Wt(Qs),al=w({},Pi,{relatedTarget:0}),Ui=Wt(al),Wu=w({},Hr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ga=Wt(Wu),Hf=w({},Hr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ju=Wt(Hf),Ys=w({},Hr,{data:0}),ol=Wt(Ys),Zu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ll={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ul={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ec(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=ul[t])?!!i[t]:!1}function ji(){return ec}var tc=w({},Pi,{key:function(t){if(t.key){var i=Zu[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Gs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ll[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ji,charCode:function(t){return t.type==="keypress"?Gs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),nc=Wt(tc),Gr=w({},Ks,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cl=Wt(Gr),rc=w({},Pi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ji}),ic=Wt(rc),sc=w({},Hr,{propertyName:0,elapsedTime:0,pseudoElement:0}),$a=Wt(sc),un=w({},Ks,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ac=Wt(un),oc=w({},Hr,{newState:0,oldState:0}),zi=Wt(oc),h=[9,13,27,32],y=er&&"CompositionEvent"in window,E=null;er&&"documentMode"in document&&(E=document.documentMode);var R=er&&"TextEvent"in window&&!E,z=er&&(!y||E&&8<E&&11>=E),Q=" ",oe=!1;function Ke(t,i){switch(t){case"keyup":return h.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tt(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xe=!1;function Mt(t,i){switch(t){case"compositionend":return Tt(i);case"keypress":return i.which!==32?null:(oe=!0,Q);case"textInput":return t=i.data,t===Q&&oe?null:t;default:return null}}function Vt(t,i){if(xe)return t==="compositionend"||!y&&Ke(t,i)?(t=Mi(),_r=Fa=Sn=null,xe=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return z&&i.locale!=="ko"?null:i.data;default:return null}}var Bi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fn(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Bi[t.type]:i==="textarea"}function Xs(t,i,a,l){Fr?wn?wn.push(l):wn=[l]:Fr=l,i=Xc(i,"onChange"),0<i.length&&(a=new $s("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var $r=null,hl=null;function Qb(t){x_(t,0)}function lc(t){var i=qs(t);if(tl(i))return t}function Yg(t,i){if(t==="change")return i}var Xg=!1;if(er){var Gf;if(er){var $f="oninput"in document;if(!$f){var Wg=document.createElement("div");Wg.setAttribute("oninput","return;"),$f=typeof Wg.oninput=="function"}Gf=$f}else Gf=!1;Xg=Gf&&(!document.documentMode||9<document.documentMode)}function Jg(){$r&&($r.detachEvent("onpropertychange",Zg),hl=$r=null)}function Zg(t){if(t.propertyName==="value"&&lc(hl)){var i=[];Xs(i,hl,t,qa(t)),Ku(Qb,i)}}function Yb(t,i,a){t==="focusin"?(Jg(),$r=i,hl=a,$r.attachEvent("onpropertychange",Zg)):t==="focusout"&&Jg()}function Xb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return lc(hl)}function Wb(t,i){if(t==="click")return lc(i)}function Jb(t,i){if(t==="input"||t==="change")return lc(i)}function Zb(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var bn=typeof Object.is=="function"?Object.is:Zb;function fl(t,i){if(bn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!Ma.call(i,f)||!bn(t[f],i[f]))return!1}return!0}function ey(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ty(t,i){var a=ey(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ey(a)}}function ny(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?ny(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function ry(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=ja(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=ja(t.document)}return i}function Kf(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var eA=er&&"documentMode"in document&&11>=document.documentMode,Ka=null,Qf=null,dl=null,Yf=!1;function iy(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Yf||Ka==null||Ka!==ja(l)||(l=Ka,"selectionStart"in l&&Kf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),dl&&fl(dl,l)||(dl=l,l=Xc(Qf,"onSelect"),0<l.length&&(i=new $s("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=Ka)))}function Ws(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Qa={animationend:Ws("Animation","AnimationEnd"),animationiteration:Ws("Animation","AnimationIteration"),animationstart:Ws("Animation","AnimationStart"),transitionrun:Ws("Transition","TransitionRun"),transitionstart:Ws("Transition","TransitionStart"),transitioncancel:Ws("Transition","TransitionCancel"),transitionend:Ws("Transition","TransitionEnd")},Xf={},sy={};er&&(sy=document.createElement("div").style,"AnimationEvent"in window||(delete Qa.animationend.animation,delete Qa.animationiteration.animation,delete Qa.animationstart.animation),"TransitionEvent"in window||delete Qa.transitionend.transition);function Js(t){if(Xf[t])return Xf[t];if(!Qa[t])return t;var i=Qa[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in sy)return Xf[t]=i[a];return t}var ay=Js("animationend"),oy=Js("animationiteration"),ly=Js("animationstart"),tA=Js("transitionrun"),nA=Js("transitionstart"),rA=Js("transitioncancel"),uy=Js("transitionend"),cy=new Map,Wf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wf.push("scrollEnd");function tr(t,i){cy.set(t,i),an(i,[t])}var uc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Un=[],Ya=0,Jf=0;function cc(){for(var t=Ya,i=Jf=Ya=0;i<t;){var a=Un[i];Un[i++]=null;var l=Un[i];Un[i++]=null;var f=Un[i];Un[i++]=null;var d=Un[i];if(Un[i++]=null,l!==null&&f!==null){var v=l.pending;v===null?f.next=f:(f.next=v.next,v.next=f),l.pending=f}d!==0&&hy(a,f,d)}}function hc(t,i,a,l){Un[Ya++]=t,Un[Ya++]=i,Un[Ya++]=a,Un[Ya++]=l,Jf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Zf(t,i,a,l){return hc(t,i,a,l),fc(t)}function Zs(t,i){return hc(t,null,null,i),fc(t)}function hy(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(f=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,f&&i!==null&&(f=31-sn(a),t=d.hiddenUpdates,l=t[f],l===null?t[f]=[i]:l.push(i),i.lane=a|536870912),d):null}function fc(t){if(50<Vl)throw Vl=0,lm=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Xa={};function iA(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(t,i,a,l){return new iA(t,i,a,l)}function ed(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Kr(t,i){var a=t.alternate;return a===null?(a=An(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function fy(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function dc(t,i,a,l,f,d){var v=0;if(l=t,typeof t=="function")ed(t)&&(v=1);else if(typeof t=="string")v=u1(t,a,fe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case A:return t=An(31,a,i,f),t.elementType=A,t.lanes=d,t;case $:return ea(a.children,f,d,i);case B:v=8,f|=24;break;case X:return t=An(12,a,i,f|2),t.elementType=X,t.lanes=d,t;case me:return t=An(13,a,i,f),t.elementType=me,t.lanes=d,t;case ae:return t=An(19,a,i,f),t.elementType=ae,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Z:v=10;break e;case re:v=9;break e;case le:v=11;break e;case D:v=14;break e;case b:v=16,l=null;break e}v=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=An(v,a,i,f),i.elementType=t,i.type=l,i.lanes=d,i}function ea(t,i,a,l){return t=An(7,t,l,i),t.lanes=a,t}function td(t,i,a){return t=An(6,t,null,i),t.lanes=a,t}function dy(t){var i=An(18,null,null,0);return i.stateNode=t,i}function nd(t,i,a){return i=An(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var my=new WeakMap;function jn(t,i){if(typeof t=="object"&&t!==null){var a=my.get(t);return a!==void 0?a:(i={value:t,source:i,stack:Lu(i)},my.set(t,i),i)}return{value:t,source:i,stack:Lu(i)}}var Wa=[],Ja=0,mc=null,ml=0,zn=[],Bn=0,qi=null,Er=1,Tr="";function Qr(t,i){Wa[Ja++]=ml,Wa[Ja++]=mc,mc=t,ml=i}function py(t,i,a){zn[Bn++]=Er,zn[Bn++]=Tr,zn[Bn++]=qi,qi=t;var l=Er;t=Tr;var f=32-sn(l)-1;l&=~(1<<f),a+=1;var d=32-sn(i)+f;if(30<d){var v=f-f%5;d=(l&(1<<v)-1).toString(32),l>>=v,f-=v,Er=1<<32-sn(i)+f|a<<f|l,Tr=d+t}else Er=1<<d|a<<f|l,Tr=t}function rd(t){t.return!==null&&(Qr(t,1),py(t,1,0))}function id(t){for(;t===mc;)mc=Wa[--Ja],Wa[Ja]=null,ml=Wa[--Ja],Wa[Ja]=null;for(;t===qi;)qi=zn[--Bn],zn[Bn]=null,Tr=zn[--Bn],zn[Bn]=null,Er=zn[--Bn],zn[Bn]=null}function gy(t,i){zn[Bn++]=Er,zn[Bn++]=Tr,zn[Bn++]=qi,Er=i.id,Tr=i.overflow,qi=t}var qt=null,rt=null,je=!1,Fi=null,qn=!1,sd=Error(s(519));function Hi(t){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw pl(jn(i,t)),sd}function yy(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[ht]=t,i[Bt]=l,a){case"dialog":ke("cancel",i),ke("close",i);break;case"iframe":case"object":case"embed":ke("load",i);break;case"video":case"audio":for(a=0;a<Ll.length;a++)ke(Ll[a],i);break;case"source":ke("error",i);break;case"img":case"image":case"link":ke("error",i),ke("load",i);break;case"details":ke("toggle",i);break;case"input":ke("invalid",i),Fs(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":ke("invalid",i);break;case"textarea":ke("invalid",i),ki(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||M_(i.textContent,a)?(l.popover!=null&&(ke("beforetoggle",i),ke("toggle",i)),l.onScroll!=null&&ke("scroll",i),l.onScrollEnd!=null&&ke("scrollend",i),l.onClick!=null&&(i.onclick=kt),i=!0):i=!1,i||Hi(t,!0)}function vy(t){for(qt=t.return;qt;)switch(qt.tag){case 5:case 31:case 13:qn=!1;return;case 27:case 3:qn=!0;return;default:qt=qt.return}}function Za(t){if(t!==qt)return!1;if(!je)return vy(t),je=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Sm(t.type,t.memoizedProps)),a=!a),a&&rt&&Hi(t),vy(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));rt=F_(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));rt=F_(t)}else i===27?(i=rt,is(t.type)?(t=Cm,Cm=null,rt=t):rt=i):rt=qt?Hn(t.stateNode.nextSibling):null;return!0}function ta(){rt=qt=null,je=!1}function ad(){var t=Fi;return t!==null&&(gn===null?gn=t:gn.push.apply(gn,t),Fi=null),t}function pl(t){Fi===null?Fi=[t]:Fi.push(t)}var od=P(null),na=null,Yr=null;function Gi(t,i,a){ie(od,i._currentValue),i._currentValue=a}function Xr(t){t._currentValue=od.current,W(od)}function ld(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function ud(t,i,a,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var d=f.dependencies;if(d!==null){var v=f.child;d=d.firstContext;e:for(;d!==null;){var S=d;d=f;for(var k=0;k<i.length;k++)if(S.context===i[k]){d.lanes|=a,S=d.alternate,S!==null&&(S.lanes|=a),ld(d.return,a,t),l||(v=null);break e}d=S.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(s(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),ld(v,a,t),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===t){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function eo(t,i,a,l){t=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var S=f.type;bn(f.pendingProps.value,v.value)||(t!==null?t.push(S):t=[S])}}else if(f===Ue.current){if(v=f.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(ql):t=[ql])}f=f.return}t!==null&&ud(i,t,a,l),i.flags|=262144}function pc(t){for(t=t.firstContext;t!==null;){if(!bn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ra(t){na=t,Yr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ft(t){return _y(na,t)}function gc(t,i){return na===null&&ra(t),_y(t,i)}function _y(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Yr===null){if(t===null)throw Error(s(308));Yr=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Yr=Yr.next=i;return a}var sA=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},aA=r.unstable_scheduleCallback,oA=r.unstable_NormalPriority,wt={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cd(){return{controller:new sA,data:new Map,refCount:0}}function gl(t){t.refCount--,t.refCount===0&&aA(oA,function(){t.controller.abort()})}var yl=null,hd=0,to=0,no=null;function lA(t,i){if(yl===null){var a=yl=[];hd=0,to=mm(),no={status:"pending",value:void 0,then:function(l){a.push(l)}}}return hd++,i.then(Ey,Ey),i}function Ey(){if(--hd===0&&yl!==null){no!==null&&(no.status="fulfilled");var t=yl;yl=null,to=0,no=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function uA(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Ty=H.S;H.S=function(t,i){i_=jt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&lA(t,i),Ty!==null&&Ty(t,i)};var ia=P(null);function fd(){var t=ia.current;return t!==null?t:et.pooledCache}function yc(t,i){i===null?ie(ia,ia.current):ie(ia,i.pool)}function wy(){var t=fd();return t===null?null:{parent:wt._currentValue,pool:t}}var ro=Error(s(460)),dd=Error(s(474)),vc=Error(s(542)),_c={then:function(){}};function Sy(t){return t=t.status,t==="fulfilled"||t==="rejected"}function by(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(kt,kt),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Ry(t),t;default:if(typeof i.status=="string")i.then(kt,kt);else{if(t=et,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Ry(t),t}throw aa=i,ro}}function sa(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(aa=a,ro):a}}var aa=null;function Ay(){if(aa===null)throw Error(s(459));var t=aa;return aa=null,t}function Ry(t){if(t===ro||t===vc)throw Error(s(483))}var io=null,vl=0;function Ec(t){var i=vl;return vl+=1,io===null&&(io=[]),by(io,t,i)}function _l(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Tc(t,i){throw i.$$typeof===I?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Iy(t){function i(j,V){if(t){var q=j.deletions;q===null?(j.deletions=[V],j.flags|=16):q.push(V)}}function a(j,V){if(!t)return null;for(;V!==null;)i(j,V),V=V.sibling;return null}function l(j){for(var V=new Map;j!==null;)j.key!==null?V.set(j.key,j):V.set(j.index,j),j=j.sibling;return V}function f(j,V){return j=Kr(j,V),j.index=0,j.sibling=null,j}function d(j,V,q){return j.index=q,t?(q=j.alternate,q!==null?(q=q.index,q<V?(j.flags|=67108866,V):q):(j.flags|=67108866,V)):(j.flags|=1048576,V)}function v(j){return t&&j.alternate===null&&(j.flags|=67108866),j}function S(j,V,q,J){return V===null||V.tag!==6?(V=td(q,j.mode,J),V.return=j,V):(V=f(V,q),V.return=j,V)}function k(j,V,q,J){var ge=q.type;return ge===$?Y(j,V,q.props.children,J,q.key):V!==null&&(V.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===b&&sa(ge)===V.type)?(V=f(V,q.props),_l(V,q),V.return=j,V):(V=dc(q.type,q.key,q.props,null,j.mode,J),_l(V,q),V.return=j,V)}function F(j,V,q,J){return V===null||V.tag!==4||V.stateNode.containerInfo!==q.containerInfo||V.stateNode.implementation!==q.implementation?(V=nd(q,j.mode,J),V.return=j,V):(V=f(V,q.children||[]),V.return=j,V)}function Y(j,V,q,J,ge){return V===null||V.tag!==7?(V=ea(q,j.mode,J,ge),V.return=j,V):(V=f(V,q),V.return=j,V)}function ee(j,V,q){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=td(""+V,j.mode,q),V.return=j,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case M:return q=dc(V.type,V.key,V.props,null,j.mode,q),_l(q,V),q.return=j,q;case U:return V=nd(V,j.mode,q),V.return=j,V;case b:return V=sa(V),ee(j,V,q)}if(Ie(V)||O(V))return V=ea(V,j.mode,q,null),V.return=j,V;if(typeof V.then=="function")return ee(j,Ec(V),q);if(V.$$typeof===Z)return ee(j,gc(j,V),q);Tc(j,V)}return null}function G(j,V,q,J){var ge=V!==null?V.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return ge!==null?null:S(j,V,""+q,J);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case M:return q.key===ge?k(j,V,q,J):null;case U:return q.key===ge?F(j,V,q,J):null;case b:return q=sa(q),G(j,V,q,J)}if(Ie(q)||O(q))return ge!==null?null:Y(j,V,q,J,null);if(typeof q.then=="function")return G(j,V,Ec(q),J);if(q.$$typeof===Z)return G(j,V,gc(j,q),J);Tc(j,q)}return null}function K(j,V,q,J,ge){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return j=j.get(q)||null,S(V,j,""+J,ge);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case M:return j=j.get(J.key===null?q:J.key)||null,k(V,j,J,ge);case U:return j=j.get(J.key===null?q:J.key)||null,F(V,j,J,ge);case b:return J=sa(J),K(j,V,q,J,ge)}if(Ie(J)||O(J))return j=j.get(q)||null,Y(V,j,J,ge,null);if(typeof J.then=="function")return K(j,V,q,Ec(J),ge);if(J.$$typeof===Z)return K(j,V,q,gc(V,J),ge);Tc(V,J)}return null}function he(j,V,q,J){for(var ge=null,Fe=null,de=V,Ce=V=0,Ve=null;de!==null&&Ce<q.length;Ce++){de.index>Ce?(Ve=de,de=null):Ve=de.sibling;var He=G(j,de,q[Ce],J);if(He===null){de===null&&(de=Ve);break}t&&de&&He.alternate===null&&i(j,de),V=d(He,V,Ce),Fe===null?ge=He:Fe.sibling=He,Fe=He,de=Ve}if(Ce===q.length)return a(j,de),je&&Qr(j,Ce),ge;if(de===null){for(;Ce<q.length;Ce++)de=ee(j,q[Ce],J),de!==null&&(V=d(de,V,Ce),Fe===null?ge=de:Fe.sibling=de,Fe=de);return je&&Qr(j,Ce),ge}for(de=l(de);Ce<q.length;Ce++)Ve=K(de,j,Ce,q[Ce],J),Ve!==null&&(t&&Ve.alternate!==null&&de.delete(Ve.key===null?Ce:Ve.key),V=d(Ve,V,Ce),Fe===null?ge=Ve:Fe.sibling=Ve,Fe=Ve);return t&&de.forEach(function(us){return i(j,us)}),je&&Qr(j,Ce),ge}function _e(j,V,q,J){if(q==null)throw Error(s(151));for(var ge=null,Fe=null,de=V,Ce=V=0,Ve=null,He=q.next();de!==null&&!He.done;Ce++,He=q.next()){de.index>Ce?(Ve=de,de=null):Ve=de.sibling;var us=G(j,de,He.value,J);if(us===null){de===null&&(de=Ve);break}t&&de&&us.alternate===null&&i(j,de),V=d(us,V,Ce),Fe===null?ge=us:Fe.sibling=us,Fe=us,de=Ve}if(He.done)return a(j,de),je&&Qr(j,Ce),ge;if(de===null){for(;!He.done;Ce++,He=q.next())He=ee(j,He.value,J),He!==null&&(V=d(He,V,Ce),Fe===null?ge=He:Fe.sibling=He,Fe=He);return je&&Qr(j,Ce),ge}for(de=l(de);!He.done;Ce++,He=q.next())He=K(de,j,Ce,He.value,J),He!==null&&(t&&He.alternate!==null&&de.delete(He.key===null?Ce:He.key),V=d(He,V,Ce),Fe===null?ge=He:Fe.sibling=He,Fe=He);return t&&de.forEach(function(E1){return i(j,E1)}),je&&Qr(j,Ce),ge}function Ze(j,V,q,J){if(typeof q=="object"&&q!==null&&q.type===$&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case M:e:{for(var ge=q.key;V!==null;){if(V.key===ge){if(ge=q.type,ge===$){if(V.tag===7){a(j,V.sibling),J=f(V,q.props.children),J.return=j,j=J;break e}}else if(V.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===b&&sa(ge)===V.type){a(j,V.sibling),J=f(V,q.props),_l(J,q),J.return=j,j=J;break e}a(j,V);break}else i(j,V);V=V.sibling}q.type===$?(J=ea(q.props.children,j.mode,J,q.key),J.return=j,j=J):(J=dc(q.type,q.key,q.props,null,j.mode,J),_l(J,q),J.return=j,j=J)}return v(j);case U:e:{for(ge=q.key;V!==null;){if(V.key===ge)if(V.tag===4&&V.stateNode.containerInfo===q.containerInfo&&V.stateNode.implementation===q.implementation){a(j,V.sibling),J=f(V,q.children||[]),J.return=j,j=J;break e}else{a(j,V);break}else i(j,V);V=V.sibling}J=nd(q,j.mode,J),J.return=j,j=J}return v(j);case b:return q=sa(q),Ze(j,V,q,J)}if(Ie(q))return he(j,V,q,J);if(O(q)){if(ge=O(q),typeof ge!="function")throw Error(s(150));return q=ge.call(q),_e(j,V,q,J)}if(typeof q.then=="function")return Ze(j,V,Ec(q),J);if(q.$$typeof===Z)return Ze(j,V,gc(j,q),J);Tc(j,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,V!==null&&V.tag===6?(a(j,V.sibling),J=f(V,q),J.return=j,j=J):(a(j,V),J=td(q,j.mode,J),J.return=j,j=J),v(j)):a(j,V)}return function(j,V,q,J){try{vl=0;var ge=Ze(j,V,q,J);return io=null,ge}catch(de){if(de===ro||de===vc)throw de;var Fe=An(29,de,null,j.mode);return Fe.lanes=J,Fe.return=j,Fe}finally{}}}var oa=Iy(!0),Cy=Iy(!1),$i=!1;function md(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function pd(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ki(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Qi(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ge&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=fc(t),hy(t,null,a),i}return hc(t,l,i,a),fc(t)}function El(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Ri(t,a)}}function gd(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var yd=!1;function Tl(){if(yd){var t=no;if(t!==null)throw t}}function wl(t,i,a,l){yd=!1;var f=t.updateQueue;$i=!1;var d=f.firstBaseUpdate,v=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var k=S,F=k.next;k.next=null,v===null?d=F:v.next=F,v=k;var Y=t.alternate;Y!==null&&(Y=Y.updateQueue,S=Y.lastBaseUpdate,S!==v&&(S===null?Y.firstBaseUpdate=F:S.next=F,Y.lastBaseUpdate=k))}if(d!==null){var ee=f.baseState;v=0,Y=F=k=null,S=d;do{var G=S.lane&-536870913,K=G!==S.lane;if(K?(Me&G)===G:(l&G)===G){G!==0&&G===to&&(yd=!0),Y!==null&&(Y=Y.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var he=t,_e=S;G=i;var Ze=a;switch(_e.tag){case 1:if(he=_e.payload,typeof he=="function"){ee=he.call(Ze,ee,G);break e}ee=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=_e.payload,G=typeof he=="function"?he.call(Ze,ee,G):he,G==null)break e;ee=w({},ee,G);break e;case 2:$i=!0}}G=S.callback,G!==null&&(t.flags|=64,K&&(t.flags|=8192),K=f.callbacks,K===null?f.callbacks=[G]:K.push(G))}else K={lane:G,tag:S.tag,payload:S.payload,callback:S.callback,next:null},Y===null?(F=Y=K,k=ee):Y=Y.next=K,v|=G;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;K=S,S=K.next,K.next=null,f.lastBaseUpdate=K,f.shared.pending=null}}while(!0);Y===null&&(k=ee),f.baseState=k,f.firstBaseUpdate=F,f.lastBaseUpdate=Y,d===null&&(f.shared.lanes=0),Zi|=v,t.lanes=v,t.memoizedState=ee}}function Ny(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function xy(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Ny(a[t],i)}var so=P(null),wc=P(0);function Dy(t,i){t=si,ie(wc,t),ie(so,i),si=t|i.baseLanes}function vd(){ie(wc,si),ie(so,so.current)}function _d(){si=wc.current,W(so),W(wc)}var Rn=P(null),Fn=null;function Yi(t){var i=t.alternate;ie(yt,yt.current&1),ie(Rn,t),Fn===null&&(i===null||so.current!==null||i.memoizedState!==null)&&(Fn=t)}function Ed(t){ie(yt,yt.current),ie(Rn,t),Fn===null&&(Fn=t)}function Oy(t){t.tag===22?(ie(yt,yt.current),ie(Rn,t),Fn===null&&(Fn=t)):Xi()}function Xi(){ie(yt,yt.current),ie(Rn,Rn.current)}function In(t){W(Rn),Fn===t&&(Fn=null),W(yt)}var yt=P(0);function Sc(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Rm(a)||Im(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Wr=0,Re=null,We=null,St=null,bc=!1,ao=!1,la=!1,Ac=0,Sl=0,oo=null,cA=0;function dt(){throw Error(s(321))}function Td(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!bn(t[a],i[a]))return!1;return!0}function wd(t,i,a,l,f,d){return Wr=d,Re=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,H.H=t===null||t.memoizedState===null?pv:Ld,la=!1,d=a(l,f),la=!1,ao&&(d=My(i,a,l,f)),ky(t),d}function ky(t){H.H=Rl;var i=We!==null&&We.next!==null;if(Wr=0,St=We=Re=null,bc=!1,Sl=0,oo=null,i)throw Error(s(300));t===null||bt||(t=t.dependencies,t!==null&&pc(t)&&(bt=!0))}function My(t,i,a,l){Re=t;var f=0;do{if(ao&&(oo=null),Sl=0,ao=!1,25<=f)throw Error(s(301));if(f+=1,St=We=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}H.H=gv,d=i(a,l)}while(ao);return d}function hA(){var t=H.H,i=t.useState()[0];return i=typeof i.then=="function"?bl(i):i,t=t.useState()[0],(We!==null?We.memoizedState:null)!==t&&(Re.flags|=1024),i}function Sd(){var t=Ac!==0;return Ac=0,t}function bd(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Ad(t){if(bc){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}bc=!1}Wr=0,St=We=Re=null,ao=!1,Sl=Ac=0,oo=null}function cn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?Re.memoizedState=St=t:St=St.next=t,St}function vt(){if(We===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var i=St===null?Re.memoizedState:St.next;if(i!==null)St=i,We=t;else{if(t===null)throw Re.alternate===null?Error(s(467)):Error(s(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},St===null?Re.memoizedState=St=t:St=St.next=t}return St}function Rc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bl(t){var i=Sl;return Sl+=1,oo===null&&(oo=[]),t=by(oo,t,i),i=Re,(St===null?i.memoizedState:St.next)===null&&(i=i.alternate,H.H=i===null||i.memoizedState===null?pv:Ld),t}function Ic(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return bl(t);if(t.$$typeof===Z)return Ft(t)}throw Error(s(438,String(t)))}function Rd(t){var i=null,a=Re.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Re.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Rc(),Re.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=C;return i.index++,a}function Jr(t,i){return typeof i=="function"?i(t):i}function Cc(t){var i=vt();return Id(i,We,t)}function Id(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var f=t.baseQueue,d=l.pending;if(d!==null){if(f!==null){var v=f.next;f.next=d.next,d.next=v}i.baseQueue=f=d,l.pending=null}if(d=t.baseState,f===null)t.memoizedState=d;else{i=f.next;var S=v=null,k=null,F=i,Y=!1;do{var ee=F.lane&-536870913;if(ee!==F.lane?(Me&ee)===ee:(Wr&ee)===ee){var G=F.revertLane;if(G===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ee===to&&(Y=!0);else if((Wr&G)===G){F=F.next,G===to&&(Y=!0);continue}else ee={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},k===null?(S=k=ee,v=d):k=k.next=ee,Re.lanes|=G,Zi|=G;ee=F.action,la&&a(d,ee),d=F.hasEagerState?F.eagerState:a(d,ee)}else G={lane:ee,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},k===null?(S=k=G,v=d):k=k.next=G,Re.lanes|=ee,Zi|=ee;F=F.next}while(F!==null&&F!==i);if(k===null?v=d:k.next=S,!bn(d,t.memoizedState)&&(bt=!0,Y&&(a=no,a!==null)))throw a;t.memoizedState=d,t.baseState=v,t.baseQueue=k,l.lastRenderedState=d}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Cd(t){var i=vt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var v=f=f.next;do d=t(d,v.action),v=v.next;while(v!==f);bn(d,i.memoizedState)||(bt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function Vy(t,i,a){var l=Re,f=vt(),d=je;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!bn((We||f).memoizedState,a);if(v&&(f.memoizedState=a,bt=!0),f=f.queue,Dd(Uy.bind(null,l,f,t),[t]),f.getSnapshot!==i||v||St!==null&&St.memoizedState.tag&1){if(l.flags|=2048,lo(9,{destroy:void 0},Ly.bind(null,l,f,a,i),null),et===null)throw Error(s(349));d||(Wr&127)!==0||Py(l,i,a)}return a}function Py(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Re.updateQueue,i===null?(i=Rc(),Re.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function Ly(t,i,a,l){i.value=a,i.getSnapshot=l,jy(i)&&zy(t)}function Uy(t,i,a){return a(function(){jy(i)&&zy(t)})}function jy(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!bn(t,a)}catch{return!0}}function zy(t){var i=Zs(t,2);i!==null&&yn(i,t,2)}function Nd(t){var i=cn();if(typeof t=="function"){var a=t;if(t=a(),la){Mn(!0);try{a()}finally{Mn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jr,lastRenderedState:t},i}function By(t,i,a,l){return t.baseState=a,Id(t,We,typeof l=="function"?l:Jr)}function fA(t,i,a,l,f){if(Dc(t))throw Error(s(485));if(t=i.action,t!==null){var d={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};H.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,qy(i,d)):(d.next=a.next,i.pending=a.next=d)}}function qy(t,i){var a=i.action,l=i.payload,f=t.state;if(i.isTransition){var d=H.T,v={};H.T=v;try{var S=a(f,l),k=H.S;k!==null&&k(v,S),Fy(t,i,S)}catch(F){xd(t,i,F)}finally{d!==null&&v.types!==null&&(d.types=v.types),H.T=d}}else try{d=a(f,l),Fy(t,i,d)}catch(F){xd(t,i,F)}}function Fy(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Hy(t,i,l)},function(l){return xd(t,i,l)}):Hy(t,i,a)}function Hy(t,i,a){i.status="fulfilled",i.value=a,Gy(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,qy(t,a)))}function xd(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,Gy(i),i=i.next;while(i!==l)}t.action=null}function Gy(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function $y(t,i){return i}function Ky(t,i){if(je){var a=et.formState;if(a!==null){e:{var l=Re;if(je){if(rt){t:{for(var f=rt,d=qn;f.nodeType!==8;){if(!d){f=null;break t}if(f=Hn(f.nextSibling),f===null){f=null;break t}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){rt=Hn(f.nextSibling),l=f.data==="F!";break e}}Hi(l)}l=!1}l&&(i=a[0])}}return a=cn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$y,lastRenderedState:i},a.queue=l,a=fv.bind(null,Re,l),l.dispatch=a,l=Nd(!1),d=Pd.bind(null,Re,!1,l.queue),l=cn(),f={state:i,dispatch:null,action:t,pending:null},l.queue=f,a=fA.bind(null,Re,f,d,a),f.dispatch=a,l.memoizedState=t,[i,a,!1]}function Qy(t){var i=vt();return Yy(i,We,t)}function Yy(t,i,a){if(i=Id(t,i,$y)[0],t=Cc(Jr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=bl(i)}catch(v){throw v===ro?vc:v}else l=i;i=vt();var f=i.queue,d=f.dispatch;return a!==i.memoizedState&&(Re.flags|=2048,lo(9,{destroy:void 0},dA.bind(null,f,a),null)),[l,d,t]}function dA(t,i){t.action=i}function Xy(t){var i=vt(),a=We;if(a!==null)return Yy(i,a,t);vt(),i=i.memoizedState,a=vt();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function lo(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Re.updateQueue,i===null&&(i=Rc(),Re.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function Wy(){return vt().memoizedState}function Nc(t,i,a,l){var f=cn();Re.flags|=t,f.memoizedState=lo(1|i,{destroy:void 0},a,l===void 0?null:l)}function xc(t,i,a,l){var f=vt();l=l===void 0?null:l;var d=f.memoizedState.inst;We!==null&&l!==null&&Td(l,We.memoizedState.deps)?f.memoizedState=lo(i,d,a,l):(Re.flags|=t,f.memoizedState=lo(1|i,d,a,l))}function Jy(t,i){Nc(8390656,8,t,i)}function Dd(t,i){xc(2048,8,t,i)}function mA(t){Re.flags|=4;var i=Re.updateQueue;if(i===null)i=Rc(),Re.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function Zy(t){var i=vt().memoizedState;return mA({ref:i,nextImpl:t}),function(){if((Ge&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function ev(t,i){return xc(4,2,t,i)}function tv(t,i){return xc(4,4,t,i)}function nv(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function rv(t,i,a){a=a!=null?a.concat([t]):null,xc(4,4,nv.bind(null,i,t),a)}function Od(){}function iv(t,i){var a=vt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Td(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function sv(t,i){var a=vt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Td(i,l[1]))return l[0];if(l=t(),la){Mn(!0);try{t()}finally{Mn(!1)}}return a.memoizedState=[l,i],l}function kd(t,i,a){return a===void 0||(Wr&1073741824)!==0&&(Me&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=a_(),Re.lanes|=t,Zi|=t,a)}function av(t,i,a,l){return bn(a,i)?a:so.current!==null?(t=kd(t,a,l),bn(t,i)||(bt=!0),t):(Wr&42)===0||(Wr&1073741824)!==0&&(Me&261930)===0?(bt=!0,t.memoizedState=a):(t=a_(),Re.lanes|=t,Zi|=t,i)}function ov(t,i,a,l,f){var d=se.p;se.p=d!==0&&8>d?d:8;var v=H.T,S={};H.T=S,Pd(t,!1,i,a);try{var k=f(),F=H.S;if(F!==null&&F(S,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var Y=uA(k,l);Al(t,i,Y,xn(t))}else Al(t,i,l,xn(t))}catch(ee){Al(t,i,{then:function(){},status:"rejected",reason:ee},xn())}finally{se.p=d,v!==null&&S.types!==null&&(v.types=S.types),H.T=v}}function pA(){}function Md(t,i,a,l){if(t.tag!==5)throw Error(s(476));var f=lv(t).queue;ov(t,f,i,ve,a===null?pA:function(){return uv(t),a(l)})}function lv(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jr,lastRenderedState:ve},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jr,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function uv(t){var i=lv(t);i.next===null&&(i=t.alternate.memoizedState),Al(t,i.next.queue,{},xn())}function Vd(){return Ft(ql)}function cv(){return vt().memoizedState}function hv(){return vt().memoizedState}function gA(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=xn();t=Ki(a);var l=Qi(i,t,a);l!==null&&(yn(l,i,a),El(l,i,a)),i={cache:cd()},t.payload=i;return}i=i.return}}function yA(t,i,a){var l=xn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Dc(t)?dv(i,a):(a=Zf(t,i,a,l),a!==null&&(yn(a,t,l),mv(a,i,l)))}function fv(t,i,a){var l=xn();Al(t,i,a,l)}function Al(t,i,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Dc(t))dv(i,f);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,S=d(v,a);if(f.hasEagerState=!0,f.eagerState=S,bn(S,v))return hc(t,i,f,0),et===null&&cc(),!1}catch{}finally{}if(a=Zf(t,i,f,l),a!==null)return yn(a,t,l),mv(a,i,l),!0}return!1}function Pd(t,i,a,l){if(l={lane:2,revertLane:mm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Dc(t)){if(i)throw Error(s(479))}else i=Zf(t,a,l,2),i!==null&&yn(i,t,2)}function Dc(t){var i=t.alternate;return t===Re||i!==null&&i===Re}function dv(t,i){ao=bc=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function mv(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Ri(t,a)}}var Rl={readContext:Ft,use:Ic,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useLayoutEffect:dt,useInsertionEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useSyncExternalStore:dt,useId:dt,useHostTransitionStatus:dt,useFormState:dt,useActionState:dt,useOptimistic:dt,useMemoCache:dt,useCacheRefresh:dt};Rl.useEffectEvent=dt;var pv={readContext:Ft,use:Ic,useCallback:function(t,i){return cn().memoizedState=[t,i===void 0?null:i],t},useContext:Ft,useEffect:Jy,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,Nc(4194308,4,nv.bind(null,i,t),a)},useLayoutEffect:function(t,i){return Nc(4194308,4,t,i)},useInsertionEffect:function(t,i){Nc(4,2,t,i)},useMemo:function(t,i){var a=cn();i=i===void 0?null:i;var l=t();if(la){Mn(!0);try{t()}finally{Mn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=cn();if(a!==void 0){var f=a(i);if(la){Mn(!0);try{a(i)}finally{Mn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=yA.bind(null,Re,t),[l.memoizedState,t]},useRef:function(t){var i=cn();return t={current:t},i.memoizedState=t},useState:function(t){t=Nd(t);var i=t.queue,a=fv.bind(null,Re,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:Od,useDeferredValue:function(t,i){var a=cn();return kd(a,t,i)},useTransition:function(){var t=Nd(!1);return t=ov.bind(null,Re,t.queue,!0,!1),cn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Re,f=cn();if(je){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),et===null)throw Error(s(349));(Me&127)!==0||Py(l,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,Jy(Uy.bind(null,l,d,t),[t]),l.flags|=2048,lo(9,{destroy:void 0},Ly.bind(null,l,d,a,i),null),a},useId:function(){var t=cn(),i=et.identifierPrefix;if(je){var a=Tr,l=Er;a=(l&~(1<<32-sn(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=Ac++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=cA++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:Vd,useFormState:Ky,useActionState:Ky,useOptimistic:function(t){var i=cn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Pd.bind(null,Re,!0,a),a.dispatch=i,[t,i]},useMemoCache:Rd,useCacheRefresh:function(){return cn().memoizedState=gA.bind(null,Re)},useEffectEvent:function(t){var i=cn(),a={impl:t};return i.memoizedState=a,function(){if((Ge&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Ld={readContext:Ft,use:Ic,useCallback:iv,useContext:Ft,useEffect:Dd,useImperativeHandle:rv,useInsertionEffect:ev,useLayoutEffect:tv,useMemo:sv,useReducer:Cc,useRef:Wy,useState:function(){return Cc(Jr)},useDebugValue:Od,useDeferredValue:function(t,i){var a=vt();return av(a,We.memoizedState,t,i)},useTransition:function(){var t=Cc(Jr)[0],i=vt().memoizedState;return[typeof t=="boolean"?t:bl(t),i]},useSyncExternalStore:Vy,useId:cv,useHostTransitionStatus:Vd,useFormState:Qy,useActionState:Qy,useOptimistic:function(t,i){var a=vt();return By(a,We,t,i)},useMemoCache:Rd,useCacheRefresh:hv};Ld.useEffectEvent=Zy;var gv={readContext:Ft,use:Ic,useCallback:iv,useContext:Ft,useEffect:Dd,useImperativeHandle:rv,useInsertionEffect:ev,useLayoutEffect:tv,useMemo:sv,useReducer:Cd,useRef:Wy,useState:function(){return Cd(Jr)},useDebugValue:Od,useDeferredValue:function(t,i){var a=vt();return We===null?kd(a,t,i):av(a,We.memoizedState,t,i)},useTransition:function(){var t=Cd(Jr)[0],i=vt().memoizedState;return[typeof t=="boolean"?t:bl(t),i]},useSyncExternalStore:Vy,useId:cv,useHostTransitionStatus:Vd,useFormState:Xy,useActionState:Xy,useOptimistic:function(t,i){var a=vt();return We!==null?By(a,We,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Rd,useCacheRefresh:hv};gv.useEffectEvent=Zy;function Ud(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:w({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var jd={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=xn(),f=Ki(l);f.payload=i,a!=null&&(f.callback=a),i=Qi(t,f,l),i!==null&&(yn(i,t,l),El(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=xn(),f=Ki(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Qi(t,f,l),i!==null&&(yn(i,t,l),El(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=xn(),l=Ki(a);l.tag=2,i!=null&&(l.callback=i),i=Qi(t,l,a),i!==null&&(yn(i,t,a),El(i,t,a))}};function yv(t,i,a,l,f,d,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,v):i.prototype&&i.prototype.isPureReactComponent?!fl(a,l)||!fl(f,d):!0}function vv(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&jd.enqueueReplaceState(i,i.state,null)}function ua(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=w({},a));for(var f in t)a[f]===void 0&&(a[f]=t[f])}return a}function _v(t){uc(t)}function Ev(t){console.error(t)}function Tv(t){uc(t)}function Oc(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function wv(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function zd(t,i,a){return a=Ki(a),a.tag=3,a.payload={element:null},a.callback=function(){Oc(t,i)},a}function Sv(t){return t=Ki(t),t.tag=3,t}function bv(t,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;t.payload=function(){return f(d)},t.callback=function(){wv(i,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){wv(i,a,l),typeof f!="function"&&(es===null?es=new Set([this]):es.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})})}function vA(t,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&eo(i,a,f,!0),a=Rn.current,a!==null){switch(a.tag){case 31:case 13:return Fn===null?Hc():a.alternate===null&&mt===0&&(mt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===_c?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),hm(t,l,f)),!1;case 22:return a.flags|=65536,l===_c?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),hm(t,l,f)),!1}throw Error(s(435,a.tag))}return hm(t,l,f),Hc(),!1}if(je)return i=Rn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==sd&&(t=Error(s(422),{cause:l}),pl(jn(t,a)))):(l!==sd&&(i=Error(s(423),{cause:l}),pl(jn(i,a))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=jn(l,a),f=zd(t.stateNode,l,f),gd(t,f),mt!==4&&(mt=2)),!1;var d=Error(s(520),{cause:l});if(d=jn(d,a),Ml===null?Ml=[d]:Ml.push(d),mt!==4&&(mt=2),i===null)return!0;l=jn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=f&-f,a.lanes|=t,t=zd(a.stateNode,l,t),gd(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(es===null||!es.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Sv(f),bv(f,t,a,l),gd(a,f),!1}a=a.return}while(a!==null);return!1}var Bd=Error(s(461)),bt=!1;function Ht(t,i,a,l){i.child=t===null?Cy(i,null,a,l):oa(i,t.child,a,l)}function Av(t,i,a,l,f){a=a.render;var d=i.ref;if("ref"in l){var v={};for(var S in l)S!=="ref"&&(v[S]=l[S])}else v=l;return ra(i),l=wd(t,i,a,v,d,f),S=Sd(),t!==null&&!bt?(bd(t,i,f),Zr(t,i,f)):(je&&S&&rd(i),i.flags|=1,Ht(t,i,l,f),i.child)}function Rv(t,i,a,l,f){if(t===null){var d=a.type;return typeof d=="function"&&!ed(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,Iv(t,i,d,l,f)):(t=dc(a.type,null,l,i,i.mode,f),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!Yd(t,f)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:fl,a(v,l)&&t.ref===i.ref)return Zr(t,i,f)}return i.flags|=1,t=Kr(d,l),t.ref=i.ref,t.return=i,i.child=t}function Iv(t,i,a,l,f){if(t!==null){var d=t.memoizedProps;if(fl(d,l)&&t.ref===i.ref)if(bt=!1,i.pendingProps=l=d,Yd(t,f))(t.flags&131072)!==0&&(bt=!0);else return i.lanes=t.lanes,Zr(t,i,f)}return qd(t,i,a,l,f)}function Cv(t,i,a,l){var f=l.children,d=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,t!==null){for(l=i.child=t.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,i.child=null;return Nv(t,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&yc(i,d!==null?d.cachePool:null),d!==null?Dy(i,d):vd(),Oy(i);else return l=i.lanes=536870912,Nv(t,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(yc(i,d.cachePool),Dy(i,d),Xi(),i.memoizedState=null):(t!==null&&yc(i,null),vd(),Xi());return Ht(t,i,f,a),i.child}function Il(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Nv(t,i,a,l,f){var d=fd();return d=d===null?null:{parent:wt._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},t!==null&&yc(i,null),vd(),Oy(i),t!==null&&eo(t,i,l,!0),i.childLanes=f,null}function kc(t,i){return i=Vc({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function xv(t,i,a){return oa(i,t.child,null,a),t=kc(i,i.pendingProps),t.flags|=2,In(i),i.memoizedState=null,t}function _A(t,i,a){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(je){if(l.mode==="hidden")return t=kc(i,l),i.lanes=536870912,Il(null,t);if(Ed(i),(t=rt)?(t=q_(t,qn),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:qi!==null?{id:Er,overflow:Tr}:null,retryLane:536870912,hydrationErrors:null},a=dy(t),a.return=i,i.child=a,qt=i,rt=null)):t=null,t===null)throw Hi(i);return i.lanes=536870912,null}return kc(i,l)}var d=t.memoizedState;if(d!==null){var v=d.dehydrated;if(Ed(i),f)if(i.flags&256)i.flags&=-257,i=xv(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(s(558));else if(bt||eo(t,i,a,!1),f=(a&t.childLanes)!==0,bt||f){if(l=et,l!==null&&(v=Ii(l,a),v!==0&&v!==d.retryLane))throw d.retryLane=v,Zs(t,v),yn(l,t,v),Bd;Hc(),i=xv(t,i,a)}else t=d.treeContext,rt=Hn(v.nextSibling),qt=i,je=!0,Fi=null,qn=!1,t!==null&&gy(i,t),i=kc(i,l),i.flags|=4096;return i}return t=Kr(t.child,{mode:l.mode,children:l.children}),t.ref=i.ref,i.child=t,t.return=i,t}function Mc(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function qd(t,i,a,l,f){return ra(i),a=wd(t,i,a,l,void 0,f),l=Sd(),t!==null&&!bt?(bd(t,i,f),Zr(t,i,f)):(je&&l&&rd(i),i.flags|=1,Ht(t,i,a,f),i.child)}function Dv(t,i,a,l,f,d){return ra(i),i.updateQueue=null,a=My(i,l,a,f),ky(t),l=Sd(),t!==null&&!bt?(bd(t,i,d),Zr(t,i,d)):(je&&l&&rd(i),i.flags|=1,Ht(t,i,a,d),i.child)}function Ov(t,i,a,l,f){if(ra(i),i.stateNode===null){var d=Xa,v=a.contextType;typeof v=="object"&&v!==null&&(d=Ft(v)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=jd,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},md(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?Ft(v):Xa,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Ud(i,a,v,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&jd.enqueueReplaceState(d,d.state,null),wl(i,l,d,f),Tl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){d=i.stateNode;var S=i.memoizedProps,k=ua(a,S);d.props=k;var F=d.context,Y=a.contextType;v=Xa,typeof Y=="object"&&Y!==null&&(v=Ft(Y));var ee=a.getDerivedStateFromProps;Y=typeof ee=="function"||typeof d.getSnapshotBeforeUpdate=="function",S=i.pendingProps!==S,Y||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(S||F!==v)&&vv(i,d,l,v),$i=!1;var G=i.memoizedState;d.state=G,wl(i,l,d,f),Tl(),F=i.memoizedState,S||G!==F||$i?(typeof ee=="function"&&(Ud(i,a,ee,l),F=i.memoizedState),(k=$i||yv(i,a,k,l,G,F,v))?(Y||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=F),d.props=l,d.state=F,d.context=v,l=k):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,pd(t,i),v=i.memoizedProps,Y=ua(a,v),d.props=Y,ee=i.pendingProps,G=d.context,F=a.contextType,k=Xa,typeof F=="object"&&F!==null&&(k=Ft(F)),S=a.getDerivedStateFromProps,(F=typeof S=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==ee||G!==k)&&vv(i,d,l,k),$i=!1,G=i.memoizedState,d.state=G,wl(i,l,d,f),Tl();var K=i.memoizedState;v!==ee||G!==K||$i||t!==null&&t.dependencies!==null&&pc(t.dependencies)?(typeof S=="function"&&(Ud(i,a,S,l),K=i.memoizedState),(Y=$i||yv(i,a,Y,l,G,K,k)||t!==null&&t.dependencies!==null&&pc(t.dependencies))?(F||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,K,k),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,K,k)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&G===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&G===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=K),d.props=l,d.state=K,d.context=k,l=Y):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&G===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&G===t.memoizedState||(i.flags|=1024),l=!1)}return d=l,Mc(t,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&l?(i.child=oa(i,t.child,null,f),i.child=oa(i,null,a,f)):Ht(t,i,a,f),i.memoizedState=d.state,t=i.child):t=Zr(t,i,f),t}function kv(t,i,a,l){return ta(),i.flags|=256,Ht(t,i,a,l),i.child}var Fd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Hd(t){return{baseLanes:t,cachePool:wy()}}function Gd(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=Nn),t}function Mv(t,i,a){var l=i.pendingProps,f=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=t!==null&&t.memoizedState===null?!1:(yt.current&2)!==0),v&&(f=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,t===null){if(je){if(f?Yi(i):Xi(),(t=rt)?(t=q_(t,qn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:qi!==null?{id:Er,overflow:Tr}:null,retryLane:536870912,hydrationErrors:null},a=dy(t),a.return=i,i.child=a,qt=i,rt=null)):t=null,t===null)throw Hi(i);return Im(t)?i.lanes=32:i.lanes=536870912,null}var S=l.children;return l=l.fallback,f?(Xi(),f=i.mode,S=Vc({mode:"hidden",children:S},f),l=ea(l,f,a,null),S.return=i,l.return=i,S.sibling=l,i.child=S,l=i.child,l.memoizedState=Hd(a),l.childLanes=Gd(t,v,a),i.memoizedState=Fd,Il(null,l)):(Yi(i),$d(i,S))}var k=t.memoizedState;if(k!==null&&(S=k.dehydrated,S!==null)){if(d)i.flags&256?(Yi(i),i.flags&=-257,i=Kd(t,i,a)):i.memoizedState!==null?(Xi(),i.child=t.child,i.flags|=128,i=null):(Xi(),S=l.fallback,f=i.mode,l=Vc({mode:"visible",children:l.children},f),S=ea(S,f,a,null),S.flags|=2,l.return=i,S.return=i,l.sibling=S,i.child=l,oa(i,t.child,null,a),l=i.child,l.memoizedState=Hd(a),l.childLanes=Gd(t,v,a),i.memoizedState=Fd,i=Il(null,l));else if(Yi(i),Im(S)){if(v=S.nextSibling&&S.nextSibling.dataset,v)var F=v.dgst;v=F,l=Error(s(419)),l.stack="",l.digest=v,pl({value:l,source:null,stack:null}),i=Kd(t,i,a)}else if(bt||eo(t,i,a,!1),v=(a&t.childLanes)!==0,bt||v){if(v=et,v!==null&&(l=Ii(v,a),l!==0&&l!==k.retryLane))throw k.retryLane=l,Zs(t,l),yn(v,t,l),Bd;Rm(S)||Hc(),i=Kd(t,i,a)}else Rm(S)?(i.flags|=192,i.child=t.child,i=null):(t=k.treeContext,rt=Hn(S.nextSibling),qt=i,je=!0,Fi=null,qn=!1,t!==null&&gy(i,t),i=$d(i,l.children),i.flags|=4096);return i}return f?(Xi(),S=l.fallback,f=i.mode,k=t.child,F=k.sibling,l=Kr(k,{mode:"hidden",children:l.children}),l.subtreeFlags=k.subtreeFlags&65011712,F!==null?S=Kr(F,S):(S=ea(S,f,a,null),S.flags|=2),S.return=i,l.return=i,l.sibling=S,i.child=l,Il(null,l),l=i.child,S=t.child.memoizedState,S===null?S=Hd(a):(f=S.cachePool,f!==null?(k=wt._currentValue,f=f.parent!==k?{parent:k,pool:k}:f):f=wy(),S={baseLanes:S.baseLanes|a,cachePool:f}),l.memoizedState=S,l.childLanes=Gd(t,v,a),i.memoizedState=Fd,Il(t.child,l)):(Yi(i),a=t.child,t=a.sibling,a=Kr(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(v=i.deletions,v===null?(i.deletions=[t],i.flags|=16):v.push(t)),i.child=a,i.memoizedState=null,a)}function $d(t,i){return i=Vc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Vc(t,i){return t=An(22,t,null,i),t.lanes=0,t}function Kd(t,i,a){return oa(i,t.child,null,a),t=$d(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Vv(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),ld(t.return,i,a)}function Qd(t,i,a,l,f,d){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=a,v.tailMode=f,v.treeForkCount=d)}function Pv(t,i,a){var l=i.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var v=yt.current,S=(v&2)!==0;if(S?(v=v&1|2,i.flags|=128):v&=1,ie(yt,v),Ht(t,i,l,a),l=je?ml:0,!S&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Vv(t,a,i);else if(t.tag===19)Vv(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)t=a.alternate,t!==null&&Sc(t)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Qd(i,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(t=f.alternate,t!==null&&Sc(t)===null){i.child=f;break}t=f.sibling,f.sibling=a,a=f,f=t}Qd(i,!0,a,null,d,l);break;case"together":Qd(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function Zr(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Zi|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(eo(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=Kr(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Kr(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function Yd(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&pc(t)))}function EA(t,i,a){switch(i.tag){case 3:Ut(i,i.stateNode.containerInfo),Gi(i,wt,t.memoizedState.cache),ta();break;case 27:case 5:hr(i);break;case 4:Ut(i,i.stateNode.containerInfo);break;case 10:Gi(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Ed(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Yi(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Mv(t,i,a):(Yi(i),t=Zr(t,i,a),t!==null?t.sibling:null);Yi(i);break;case 19:var f=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(eo(t,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return Pv(t,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ie(yt,yt.current),l)break;return null;case 22:return i.lanes=0,Cv(t,i,a,i.pendingProps);case 24:Gi(i,wt,t.memoizedState.cache)}return Zr(t,i,a)}function Lv(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)bt=!0;else{if(!Yd(t,a)&&(i.flags&128)===0)return bt=!1,EA(t,i,a);bt=(t.flags&131072)!==0}else bt=!1,je&&(i.flags&1048576)!==0&&py(i,ml,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(t=sa(i.elementType),i.type=t,typeof t=="function")ed(t)?(l=ua(t,l),i.tag=1,i=Ov(null,i,t,l,a)):(i.tag=0,i=qd(null,i,t,l,a));else{if(t!=null){var f=t.$$typeof;if(f===le){i.tag=11,i=Av(null,i,t,l,a);break e}else if(f===D){i.tag=14,i=Rv(null,i,t,l,a);break e}}throw i=pe(t)||t,Error(s(306,i,""))}}return i;case 0:return qd(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=ua(l,i.pendingProps),Ov(t,i,l,f,a);case 3:e:{if(Ut(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var d=i.memoizedState;f=d.element,pd(t,i),wl(i,l,null,a);var v=i.memoizedState;if(l=v.cache,Gi(i,wt,l),l!==d.cache&&ud(i,[wt],a,!0),Tl(),l=v.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=kv(t,i,l,a);break e}else if(l!==f){f=jn(Error(s(424)),i),pl(f),i=kv(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(rt=Hn(t.firstChild),qt=i,je=!0,Fi=null,qn=!0,a=Cy(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ta(),l===f){i=Zr(t,i,a);break e}Ht(t,i,l,a)}i=i.child}return i;case 26:return Mc(t,i),t===null?(a=Q_(i.type,null,i.pendingProps,null))?i.memoizedState=a:je||(a=i.type,t=i.pendingProps,l=Wc(Ne.current).createElement(a),l[ht]=i,l[Bt]=t,Gt(l,a,t),gt(l),i.stateNode=l):i.memoizedState=Q_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return hr(i),t===null&&je&&(l=i.stateNode=G_(i.type,i.pendingProps,Ne.current),qt=i,qn=!0,f=rt,is(i.type)?(Cm=f,rt=Hn(l.firstChild)):rt=f),Ht(t,i,i.pendingProps.children,a),Mc(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&je&&((f=l=rt)&&(l=XA(l,i.type,i.pendingProps,qn),l!==null?(i.stateNode=l,qt=i,rt=Hn(l.firstChild),qn=!1,f=!0):f=!1),f||Hi(i)),hr(i),f=i.type,d=i.pendingProps,v=t!==null?t.memoizedProps:null,l=d.children,Sm(f,d)?l=null:v!==null&&Sm(f,v)&&(i.flags|=32),i.memoizedState!==null&&(f=wd(t,i,hA,null,null,a),ql._currentValue=f),Mc(t,i),Ht(t,i,l,a),i.child;case 6:return t===null&&je&&((t=a=rt)&&(a=WA(a,i.pendingProps,qn),a!==null?(i.stateNode=a,qt=i,rt=null,t=!0):t=!1),t||Hi(i)),null;case 13:return Mv(t,i,a);case 4:return Ut(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=oa(i,null,l,a):Ht(t,i,l,a),i.child;case 11:return Av(t,i,i.type,i.pendingProps,a);case 7:return Ht(t,i,i.pendingProps,a),i.child;case 8:return Ht(t,i,i.pendingProps.children,a),i.child;case 12:return Ht(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Gi(i,i.type,l.value),Ht(t,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,ra(i),f=Ft(f),l=l(f),i.flags|=1,Ht(t,i,l,a),i.child;case 14:return Rv(t,i,i.type,i.pendingProps,a);case 15:return Iv(t,i,i.type,i.pendingProps,a);case 19:return Pv(t,i,a);case 31:return _A(t,i,a);case 22:return Cv(t,i,a,i.pendingProps);case 24:return ra(i),l=Ft(wt),t===null?(f=fd(),f===null&&(f=et,d=cd(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:l,cache:f},md(i),Gi(i,wt,f)):((t.lanes&a)!==0&&(pd(t,i),wl(i,null,null,a),Tl()),f=t.memoizedState,d=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Gi(i,wt,l)):(l=d.cache,Gi(i,wt,l),l!==f.cache&&ud(i,[wt],a,!0))),Ht(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ei(t){t.flags|=4}function Xd(t,i,a,l,f){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(c_())t.flags|=8192;else throw aa=_c,dd}else t.flags&=-16777217}function Uv(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Z_(i))if(c_())t.flags|=8192;else throw aa=_c,dd}function Pc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Qo():536870912,t.lanes|=i,fo|=i)}function Cl(t,i){if(!je)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function it(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function TA(t,i,a){var l=i.pendingProps;switch(id(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(i),null;case 1:return it(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Xr(wt),ot(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Za(i)?ei(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,ad())),it(i),null;case 26:var f=i.type,d=i.memoizedState;return t===null?(ei(i),d!==null?(it(i),Uv(i,d)):(it(i),Xd(i,f,null,l,a))):d?d!==t.memoizedState?(ei(i),it(i),Uv(i,d)):(it(i),i.flags&=-16777217):(t=t.memoizedProps,t!==l&&ei(i),it(i),Xd(i,f,t,l,a)),null;case 27:if(Vr(i),a=Ne.current,f=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&ei(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return it(i),null}t=fe.current,Za(i)?yy(i):(t=G_(f,l,a),i.stateNode=t,ei(i))}return it(i),null;case 5:if(Vr(i),f=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&ei(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return it(i),null}if(d=fe.current,Za(i))yy(i);else{var v=Wc(Ne.current);switch(d){case 1:d=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=v.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?v.createElement(f,{is:l.is}):v.createElement(f)}}d[ht]=i,d[Bt]=l;e:for(v=i.child;v!==null;){if(v.tag===5||v.tag===6)d.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)break e;for(;v.sibling===null;){if(v.return===null||v.return===i)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}i.stateNode=d;e:switch(Gt(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ei(i)}}return it(i),Xd(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&ei(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=Ne.current,Za(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,f=qt,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[ht]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||M_(t.nodeValue,a)),t||Hi(i,!0)}else t=Wc(t).createTextNode(l),t[ht]=i,i.stateNode=t}return it(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(l=Za(i),a!==null){if(t===null){if(!l)throw Error(s(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[ht]=i}else ta(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;it(i),t=!1}else a=ad(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(In(i),i):(In(i),null);if((i.flags&128)!==0)throw Error(s(558))}return it(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Za(i),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[ht]=i}else ta(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;it(i),f=!1}else f=ad(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(In(i),i):(In(i),null)}return In(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),Pc(i,i.updateQueue),it(i),null);case 4:return ot(),t===null&&vm(i.stateNode.containerInfo),it(i),null;case 10:return Xr(i.type),it(i),null;case 19:if(W(yt),l=i.memoizedState,l===null)return it(i),null;if(f=(i.flags&128)!==0,d=l.rendering,d===null)if(f)Cl(l,!1);else{if(mt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=Sc(t),d!==null){for(i.flags|=128,Cl(l,!1),t=d.updateQueue,i.updateQueue=t,Pc(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)fy(a,t),a=a.sibling;return ie(yt,yt.current&1|2),je&&Qr(i,l.treeForkCount),i.child}t=t.sibling}l.tail!==null&&jt()>Bc&&(i.flags|=128,f=!0,Cl(l,!1),i.lanes=4194304)}else{if(!f)if(t=Sc(d),t!==null){if(i.flags|=128,f=!0,t=t.updateQueue,i.updateQueue=t,Pc(i,t),Cl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!je)return it(i),null}else 2*jt()-l.renderingStartTime>Bc&&a!==536870912&&(i.flags|=128,f=!0,Cl(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(t=l.last,t!==null?t.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=jt(),t.sibling=null,a=yt.current,ie(yt,f?a&1|2:a&1),je&&Qr(i,l.treeForkCount),t):(it(i),null);case 22:case 23:return In(i),_d(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(it(i),i.subtreeFlags&6&&(i.flags|=8192)):it(i),a=i.updateQueue,a!==null&&Pc(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&W(ia),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Xr(wt),it(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function wA(t,i){switch(id(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Xr(wt),ot(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Vr(i),null;case 31:if(i.memoizedState!==null){if(In(i),i.alternate===null)throw Error(s(340));ta()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(In(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));ta()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return W(yt),null;case 4:return ot(),null;case 10:return Xr(i.type),null;case 22:case 23:return In(i),_d(),t!==null&&W(ia),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Xr(wt),null;case 25:return null;default:return null}}function jv(t,i){switch(id(i),i.tag){case 3:Xr(wt),ot();break;case 26:case 27:case 5:Vr(i);break;case 4:ot();break;case 31:i.memoizedState!==null&&In(i);break;case 13:In(i);break;case 19:W(yt);break;case 10:Xr(i.type);break;case 22:case 23:In(i),_d(),t!==null&&W(ia);break;case 24:Xr(wt)}}function Nl(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&t)===t){l=void 0;var d=a.create,v=a.inst;l=d(),v.destroy=l}a=a.next}while(a!==f)}}catch(S){Xe(i,i.return,S)}}function Wi(t,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&t)===t){var v=l.inst,S=v.destroy;if(S!==void 0){v.destroy=void 0,f=i;var k=a,F=S;try{F()}catch(Y){Xe(f,k,Y)}}}l=l.next}while(l!==d)}}catch(Y){Xe(i,i.return,Y)}}function zv(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{xy(i,a)}catch(l){Xe(t,t.return,l)}}}function Bv(t,i,a){a.props=ua(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Xe(t,i,l)}}function xl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(f){Xe(t,i,f)}}function wr(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){Xe(t,i,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){Xe(t,i,f)}else a.current=null}function qv(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){Xe(t,t.return,f)}}function Wd(t,i,a){try{var l=t.stateNode;HA(l,t.type,a,i),l[Bt]=i}catch(f){Xe(t,t.return,f)}}function Fv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&is(t.type)||t.tag===4}function Jd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Fv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&is(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zd(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=kt));else if(l!==4&&(l===27&&is(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(Zd(t,i,a),t=t.sibling;t!==null;)Zd(t,i,a),t=t.sibling}function Lc(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&is(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Lc(t,i,a),t=t.sibling;t!==null;)Lc(t,i,a),t=t.sibling}function Hv(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Gt(i,l,a),i[ht]=t,i[Bt]=a}catch(d){Xe(t,t.return,d)}}var ti=!1,At=!1,em=!1,Gv=typeof WeakSet=="function"?WeakSet:Set,Pt=null;function SA(t,i){if(t=t.containerInfo,Tm=ih,t=ry(t),Kf(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var v=0,S=-1,k=-1,F=0,Y=0,ee=t,G=null;t:for(;;){for(var K;ee!==a||f!==0&&ee.nodeType!==3||(S=v+f),ee!==d||l!==0&&ee.nodeType!==3||(k=v+l),ee.nodeType===3&&(v+=ee.nodeValue.length),(K=ee.firstChild)!==null;)G=ee,ee=K;for(;;){if(ee===t)break t;if(G===a&&++F===f&&(S=v),G===d&&++Y===l&&(k=v),(K=ee.nextSibling)!==null)break;ee=G,G=ee.parentNode}ee=K}a=S===-1||k===-1?null:{start:S,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(wm={focusedElem:t,selectionRange:a},ih=!1,Pt=i;Pt!==null;)if(i=Pt,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Pt=t;else for(;Pt!==null;){switch(i=Pt,d=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)f=t[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var he=ua(a.type,f);t=l.getSnapshotBeforeUpdate(he,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(_e){Xe(a,a.return,_e)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Am(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Am(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,Pt=t;break}Pt=i.return}}function $v(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:ri(t,a),l&4&&Nl(5,a);break;case 1:if(ri(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(v){Xe(a,a.return,v)}else{var f=ua(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(f,i,t.__reactInternalSnapshotBeforeUpdate)}catch(v){Xe(a,a.return,v)}}l&64&&zv(a),l&512&&xl(a,a.return);break;case 3:if(ri(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{xy(t,i)}catch(v){Xe(a,a.return,v)}}break;case 27:i===null&&l&4&&Hv(a);case 26:case 5:ri(t,a),i===null&&l&4&&qv(a),l&512&&xl(a,a.return);break;case 12:ri(t,a);break;case 31:ri(t,a),l&4&&Yv(t,a);break;case 13:ri(t,a),l&4&&Xv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=OA.bind(null,a),JA(t,a))));break;case 22:if(l=a.memoizedState!==null||ti,!l){i=i!==null&&i.memoizedState!==null||At,f=ti;var d=At;ti=l,(At=i)&&!d?ii(t,a,(a.subtreeFlags&8772)!==0):ri(t,a),ti=f,At=d}break;case 30:break;default:ri(t,a)}}function Kv(t){var i=t.alternate;i!==null&&(t.alternate=null,Kv(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Bs(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var at=null,dn=!1;function ni(t,i,a){for(a=a.child;a!==null;)Qv(t,i,a),a=a.sibling}function Qv(t,i,a){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(wi,a)}catch{}switch(a.tag){case 26:At||wr(a,i),ni(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:At||wr(a,i);var l=at,f=dn;is(a.type)&&(at=a.stateNode,dn=!1),ni(t,i,a),jl(a.stateNode),at=l,dn=f;break;case 5:At||wr(a,i);case 6:if(l=at,f=dn,at=null,ni(t,i,a),at=l,dn=f,at!==null)if(dn)try{(at.nodeType===9?at.body:at.nodeName==="HTML"?at.ownerDocument.body:at).removeChild(a.stateNode)}catch(d){Xe(a,i,d)}else try{at.removeChild(a.stateNode)}catch(d){Xe(a,i,d)}break;case 18:at!==null&&(dn?(t=at,z_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),To(t)):z_(at,a.stateNode));break;case 4:l=at,f=dn,at=a.stateNode.containerInfo,dn=!0,ni(t,i,a),at=l,dn=f;break;case 0:case 11:case 14:case 15:Wi(2,a,i),At||Wi(4,a,i),ni(t,i,a);break;case 1:At||(wr(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Bv(a,i,l)),ni(t,i,a);break;case 21:ni(t,i,a);break;case 22:At=(l=At)||a.memoizedState!==null,ni(t,i,a),At=l;break;default:ni(t,i,a)}}function Yv(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{To(t)}catch(a){Xe(i,i.return,a)}}}function Xv(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{To(t)}catch(a){Xe(i,i.return,a)}}function bA(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new Gv),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new Gv),i;default:throw Error(s(435,t.tag))}}function Uc(t,i){var a=bA(t);i.forEach(function(l){if(!a.has(l)){a.add(l);var f=kA.bind(null,t,l);l.then(f,f)}})}function mn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=t,v=i,S=v;e:for(;S!==null;){switch(S.tag){case 27:if(is(S.type)){at=S.stateNode,dn=!1;break e}break;case 5:at=S.stateNode,dn=!1;break e;case 3:case 4:at=S.stateNode.containerInfo,dn=!0;break e}S=S.return}if(at===null)throw Error(s(160));Qv(d,v,f),at=null,dn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Wv(i,t),i=i.sibling}var nr=null;function Wv(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:mn(i,t),pn(t),l&4&&(Wi(3,t,t.return),Nl(3,t),Wi(5,t,t.return));break;case 1:mn(i,t),pn(t),l&512&&(At||a===null||wr(a,a.return)),l&64&&ti&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=nr;if(mn(i,t),pn(t),l&512&&(At||a===null||wr(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[jr]||d[ht]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),Gt(d,l,a),d[ht]=t,gt(d),l=d;break e;case"link":var v=W_("link","href",f).get(l+(a.href||""));if(v){for(var S=0;S<v.length;S++)if(d=v[S],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(S,1);break t}}d=f.createElement(l),Gt(d,l,a),f.head.appendChild(d);break;case"meta":if(v=W_("meta","content",f).get(l+(a.content||""))){for(S=0;S<v.length;S++)if(d=v[S],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(S,1);break t}}d=f.createElement(l),Gt(d,l,a),f.head.appendChild(d);break;default:throw Error(s(468,l))}d[ht]=t,gt(d),l=d}t.stateNode=l}else J_(f,t.type,t.stateNode);else t.stateNode=X_(f,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?J_(f,t.type,t.stateNode):X_(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Wd(t,t.memoizedProps,a.memoizedProps)}break;case 27:mn(i,t),pn(t),l&512&&(At||a===null||wr(a,a.return)),a!==null&&l&4&&Wd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(mn(i,t),pn(t),l&512&&(At||a===null||wr(a,a.return)),t.flags&32){f=t.stateNode;try{Ln(f,"")}catch(he){Xe(t,t.return,he)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,Wd(t,f,a!==null?a.memoizedProps:f)),l&1024&&(em=!0);break;case 6:if(mn(i,t),pn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(he){Xe(t,t.return,he)}}break;case 3:if(eh=null,f=nr,nr=Jc(i.containerInfo),mn(i,t),nr=f,pn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{To(i.containerInfo)}catch(he){Xe(t,t.return,he)}em&&(em=!1,Jv(t));break;case 4:l=nr,nr=Jc(t.stateNode.containerInfo),mn(i,t),pn(t),nr=l;break;case 12:mn(i,t),pn(t);break;case 31:mn(i,t),pn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Uc(t,l)));break;case 13:mn(i,t),pn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(zc=jt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Uc(t,l)));break;case 22:f=t.memoizedState!==null;var k=a!==null&&a.memoizedState!==null,F=ti,Y=At;if(ti=F||f,At=Y||k,mn(i,t),At=Y,ti=F,pn(t),l&8192)e:for(i=t.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||k||ti||At||ca(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){k=a=i;try{if(d=k.stateNode,f)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{S=k.stateNode;var ee=k.memoizedProps.style,G=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;S.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(he){Xe(k,k.return,he)}}}else if(i.tag===6){if(a===null){k=i;try{k.stateNode.nodeValue=f?"":k.memoizedProps}catch(he){Xe(k,k.return,he)}}}else if(i.tag===18){if(a===null){k=i;try{var K=k.stateNode;f?B_(K,!0):B_(k.stateNode,!1)}catch(he){Xe(k,k.return,he)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Uc(t,a))));break;case 19:mn(i,t),pn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Uc(t,l)));break;case 30:break;case 21:break;default:mn(i,t),pn(t)}}function pn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(Fv(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,d=Jd(t);Lc(t,d,f);break;case 5:var v=a.stateNode;a.flags&32&&(Ln(v,""),a.flags&=-33);var S=Jd(t);Lc(t,S,v);break;case 3:case 4:var k=a.stateNode.containerInfo,F=Jd(t);Zd(t,F,k);break;default:throw Error(s(161))}}catch(Y){Xe(t,t.return,Y)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Jv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Jv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function ri(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)$v(t,i.alternate,i),i=i.sibling}function ca(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Wi(4,i,i.return),ca(i);break;case 1:wr(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Bv(i,i.return,a),ca(i);break;case 27:jl(i.stateNode);case 26:case 5:wr(i,i.return),ca(i);break;case 22:i.memoizedState===null&&ca(i);break;case 30:ca(i);break;default:ca(i)}t=t.sibling}}function ii(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=t,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:ii(f,d,a),Nl(4,d);break;case 1:if(ii(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(F){Xe(l,l.return,F)}if(l=d,f=l.updateQueue,f!==null){var S=l.stateNode;try{var k=f.shared.hiddenCallbacks;if(k!==null)for(f.shared.hiddenCallbacks=null,f=0;f<k.length;f++)Ny(k[f],S)}catch(F){Xe(l,l.return,F)}}a&&v&64&&zv(d),xl(d,d.return);break;case 27:Hv(d);case 26:case 5:ii(f,d,a),a&&l===null&&v&4&&qv(d),xl(d,d.return);break;case 12:ii(f,d,a);break;case 31:ii(f,d,a),a&&v&4&&Yv(f,d);break;case 13:ii(f,d,a),a&&v&4&&Xv(f,d);break;case 22:d.memoizedState===null&&ii(f,d,a),xl(d,d.return);break;case 30:break;default:ii(f,d,a)}i=i.sibling}}function tm(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&gl(a))}function nm(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&gl(t))}function rr(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Zv(t,i,a,l),i=i.sibling}function Zv(t,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:rr(t,i,a,l),f&2048&&Nl(9,i);break;case 1:rr(t,i,a,l);break;case 3:rr(t,i,a,l),f&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&gl(t)));break;case 12:if(f&2048){rr(t,i,a,l),t=i.stateNode;try{var d=i.memoizedProps,v=d.id,S=d.onPostCommit;typeof S=="function"&&S(v,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(k){Xe(i,i.return,k)}}else rr(t,i,a,l);break;case 31:rr(t,i,a,l);break;case 13:rr(t,i,a,l);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?rr(t,i,a,l):Dl(t,i):d._visibility&2?rr(t,i,a,l):(d._visibility|=2,uo(t,i,a,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&tm(v,i);break;case 24:rr(t,i,a,l),f&2048&&nm(i.alternate,i);break;default:rr(t,i,a,l)}}function uo(t,i,a,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=t,v=i,S=a,k=l,F=v.flags;switch(v.tag){case 0:case 11:case 15:uo(d,v,S,k,f),Nl(8,v);break;case 23:break;case 22:var Y=v.stateNode;v.memoizedState!==null?Y._visibility&2?uo(d,v,S,k,f):Dl(d,v):(Y._visibility|=2,uo(d,v,S,k,f)),f&&F&2048&&tm(v.alternate,v);break;case 24:uo(d,v,S,k,f),f&&F&2048&&nm(v.alternate,v);break;default:uo(d,v,S,k,f)}i=i.sibling}}function Dl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,f=l.flags;switch(l.tag){case 22:Dl(a,l),f&2048&&tm(l.alternate,l);break;case 24:Dl(a,l),f&2048&&nm(l.alternate,l);break;default:Dl(a,l)}i=i.sibling}}var Ol=8192;function co(t,i,a){if(t.subtreeFlags&Ol)for(t=t.child;t!==null;)e_(t,i,a),t=t.sibling}function e_(t,i,a){switch(t.tag){case 26:co(t,i,a),t.flags&Ol&&t.memoizedState!==null&&c1(a,nr,t.memoizedState,t.memoizedProps);break;case 5:co(t,i,a);break;case 3:case 4:var l=nr;nr=Jc(t.stateNode.containerInfo),co(t,i,a),nr=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Ol,Ol=16777216,co(t,i,a),Ol=l):co(t,i,a));break;default:co(t,i,a)}}function t_(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function kl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Pt=l,r_(l,t)}t_(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)n_(t),t=t.sibling}function n_(t){switch(t.tag){case 0:case 11:case 15:kl(t),t.flags&2048&&Wi(9,t,t.return);break;case 3:kl(t);break;case 12:kl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,jc(t)):kl(t);break;default:kl(t)}}function jc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Pt=l,r_(l,t)}t_(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Wi(8,i,i.return),jc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,jc(i));break;default:jc(i)}t=t.sibling}}function r_(t,i){for(;Pt!==null;){var a=Pt;switch(a.tag){case 0:case 11:case 15:Wi(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:gl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Pt=l;else e:for(a=t;Pt!==null;){l=Pt;var f=l.sibling,d=l.return;if(Kv(l),l===a){Pt=null;break e}if(f!==null){f.return=d,Pt=f;break e}Pt=d}}}var AA={getCacheForType:function(t){var i=Ft(wt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return Ft(wt).controller.signal}},RA=typeof WeakMap=="function"?WeakMap:Map,Ge=0,et=null,Oe=null,Me=0,Ye=0,Cn=null,Ji=!1,ho=!1,rm=!1,si=0,mt=0,Zi=0,ha=0,im=0,Nn=0,fo=0,Ml=null,gn=null,sm=!1,zc=0,i_=0,Bc=1/0,qc=null,es=null,xt=0,ts=null,mo=null,ai=0,am=0,om=null,s_=null,Vl=0,lm=null;function xn(){return(Ge&2)!==0&&Me!==0?Me&-Me:H.T!==null?mm():Ur()}function a_(){if(Nn===0)if((Me&536870912)===0||je){var t=fr;fr<<=1,(fr&3932160)===0&&(fr=262144),Nn=t}else Nn=536870912;return t=Rn.current,t!==null&&(t.flags|=32),Nn}function yn(t,i,a){(t===et&&(Ye===2||Ye===9)||t.cancelPendingCommit!==null)&&(po(t,0),ns(t,Me,Nn,!1)),Ai(t,a),((Ge&2)===0||t!==et)&&(t===et&&((Ge&2)===0&&(ha|=a),mt===4&&ns(t,Me,Nn,!1)),Sr(t))}function o_(t,i,a){if((Ge&6)!==0)throw Error(s(327));var l=!a&&(i&127)===0&&(i&t.expiredLanes)===0||bi(t,i),f=l?NA(t,i):cm(t,i,!0),d=l;do{if(f===0){ho&&!l&&ns(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!IA(a)){f=cm(t,i,!1),d=!1;continue}if(f===2){if(d=i,t.errorRecoveryDisabledLanes&d)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var S=t;f=Ml;var k=S.current.memoizedState.isDehydrated;if(k&&(po(S,v).flags|=256),v=cm(S,v,!1),v!==2){if(rm&&!k){S.errorRecoveryDisabledLanes|=d,ha|=d,f=4;break e}d=gn,gn=f,d!==null&&(gn===null?gn=d:gn.push.apply(gn,d))}f=v}if(d=!1,f!==2)continue}}if(f===1){po(t,0),ns(t,i,0,!0);break}e:{switch(l=t,d=f,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:ns(l,i,Nn,!Ji);break e;case 2:gn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=zc+300-jt(),10<f)){if(ns(l,i,Nn,!Ji),Vn(l,0,!0)!==0)break e;ai=i,l.timeoutHandle=U_(l_.bind(null,l,a,gn,qc,sm,i,Nn,ha,fo,Ji,d,"Throttled",-0,0),f);break e}l_(l,a,gn,qc,sm,i,Nn,ha,fo,Ji,d,null,-0,0)}}break}while(!0);Sr(t)}function l_(t,i,a,l,f,d,v,S,k,F,Y,ee,G,K){if(t.timeoutHandle=-1,ee=i.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:kt},e_(i,d,ee);var he=(d&62914560)===d?zc-jt():(d&4194048)===d?i_-jt():0;if(he=h1(ee,he),he!==null){ai=d,t.cancelPendingCommit=he(g_.bind(null,t,i,d,a,l,f,v,S,k,Y,ee,null,G,K)),ns(t,d,v,!F);return}}g_(t,i,d,a,l,f,v,S,k)}function IA(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!bn(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ns(t,i,a,l){i&=~im,i&=~ha,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var f=i;0<f;){var d=31-sn(f),v=1<<d;l[d]=-1,f&=~v}a!==0&&Yo(t,a,i)}function Fc(){return(Ge&6)===0?(Pl(0),!1):!0}function um(){if(Oe!==null){if(Ye===0)var t=Oe.return;else t=Oe,Yr=na=null,Ad(t),io=null,vl=0,t=Oe;for(;t!==null;)jv(t.alternate,t),t=t.return;Oe=null}}function po(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,KA(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),ai=0,um(),et=t,Oe=a=Kr(t.current,null),Me=i,Ye=0,Cn=null,Ji=!1,ho=bi(t,i),rm=!1,fo=Nn=im=ha=Zi=mt=0,gn=Ml=null,sm=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var f=31-sn(l),d=1<<f;i|=t[f],l&=~d}return si=i,cc(),a}function u_(t,i){Re=null,H.H=Rl,i===ro||i===vc?(i=Ay(),Ye=3):i===dd?(i=Ay(),Ye=4):Ye=i===Bd?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Cn=i,Oe===null&&(mt=1,Oc(t,jn(i,t.current)))}function c_(){var t=Rn.current;return t===null?!0:(Me&4194048)===Me?Fn===null:(Me&62914560)===Me||(Me&536870912)!==0?t===Fn:!1}function h_(){var t=H.H;return H.H=Rl,t===null?Rl:t}function f_(){var t=H.A;return H.A=AA,t}function Hc(){mt=4,Ji||(Me&4194048)!==Me&&Rn.current!==null||(ho=!0),(Zi&134217727)===0&&(ha&134217727)===0||et===null||ns(et,Me,Nn,!1)}function cm(t,i,a){var l=Ge;Ge|=2;var f=h_(),d=f_();(et!==t||Me!==i)&&(qc=null,po(t,i)),i=!1;var v=mt;e:do try{if(Ye!==0&&Oe!==null){var S=Oe,k=Cn;switch(Ye){case 8:um(),v=6;break e;case 3:case 2:case 9:case 6:Rn.current===null&&(i=!0);var F=Ye;if(Ye=0,Cn=null,go(t,S,k,F),a&&ho){v=0;break e}break;default:F=Ye,Ye=0,Cn=null,go(t,S,k,F)}}CA(),v=mt;break}catch(Y){u_(t,Y)}while(!0);return i&&t.shellSuspendCounter++,Yr=na=null,Ge=l,H.H=f,H.A=d,Oe===null&&(et=null,Me=0,cc()),v}function CA(){for(;Oe!==null;)d_(Oe)}function NA(t,i){var a=Ge;Ge|=2;var l=h_(),f=f_();et!==t||Me!==i?(qc=null,Bc=jt()+500,po(t,i)):ho=bi(t,i);e:do try{if(Ye!==0&&Oe!==null){i=Oe;var d=Cn;t:switch(Ye){case 1:Ye=0,Cn=null,go(t,i,d,1);break;case 2:case 9:if(Sy(d)){Ye=0,Cn=null,m_(i);break}i=function(){Ye!==2&&Ye!==9||et!==t||(Ye=7),Sr(t)},d.then(i,i);break e;case 3:Ye=7;break e;case 4:Ye=5;break e;case 7:Sy(d)?(Ye=0,Cn=null,m_(i)):(Ye=0,Cn=null,go(t,i,d,7));break;case 5:var v=null;switch(Oe.tag){case 26:v=Oe.memoizedState;case 5:case 27:var S=Oe;if(v?Z_(v):S.stateNode.complete){Ye=0,Cn=null;var k=S.sibling;if(k!==null)Oe=k;else{var F=S.return;F!==null?(Oe=F,Gc(F)):Oe=null}break t}}Ye=0,Cn=null,go(t,i,d,5);break;case 6:Ye=0,Cn=null,go(t,i,d,6);break;case 8:um(),mt=6;break e;default:throw Error(s(462))}}xA();break}catch(Y){u_(t,Y)}while(!0);return Yr=na=null,H.H=l,H.A=f,Ge=a,Oe!==null?0:(et=null,Me=0,cc(),mt)}function xA(){for(;Oe!==null&&!Pf();)d_(Oe)}function d_(t){var i=Lv(t.alternate,t,si);t.memoizedProps=t.pendingProps,i===null?Gc(t):Oe=i}function m_(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=Dv(a,i,i.pendingProps,i.type,void 0,Me);break;case 11:i=Dv(a,i,i.pendingProps,i.type.render,i.ref,Me);break;case 5:Ad(i);default:jv(a,i),i=Oe=fy(i,si),i=Lv(a,i,si)}t.memoizedProps=t.pendingProps,i===null?Gc(t):Oe=i}function go(t,i,a,l){Yr=na=null,Ad(i),io=null,vl=0;var f=i.return;try{if(vA(t,f,i,a,Me)){mt=1,Oc(t,jn(a,t.current)),Oe=null;return}}catch(d){if(f!==null)throw Oe=f,d;mt=1,Oc(t,jn(a,t.current)),Oe=null;return}i.flags&32768?(je||l===1?t=!0:ho||(Me&536870912)!==0?t=!1:(Ji=t=!0,(l===2||l===9||l===3||l===6)&&(l=Rn.current,l!==null&&l.tag===13&&(l.flags|=16384))),p_(i,t)):Gc(i)}function Gc(t){var i=t;do{if((i.flags&32768)!==0){p_(i,Ji);return}t=i.return;var a=TA(i.alternate,i,si);if(a!==null){Oe=a;return}if(i=i.sibling,i!==null){Oe=i;return}Oe=i=t}while(i!==null);mt===0&&(mt=5)}function p_(t,i){do{var a=wA(t.alternate,t);if(a!==null){a.flags&=32767,Oe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Oe=t;return}Oe=t=a}while(t!==null);mt=6,Oe=null}function g_(t,i,a,l,f,d,v,S,k){t.cancelPendingCommit=null;do $c();while(xt!==0);if((Ge&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=Jf,zt(t,a,d,v,S,k),t===et&&(Oe=et=null,Me=0),mo=i,ts=t,ai=a,am=d,om=f,s_=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,MA(Pr,function(){return T_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=H.T,H.T=null,f=se.p,se.p=2,v=Ge,Ge|=4;try{SA(t,i,a)}finally{Ge=v,se.p=f,H.T=l}}xt=1,y_(),v_(),__()}}function y_(){if(xt===1){xt=0;var t=ts,i=mo,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=H.T,H.T=null;var l=se.p;se.p=2;var f=Ge;Ge|=4;try{Wv(i,t);var d=wm,v=ry(t.containerInfo),S=d.focusedElem,k=d.selectionRange;if(v!==S&&S&&S.ownerDocument&&ny(S.ownerDocument.documentElement,S)){if(k!==null&&Kf(S)){var F=k.start,Y=k.end;if(Y===void 0&&(Y=F),"selectionStart"in S)S.selectionStart=F,S.selectionEnd=Math.min(Y,S.value.length);else{var ee=S.ownerDocument||document,G=ee&&ee.defaultView||window;if(G.getSelection){var K=G.getSelection(),he=S.textContent.length,_e=Math.min(k.start,he),Ze=k.end===void 0?_e:Math.min(k.end,he);!K.extend&&_e>Ze&&(v=Ze,Ze=_e,_e=v);var j=ty(S,_e),V=ty(S,Ze);if(j&&V&&(K.rangeCount!==1||K.anchorNode!==j.node||K.anchorOffset!==j.offset||K.focusNode!==V.node||K.focusOffset!==V.offset)){var q=ee.createRange();q.setStart(j.node,j.offset),K.removeAllRanges(),_e>Ze?(K.addRange(q),K.extend(V.node,V.offset)):(q.setEnd(V.node,V.offset),K.addRange(q))}}}}for(ee=[],K=S;K=K.parentNode;)K.nodeType===1&&ee.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<ee.length;S++){var J=ee[S];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}ih=!!Tm,wm=Tm=null}finally{Ge=f,se.p=l,H.T=a}}t.current=i,xt=2}}function v_(){if(xt===2){xt=0;var t=ts,i=mo,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=H.T,H.T=null;var l=se.p;se.p=2;var f=Ge;Ge|=4;try{$v(t,i.alternate,i)}finally{Ge=f,se.p=l,H.T=a}}xt=3}}function __(){if(xt===4||xt===3){xt=0,Go();var t=ts,i=mo,a=ai,l=s_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?xt=5:(xt=0,mo=ts=null,E_(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(es=null),Wo(a),i=i.stateNode,Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(wi,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=H.T,f=se.p,se.p=2,H.T=null;try{for(var d=t.onRecoverableError,v=0;v<l.length;v++){var S=l[v];d(S.value,{componentStack:S.stack})}}finally{H.T=i,se.p=f}}(ai&3)!==0&&$c(),Sr(t),f=t.pendingLanes,(a&261930)!==0&&(f&42)!==0?t===lm?Vl++:(Vl=0,lm=t):Vl=0,Pl(0)}}function E_(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,gl(i)))}function $c(){return y_(),v_(),__(),T_()}function T_(){if(xt!==5)return!1;var t=ts,i=am;am=0;var a=Wo(ai),l=H.T,f=se.p;try{se.p=32>a?32:a,H.T=null,a=om,om=null;var d=ts,v=ai;if(xt=0,mo=ts=null,ai=0,(Ge&6)!==0)throw Error(s(331));var S=Ge;if(Ge|=4,n_(d.current),Zv(d,d.current,v,a),Ge=S,Pl(0,!1),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(wi,d)}catch{}return!0}finally{se.p=f,H.T=l,E_(t,i)}}function w_(t,i,a){i=jn(a,i),i=zd(t.stateNode,i,2),t=Qi(t,i,2),t!==null&&(Ai(t,2),Sr(t))}function Xe(t,i,a){if(t.tag===3)w_(t,t,a);else for(;i!==null;){if(i.tag===3){w_(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(es===null||!es.has(l))){t=jn(a,t),a=Sv(2),l=Qi(i,a,2),l!==null&&(bv(a,l,i,t),Ai(l,2),Sr(l));break}}i=i.return}}function hm(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new RA;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(rm=!0,f.add(a),t=DA.bind(null,t,i,a),i.then(t,t))}function DA(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,et===t&&(Me&a)===a&&(mt===4||mt===3&&(Me&62914560)===Me&&300>jt()-zc?(Ge&2)===0&&po(t,0):im|=a,fo===Me&&(fo=0)),Sr(t)}function S_(t,i){i===0&&(i=Qo()),t=Zs(t,i),t!==null&&(Ai(t,i),Sr(t))}function OA(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),S_(t,a)}function kA(t,i){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),S_(t,a)}function MA(t,i){return Us(t,i)}var Kc=null,yo=null,fm=!1,Qc=!1,dm=!1,rs=0;function Sr(t){t!==yo&&t.next===null&&(yo===null?Kc=yo=t:yo=yo.next=t),Qc=!0,fm||(fm=!0,PA())}function Pl(t,i){if(!dm&&Qc){dm=!0;do for(var a=!1,l=Kc;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var v=l.suspendedLanes,S=l.pingedLanes;d=(1<<31-sn(42|t)+1)-1,d&=f&~(v&~S),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,I_(l,d))}else d=Me,d=Vn(l,l===et?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||bi(l,d)||(a=!0,I_(l,d));l=l.next}while(a);dm=!1}}function VA(){b_()}function b_(){Qc=fm=!1;var t=0;rs!==0&&$A()&&(t=rs);for(var i=jt(),a=null,l=Kc;l!==null;){var f=l.next,d=A_(l,i);d===0?(l.next=null,a===null?Kc=f:a.next=f,f===null&&(yo=a)):(a=l,(t!==0||(d&3)!==0)&&(Qc=!0)),l=f}xt!==0&&xt!==5||Pl(t),rs!==0&&(rs=0)}function A_(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var v=31-sn(d),S=1<<v,k=f[v];k===-1?((S&a)===0||(S&l)!==0)&&(f[v]=Pa(S,i)):k<=i&&(t.expiredLanes|=S),d&=~S}if(i=et,a=Me,a=Vn(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(Ye===2||Ye===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Va(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||bi(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&Va(l),Wo(a)){case 2:case 8:a=Ot;break;case 32:a=Pr;break;case 268435456:a=$o;break;default:a=Pr}return l=R_.bind(null,t),a=Us(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&Va(l),t.callbackPriority=2,t.callbackNode=null,2}function R_(t,i){if(xt!==0&&xt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if($c()&&t.callbackNode!==a)return null;var l=Me;return l=Vn(t,t===et?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(o_(t,l,i),A_(t,jt()),t.callbackNode!=null&&t.callbackNode===a?R_.bind(null,t):null)}function I_(t,i){if($c())return null;o_(t,i,!0)}function PA(){QA(function(){(Ge&6)!==0?Us(Nt,VA):b_()})}function mm(){if(rs===0){var t=to;t===0&&(t=zs,zs<<=1,(zs&261888)===0&&(zs=256)),rs=t}return rs}function C_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:yr(""+t)}function N_(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function LA(t,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var d=C_((f[Bt]||null).action),v=l.submitter;v&&(i=(i=v[Bt]||null)?C_(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var S=new $s("action","action",null,l,f);t.push({event:S,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(rs!==0){var k=v?N_(f,v):new FormData(f);Md(a,{pending:!0,data:k,method:f.method,action:d},null,k)}}else typeof d=="function"&&(S.preventDefault(),k=v?N_(f,v):new FormData(f),Md(a,{pending:!0,data:k,method:f.method,action:d},d,k))},currentTarget:f}]})}}for(var pm=0;pm<Wf.length;pm++){var gm=Wf[pm],UA=gm.toLowerCase(),jA=gm[0].toUpperCase()+gm.slice(1);tr(UA,"on"+jA)}tr(ay,"onAnimationEnd"),tr(oy,"onAnimationIteration"),tr(ly,"onAnimationStart"),tr("dblclick","onDoubleClick"),tr("focusin","onFocus"),tr("focusout","onBlur"),tr(tA,"onTransitionRun"),tr(nA,"onTransitionStart"),tr(rA,"onTransitionCancel"),tr(uy,"onTransitionEnd"),gr("onMouseEnter",["mouseout","mouseover"]),gr("onMouseLeave",["mouseout","mouseover"]),gr("onPointerEnter",["pointerout","pointerover"]),gr("onPointerLeave",["pointerout","pointerover"]),an("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),an("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),an("onBeforeInput",["compositionend","keypress","textInput","paste"]),an("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),an("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),an("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ll));function x_(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],f=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var v=l.length-1;0<=v;v--){var S=l[v],k=S.instance,F=S.currentTarget;if(S=S.listener,k!==d&&f.isPropagationStopped())break e;d=S,f.currentTarget=F;try{d(f)}catch(Y){uc(Y)}f.currentTarget=null,d=k}else for(v=0;v<l.length;v++){if(S=l[v],k=S.instance,F=S.currentTarget,S=S.listener,k!==d&&f.isPropagationStopped())break e;d=S,f.currentTarget=F;try{d(f)}catch(Y){uc(Y)}f.currentTarget=null,d=k}}}}function ke(t,i){var a=i[Ci];a===void 0&&(a=i[Ci]=new Set);var l=t+"__bubble";a.has(l)||(D_(i,t,2,!1),a.add(l))}function ym(t,i,a){var l=0;i&&(l|=4),D_(a,t,l,i)}var Yc="_reactListening"+Math.random().toString(36).slice(2);function vm(t){if(!t[Yc]){t[Yc]=!0,La.forEach(function(a){a!=="selectionchange"&&(zA.has(a)||ym(a,!1,t),ym(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Yc]||(i[Yc]=!0,ym("selectionchange",!1,i))}}function D_(t,i,a,l){switch(aE(i)){case 2:var f=m1;break;case 8:f=p1;break;default:f=km}a=f.bind(null,i,a,t),f=void 0,!sl||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(i,a,{capture:!0,passive:f}):t.addEventListener(i,a,!0):f!==void 0?t.addEventListener(i,a,{passive:f}):t.addEventListener(i,a,!1)}function _m(t,i,a,l,f){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var S=l.stateNode.containerInfo;if(S===f)break;if(v===4)for(v=l.return;v!==null;){var k=v.tag;if((k===3||k===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;S!==null;){if(v=zr(S),v===null)return;if(k=v.tag,k===5||k===6||k===26||k===27){l=d=v;continue e}S=S.parentNode}}l=l.return}Ku(function(){var F=d,Y=qa(a),ee=[];e:{var G=cy.get(t);if(G!==void 0){var K=$s,he=t;switch(t){case"keypress":if(Gs(a)===0)break e;case"keydown":case"keyup":K=nc;break;case"focusin":he="focus",K=Ui;break;case"focusout":he="blur",K=Ui;break;case"beforeblur":case"afterblur":K=Ui;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Yu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Xu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=ic;break;case ay:case oy:case ly:K=Ga;break;case uy:K=$a;break;case"scroll":case"scrollend":K=Qu;break;case"wheel":K=ac;break;case"copy":case"cut":case"paste":K=Ju;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=cl;break;case"toggle":case"beforetoggle":K=zi}var _e=(i&4)!==0,Ze=!_e&&(t==="scroll"||t==="scrollend"),j=_e?G!==null?G+"Capture":null:G;_e=[];for(var V=F,q;V!==null;){var J=V;if(q=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||q===null||j===null||(J=hn(V,j),J!=null&&_e.push(Ul(V,J,q))),Ze)break;V=V.return}0<_e.length&&(G=new K(G,he,null,a,Y),ee.push({event:G,listeners:_e}))}}if((i&7)===0){e:{if(G=t==="mouseover"||t==="pointerover",K=t==="mouseout"||t==="pointerout",G&&a!==Ba&&(he=a.relatedTarget||a.fromElement)&&(zr(he)||he[mr]))break e;if((K||G)&&(G=Y.window===Y?Y:(G=Y.ownerDocument)?G.defaultView||G.parentWindow:window,K?(he=a.relatedTarget||a.toElement,K=F,he=he?zr(he):null,he!==null&&(Ze=u(he),_e=he.tag,he!==Ze||_e!==5&&_e!==27&&_e!==6)&&(he=null)):(K=null,he=F),K!==he)){if(_e=Yu,J="onMouseLeave",j="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(_e=cl,J="onPointerLeave",j="onPointerEnter",V="pointer"),Ze=K==null?G:qs(K),q=he==null?G:qs(he),G=new _e(J,V+"leave",K,a,Y),G.target=Ze,G.relatedTarget=q,J=null,zr(Y)===F&&(_e=new _e(j,V+"enter",he,a,Y),_e.target=q,_e.relatedTarget=Ze,J=_e),Ze=J,K&&he)t:{for(_e=BA,j=K,V=he,q=0,J=j;J;J=_e(J))q++;J=0;for(var ge=V;ge;ge=_e(ge))J++;for(;0<q-J;)j=_e(j),q--;for(;0<J-q;)V=_e(V),J--;for(;q--;){if(j===V||V!==null&&j===V.alternate){_e=j;break t}j=_e(j),V=_e(V)}_e=null}else _e=null;K!==null&&O_(ee,G,K,_e,!1),he!==null&&Ze!==null&&O_(ee,Ze,he,_e,!0)}}e:{if(G=F?qs(F):window,K=G.nodeName&&G.nodeName.toLowerCase(),K==="select"||K==="input"&&G.type==="file")var Fe=Yg;else if(fn(G))if(Xg)Fe=Jb;else{Fe=Xb;var de=Yb}else K=G.nodeName,!K||K.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?F&&rl(F.elementType)&&(Fe=Yg):Fe=Wb;if(Fe&&(Fe=Fe(t,F))){Xs(ee,Fe,a,Y);break e}de&&de(t,G,F),t==="focusout"&&F&&G.type==="number"&&F.memoizedProps.value!=null&&za(G,"number",G.value)}switch(de=F?qs(F):window,t){case"focusin":(fn(de)||de.contentEditable==="true")&&(Ka=de,Qf=F,dl=null);break;case"focusout":dl=Qf=Ka=null;break;case"mousedown":Yf=!0;break;case"contextmenu":case"mouseup":case"dragend":Yf=!1,iy(ee,a,Y);break;case"selectionchange":if(eA)break;case"keydown":case"keyup":iy(ee,a,Y)}var Ce;if(y)e:{switch(t){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else xe?Ke(t,a)&&(Ve="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ve="onCompositionStart");Ve&&(z&&a.locale!=="ko"&&(xe||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&xe&&(Ce=Mi()):(Sn=Y,Fa="value"in Sn?Sn.value:Sn.textContent,xe=!0)),de=Xc(F,Ve),0<de.length&&(Ve=new ol(Ve,t,null,a,Y),ee.push({event:Ve,listeners:de}),Ce?Ve.data=Ce:(Ce=Tt(a),Ce!==null&&(Ve.data=Ce)))),(Ce=R?Mt(t,a):Vt(t,a))&&(Ve=Xc(F,"onBeforeInput"),0<Ve.length&&(de=new ol("onBeforeInput","beforeinput",null,a,Y),ee.push({event:de,listeners:Ve}),de.data=Ce)),LA(ee,t,F,a,Y)}x_(ee,i)})}function Ul(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Xc(t,i){for(var a=i+"Capture",l=[];t!==null;){var f=t,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=hn(t,a),f!=null&&l.unshift(Ul(t,f,d)),f=hn(t,i),f!=null&&l.push(Ul(t,f,d))),t.tag===3)return l;t=t.return}return[]}function BA(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function O_(t,i,a,l,f){for(var d=i._reactName,v=[];a!==null&&a!==l;){var S=a,k=S.alternate,F=S.stateNode;if(S=S.tag,k!==null&&k===l)break;S!==5&&S!==26&&S!==27||F===null||(k=F,f?(F=hn(a,d),F!=null&&v.unshift(Ul(a,F,k))):f||(F=hn(a,d),F!=null&&v.push(Ul(a,F,k)))),a=a.return}v.length!==0&&t.push({event:i,listeners:v})}var qA=/\r\n?/g,FA=/\u0000|\uFFFD/g;function k_(t){return(typeof t=="string"?t:""+t).replace(qA,`
`).replace(FA,"")}function M_(t,i){return i=k_(i),k_(t)===i}function Je(t,i,a,l,f,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Ln(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Ln(t,""+l);break;case"className":Di(t,"class",l);break;case"tabIndex":Di(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Di(t,a,l);break;case"style":Gu(t,l,d);break;case"data":if(i!=="object"){Di(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=yr(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&Je(t,i,"name",f.name,f,null),Je(t,i,"formEncType",f.formEncType,f,null),Je(t,i,"formMethod",f.formMethod,f,null),Je(t,i,"formTarget",f.formTarget,f,null)):(Je(t,i,"encType",f.encType,f,null),Je(t,i,"method",f.method,f,null),Je(t,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=yr(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=kt);break;case"onScroll":l!=null&&ke("scroll",t);break;case"onScrollEnd":l!=null&&ke("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=yr(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":ke("beforetoggle",t),ke("toggle",t),xi(t,"popover",l);break;case"xlinkActuate":Pn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Pn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Pn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Pn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Pn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Pn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Pn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Pn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Pn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":xi(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=qf.get(a)||a,xi(t,a,l))}}function Em(t,i,a,l,f,d){switch(a){case"style":Gu(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Ln(t,l):(typeof l=="number"||typeof l=="bigint")&&Ln(t,""+l);break;case"onScroll":l!=null&&ke("scroll",t);break;case"onScrollEnd":l!=null&&ke("scrollend",t);break;case"onClick":l!=null&&(t.onclick=kt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ni.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=t[Bt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,f);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):xi(t,a,l)}}}function Gt(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",t),ke("load",t);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Je(t,i,d,v,a,null)}}f&&Je(t,i,"srcSet",a.srcSet,a,null),l&&Je(t,i,"src",a.src,a,null);return;case"input":ke("invalid",t);var S=d=v=f=null,k=null,F=null;for(l in a)if(a.hasOwnProperty(l)){var Y=a[l];if(Y!=null)switch(l){case"name":f=Y;break;case"type":v=Y;break;case"checked":k=Y;break;case"defaultChecked":F=Y;break;case"value":d=Y;break;case"defaultValue":S=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,i));break;default:Je(t,i,l,Y,a,null)}}Fs(t,d,S,k,F,v,f,!1);return;case"select":ke("invalid",t),l=v=d=null;for(f in a)if(a.hasOwnProperty(f)&&(S=a[f],S!=null))switch(f){case"value":d=S;break;case"defaultValue":v=S;break;case"multiple":l=S;default:Je(t,i,f,S,a,null)}i=d,a=v,t.multiple=!!l,i!=null?qe(t,!!l,i,!1):a!=null&&qe(t,!!l,a,!0);return;case"textarea":ke("invalid",t),d=f=l=null;for(v in a)if(a.hasOwnProperty(v)&&(S=a[v],S!=null))switch(v){case"value":l=S;break;case"defaultValue":f=S;break;case"children":d=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(s(91));break;default:Je(t,i,v,S,a,null)}ki(t,l,f,d);return;case"option":for(k in a)if(a.hasOwnProperty(k)&&(l=a[k],l!=null))switch(k){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Je(t,i,k,l,a,null)}return;case"dialog":ke("beforetoggle",t),ke("toggle",t),ke("cancel",t),ke("close",t);break;case"iframe":case"object":ke("load",t);break;case"video":case"audio":for(l=0;l<Ll.length;l++)ke(Ll[l],t);break;case"image":ke("error",t),ke("load",t);break;case"details":ke("toggle",t);break;case"embed":case"source":case"link":ke("error",t),ke("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(l=a[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Je(t,i,F,l,a,null)}return;default:if(rl(i)){for(Y in a)a.hasOwnProperty(Y)&&(l=a[Y],l!==void 0&&Em(t,i,Y,l,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(l=a[S],l!=null&&Je(t,i,S,l,a,null))}function HA(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,v=null,S=null,k=null,F=null,Y=null;for(K in a){var ee=a[K];if(a.hasOwnProperty(K)&&ee!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":k=ee;default:l.hasOwnProperty(K)||Je(t,i,K,null,l,ee)}}for(var G in l){var K=l[G];if(ee=a[G],l.hasOwnProperty(G)&&(K!=null||ee!=null))switch(G){case"type":d=K;break;case"name":f=K;break;case"checked":F=K;break;case"defaultChecked":Y=K;break;case"value":v=K;break;case"defaultValue":S=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,i));break;default:K!==ee&&Je(t,i,G,K,l,ee)}}Oi(t,v,S,k,F,Y,d,f);return;case"select":K=v=S=G=null;for(d in a)if(k=a[d],a.hasOwnProperty(d)&&k!=null)switch(d){case"value":break;case"multiple":K=k;default:l.hasOwnProperty(d)||Je(t,i,d,null,l,k)}for(f in l)if(d=l[f],k=a[f],l.hasOwnProperty(f)&&(d!=null||k!=null))switch(f){case"value":G=d;break;case"defaultValue":S=d;break;case"multiple":v=d;default:d!==k&&Je(t,i,f,d,l,k)}i=S,a=v,l=K,G!=null?qe(t,!!a,G,!1):!!l!=!!a&&(i!=null?qe(t,!!a,i,!0):qe(t,!!a,a?[]:"",!1));return;case"textarea":K=G=null;for(S in a)if(f=a[S],a.hasOwnProperty(S)&&f!=null&&!l.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Je(t,i,S,null,l,f)}for(v in l)if(f=l[v],d=a[v],l.hasOwnProperty(v)&&(f!=null||d!=null))switch(v){case"value":G=f;break;case"defaultValue":K=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==d&&Je(t,i,v,f,l,d)}Hs(t,G,K);return;case"option":for(var he in a)if(G=a[he],a.hasOwnProperty(he)&&G!=null&&!l.hasOwnProperty(he))switch(he){case"selected":t.selected=!1;break;default:Je(t,i,he,null,l,G)}for(k in l)if(G=l[k],K=a[k],l.hasOwnProperty(k)&&G!==K&&(G!=null||K!=null))switch(k){case"selected":t.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:Je(t,i,k,G,l,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in a)G=a[_e],a.hasOwnProperty(_e)&&G!=null&&!l.hasOwnProperty(_e)&&Je(t,i,_e,null,l,G);for(F in l)if(G=l[F],K=a[F],l.hasOwnProperty(F)&&G!==K&&(G!=null||K!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:Je(t,i,F,G,l,K)}return;default:if(rl(i)){for(var Ze in a)G=a[Ze],a.hasOwnProperty(Ze)&&G!==void 0&&!l.hasOwnProperty(Ze)&&Em(t,i,Ze,void 0,l,G);for(Y in l)G=l[Y],K=a[Y],!l.hasOwnProperty(Y)||G===K||G===void 0&&K===void 0||Em(t,i,Y,G,l,K);return}}for(var j in a)G=a[j],a.hasOwnProperty(j)&&G!=null&&!l.hasOwnProperty(j)&&Je(t,i,j,null,l,G);for(ee in l)G=l[ee],K=a[ee],!l.hasOwnProperty(ee)||G===K||G==null&&K==null||Je(t,i,ee,G,l,K)}function V_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function GA(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,v=f.initiatorType,S=f.duration;if(d&&S&&V_(v)){for(v=0,S=f.responseEnd,l+=1;l<a.length;l++){var k=a[l],F=k.startTime;if(F>S)break;var Y=k.transferSize,ee=k.initiatorType;Y&&V_(ee)&&(k=k.responseEnd,v+=Y*(k<S?1:(S-F)/(k-F)))}if(--l,i+=8*(d+v)/(f.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Tm=null,wm=null;function Wc(t){return t.nodeType===9?t:t.ownerDocument}function P_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function L_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Sm(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var bm=null;function $A(){var t=window.event;return t&&t.type==="popstate"?t===bm?!1:(bm=t,!0):(bm=null,!1)}var U_=typeof setTimeout=="function"?setTimeout:void 0,KA=typeof clearTimeout=="function"?clearTimeout:void 0,j_=typeof Promise=="function"?Promise:void 0,QA=typeof queueMicrotask=="function"?queueMicrotask:typeof j_<"u"?function(t){return j_.resolve(null).then(t).catch(YA)}:U_;function YA(t){setTimeout(function(){throw t})}function is(t){return t==="head"}function z_(t,i){var a=i,l=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(f),To(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")jl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,jl(a);for(var d=a.firstChild;d;){var v=d.nextSibling,S=d.nodeName;d[jr]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=v}}else a==="body"&&jl(t.ownerDocument.body);a=f}while(a);To(i)}function B_(t,i){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Am(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Am(a),Bs(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function XA(t,i,a,l){for(;t.nodeType===1;){var f=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[jr])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Hn(t.nextSibling),t===null)break}return null}function WA(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Hn(t.nextSibling),t===null))return null;return t}function q_(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=Hn(t.nextSibling),t===null))return null;return t}function Rm(t){return t.data==="$?"||t.data==="$~"}function Im(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function JA(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Hn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var Cm=null;function F_(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return Hn(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function H_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function G_(t,i,a){switch(i=Wc(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function jl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Bs(t)}var Gn=new Map,$_=new Set;function Jc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var oi=se.d;se.d={f:ZA,r:e1,D:t1,C:n1,L:r1,m:i1,X:a1,S:s1,M:o1};function ZA(){var t=oi.f(),i=Fc();return t||i}function e1(t){var i=Br(t);i!==null&&i.tag===5&&i.type==="form"?uv(i):oi.r(t)}var vo=typeof document>"u"?null:document;function K_(t,i,a){var l=vo;if(l&&typeof i=="string"&&i){var f=ft(i);f='link[rel="'+t+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),$_.has(f)||($_.add(f),t={rel:t,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),Gt(i,"link",t),gt(i),l.head.appendChild(i)))}}function t1(t){oi.D(t),K_("dns-prefetch",t,null)}function n1(t,i){oi.C(t,i),K_("preconnect",t,i)}function r1(t,i,a){oi.L(t,i,a);var l=vo;if(l&&t&&i){var f='link[rel="preload"][as="'+ft(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+ft(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+ft(a.imageSizes)+'"]')):f+='[href="'+ft(t)+'"]';var d=f;switch(i){case"style":d=_o(t);break;case"script":d=Eo(t)}Gn.has(d)||(t=w({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Gn.set(d,t),l.querySelector(f)!==null||i==="style"&&l.querySelector(zl(d))||i==="script"&&l.querySelector(Bl(d))||(i=l.createElement("link"),Gt(i,"link",t),gt(i),l.head.appendChild(i)))}}function i1(t,i){oi.m(t,i);var a=vo;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+ft(l)+'"][href="'+ft(t)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Eo(t)}if(!Gn.has(d)&&(t=w({rel:"modulepreload",href:t},i),Gn.set(d,t),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Bl(d)))return}l=a.createElement("link"),Gt(l,"link",t),gt(l),a.head.appendChild(l)}}}function s1(t,i,a){oi.S(t,i,a);var l=vo;if(l&&t){var f=Zn(l).hoistableStyles,d=_o(t);i=i||"default";var v=f.get(d);if(!v){var S={loading:0,preload:null};if(v=l.querySelector(zl(d)))S.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Gn.get(d))&&Nm(t,a);var k=v=l.createElement("link");gt(k),Gt(k,"link",t),k._p=new Promise(function(F,Y){k.onload=F,k.onerror=Y}),k.addEventListener("load",function(){S.loading|=1}),k.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Zc(v,i,l)}v={type:"stylesheet",instance:v,count:1,state:S},f.set(d,v)}}}function a1(t,i){oi.X(t,i);var a=vo;if(a&&t){var l=Zn(a).hoistableScripts,f=Eo(t),d=l.get(f);d||(d=a.querySelector(Bl(f)),d||(t=w({src:t,async:!0},i),(i=Gn.get(f))&&xm(t,i),d=a.createElement("script"),gt(d),Gt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function o1(t,i){oi.M(t,i);var a=vo;if(a&&t){var l=Zn(a).hoistableScripts,f=Eo(t),d=l.get(f);d||(d=a.querySelector(Bl(f)),d||(t=w({src:t,async:!0,type:"module"},i),(i=Gn.get(f))&&xm(t,i),d=a.createElement("script"),gt(d),Gt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function Q_(t,i,a,l){var f=(f=Ne.current)?Jc(f):null;if(!f)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=_o(a.href),a=Zn(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=_o(a.href);var d=Zn(f).hoistableStyles,v=d.get(t);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,v),(d=f.querySelector(zl(t)))&&!d._p&&(v.instance=d,v.state.loading=5),Gn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Gn.set(t,a),d||l1(f,t,a,v.state))),i&&l===null)throw Error(s(528,""));return v}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Eo(a),a=Zn(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function _o(t){return'href="'+ft(t)+'"'}function zl(t){return'link[rel="stylesheet"]['+t+"]"}function Y_(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function l1(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Gt(i,"link",a),gt(i),t.head.appendChild(i))}function Eo(t){return'[src="'+ft(t)+'"]'}function Bl(t){return"script[async]"+t}function X_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+ft(a.href)+'"]');if(l)return i.instance=l,gt(l),l;var f=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),gt(l),Gt(l,"style",f),Zc(l,a.precedence,t),i.instance=l;case"stylesheet":f=_o(a.href);var d=t.querySelector(zl(f));if(d)return i.state.loading|=4,i.instance=d,gt(d),d;l=Y_(a),(f=Gn.get(f))&&Nm(l,f),d=(t.ownerDocument||t).createElement("link"),gt(d);var v=d;return v._p=new Promise(function(S,k){v.onload=S,v.onerror=k}),Gt(d,"link",l),i.state.loading|=4,Zc(d,a.precedence,t),i.instance=d;case"script":return d=Eo(a.src),(f=t.querySelector(Bl(d)))?(i.instance=f,gt(f),f):(l=a,(f=Gn.get(d))&&(l=w({},a),xm(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),gt(f),Gt(f,"link",l),t.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Zc(l,a.precedence,t));return i.instance}function Zc(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,v=0;v<l.length;v++){var S=l[v];if(S.dataset.precedence===i)d=S;else if(d!==f)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Nm(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function xm(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var eh=null;function W_(t,i,a){if(eh===null){var l=new Map,f=eh=new Map;f.set(a,l)}else f=eh,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),f=0;f<a.length;f++){var d=a[f];if(!(d[jr]||d[ht]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=t+v;var S=l.get(v);S?S.push(d):l.set(v,[d])}}return l}function J_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function u1(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Z_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function c1(t,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=_o(l.href),d=i.querySelector(zl(f));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=th.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=d,gt(d);return}d=i.ownerDocument||i,l=Y_(l),(f=Gn.get(f))&&Nm(l,f),d=d.createElement("link"),gt(d);var v=d;v._p=new Promise(function(S,k){v.onload=S,v.onerror=k}),Gt(d,"link",l),a.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=th.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var Dm=0;function h1(t,i){return t.stylesheets&&t.count===0&&rh(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&rh(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+i);0<t.imgBytes&&Dm===0&&(Dm=62500*GA());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&rh(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>Dm?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function th(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)rh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var nh=null;function rh(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,nh=new Map,i.forEach(f1,t),nh=null,th.call(t))}function f1(t,i){if(!(i.state.loading&4)){var a=nh.get(t);if(a)var l=a.get(null);else{a=new Map,nh.set(t,a);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var v=f[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}f=i.instance,v=f.getAttribute("data-precedence"),d=a.get(v)||l,d===l&&a.set(null,f),a.set(v,f),this.count++,l=th.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),i.state.loading|=4}}var ql={$$typeof:Z,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function d1(t,i,a,l,f,d,v,S,k){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Lr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lr(0),this.hiddenUpdates=Lr(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function eE(t,i,a,l,f,d,v,S,k,F,Y,ee){return t=new d1(t,i,a,v,k,F,Y,ee,S),i=1,d===!0&&(i|=24),d=An(3,null,null,i),t.current=d,d.stateNode=t,i=cd(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},md(d),t}function tE(t){return t?(t=Xa,t):Xa}function nE(t,i,a,l,f,d){f=tE(f),l.context===null?l.context=f:l.pendingContext=f,l=Ki(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Qi(t,l,i),a!==null&&(yn(a,t,i),El(a,t,i))}function rE(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Om(t,i){rE(t,i),(t=t.alternate)&&rE(t,i)}function iE(t){if(t.tag===13||t.tag===31){var i=Zs(t,67108864);i!==null&&yn(i,t,67108864),Om(t,67108864)}}function sE(t){if(t.tag===13||t.tag===31){var i=xn();i=Xo(i);var a=Zs(t,i);a!==null&&yn(a,t,i),Om(t,i)}}var ih=!0;function m1(t,i,a,l){var f=H.T;H.T=null;var d=se.p;try{se.p=2,km(t,i,a,l)}finally{se.p=d,H.T=f}}function p1(t,i,a,l){var f=H.T;H.T=null;var d=se.p;try{se.p=8,km(t,i,a,l)}finally{se.p=d,H.T=f}}function km(t,i,a,l){if(ih){var f=Mm(l);if(f===null)_m(t,i,l,sh,a),oE(t,l);else if(y1(f,t,i,a,l))l.stopPropagation();else if(oE(t,l),i&4&&-1<g1.indexOf(t)){for(;f!==null;){var d=Br(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=Jn(d.pendingLanes);if(v!==0){var S=d;for(S.pendingLanes|=2,S.entangledLanes|=2;v;){var k=1<<31-sn(v);S.entanglements[1]|=k,v&=~k}Sr(d),(Ge&6)===0&&(Bc=jt()+500,Pl(0))}}break;case 31:case 13:S=Zs(d,2),S!==null&&yn(S,d,2),Fc(),Om(d,2)}if(d=Mm(l),d===null&&_m(t,i,l,sh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else _m(t,i,l,null,a)}}function Mm(t){return t=qa(t),Vm(t)}var sh=null;function Vm(t){if(sh=null,t=zr(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=c(i),t!==null)return t;t=null}else if(a===31){if(t=m(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return sh=t,null}function aE(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Uu()){case Nt:return 2;case Ot:return 8;case Pr:case ju:return 32;case $o:return 268435456;default:return 32}default:return 32}}var Pm=!1,ss=null,as=null,os=null,Fl=new Map,Hl=new Map,ls=[],g1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function oE(t,i){switch(t){case"focusin":case"focusout":ss=null;break;case"dragenter":case"dragleave":as=null;break;case"mouseover":case"mouseout":os=null;break;case"pointerover":case"pointerout":Fl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hl.delete(i.pointerId)}}function Gl(t,i,a,l,f,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},i!==null&&(i=Br(i),i!==null&&iE(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),t)}function y1(t,i,a,l,f){switch(i){case"focusin":return ss=Gl(ss,t,i,a,l,f),!0;case"dragenter":return as=Gl(as,t,i,a,l,f),!0;case"mouseover":return os=Gl(os,t,i,a,l,f),!0;case"pointerover":var d=f.pointerId;return Fl.set(d,Gl(Fl.get(d)||null,t,i,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,Hl.set(d,Gl(Hl.get(d)||null,t,i,a,l,f)),!0}return!1}function lE(t){var i=zr(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=c(a),i!==null){t.blockedOn=i,Bu(t.priority,function(){sE(a)});return}}else if(i===31){if(i=m(a),i!==null){t.blockedOn=i,Bu(t.priority,function(){sE(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ah(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Mm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Ba=l,a.target.dispatchEvent(l),Ba=null}else return i=Br(a),i!==null&&iE(i),t.blockedOn=a,!1;i.shift()}return!0}function uE(t,i,a){ah(t)&&a.delete(i)}function v1(){Pm=!1,ss!==null&&ah(ss)&&(ss=null),as!==null&&ah(as)&&(as=null),os!==null&&ah(os)&&(os=null),Fl.forEach(uE),Hl.forEach(uE)}function oh(t,i){t.blockedOn===i&&(t.blockedOn=null,Pm||(Pm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,v1)))}var lh=null;function cE(t){lh!==t&&(lh=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){lh===t&&(lh=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],f=t[i+2];if(typeof l!="function"){if(Vm(l||a)===null)continue;break}var d=Br(a);d!==null&&(t.splice(i,3),i-=3,Md(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function To(t){function i(k){return oh(k,t)}ss!==null&&oh(ss,t),as!==null&&oh(as,t),os!==null&&oh(os,t),Fl.forEach(i),Hl.forEach(i);for(var a=0;a<ls.length;a++){var l=ls[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ls.length&&(a=ls[0],a.blockedOn===null);)lE(a),a.blockedOn===null&&ls.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],v=f[Bt]||null;if(typeof d=="function")v||cE(a);else if(v){var S=null;if(d&&d.hasAttribute("formAction")){if(f=d,v=d[Bt]||null)S=v.formAction;else if(Vm(f)!==null)continue}else S=v.action;typeof S=="function"?a[l+1]=S:(a.splice(l,3),l-=3),cE(a)}}}function hE(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function Lm(t){this._internalRoot=t}uh.prototype.render=Lm.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=xn();nE(a,l,t,i,null,null)},uh.prototype.unmount=Lm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;nE(t.current,2,null,t,null,null),Fc(),i[mr]=null}};function uh(t){this._internalRoot=t}uh.prototype.unstable_scheduleHydration=function(t){if(t){var i=Ur();t={blockedOn:null,target:t,priority:i};for(var a=0;a<ls.length&&i!==0&&i<ls[a].priority;a++);ls.splice(a,0,t),a===0&&lE(t)}};var fE=e.version;if(fE!=="19.2.0")throw Error(s(527,fE,"19.2.0"));se.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=g(i),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var _1={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ch=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ch.isDisabled&&ch.supportsFiber)try{wi=ch.inject(_1),Xt=ch}catch{}}return Kl.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",f=_v,d=Ev,v=Tv;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=eE(t,1,!1,null,null,a,l,null,f,d,v,hE),t[mr]=i.current,vm(t),new Lm(i)},Kl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,f="",d=_v,v=Ev,S=Tv,k=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.formState!==void 0&&(k=a.formState)),i=eE(t,1,!0,i,a??null,l,f,k,d,v,S,hE),i.context=tE(null),a=i.current,l=xn(),l=Xo(l),f=Ki(l),f.callback=null,Qi(a,f,l),a=l,i.current.lanes=a,Ai(i,a),Sr(i),t[mr]=i.current,vm(t),new uh(i)},Kl.version="19.2.0",Kl}var wE;function x1(){if(wE)return zm.exports;wE=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),zm.exports=N1(),zm.exports}var D1=x1();/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var SE="popstate";function O1(r={}){function e(o,u){let{pathname:c="/",search:m="",hash:p=""}=Ra(o.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),op("",{pathname:c,search:m,hash:p},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(o,u){let c=o.document.querySelector("base"),m="";if(c&&c.getAttribute("href")){let p=o.location.href,g=p.indexOf("#");m=g===-1?p:p.slice(0,g)}return m+"#"+(typeof u=="string"?u:lu(u))}function s(o,u){Yn(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return M1(e,n,s,r)}function ut(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Yn(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function k1(){return Math.random().toString(36).substring(2,10)}function bE(r,e){return{usr:r.state,key:r.key,idx:e}}function op(r,e,n=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Ra(e):e,state:n,key:e&&e.key||s||k1()}}function lu({pathname:r="/",search:e="",hash:n=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function Ra(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substring(n),r=r.substring(0,n));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function M1(r,e,n,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,c=o.history,m="POP",p=null,g=_();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function _(){return(c.state||{idx:null}).idx}function w(){m="POP";let B=_(),X=B==null?null:B-g;g=B,p&&p({action:m,location:$.location,delta:X})}function I(B,X){m="PUSH";let re=op($.location,B,X);n&&n(re,B),g=_()+1;let Z=bE(re,g),le=$.createHref(re);try{c.pushState(Z,"",le)}catch(me){if(me instanceof DOMException&&me.name==="DataCloneError")throw me;o.location.assign(le)}u&&p&&p({action:m,location:$.location,delta:1})}function M(B,X){m="REPLACE";let re=op($.location,B,X);n&&n(re,B),g=_();let Z=bE(re,g),le=$.createHref(re);c.replaceState(Z,"",le),u&&p&&p({action:m,location:$.location,delta:0})}function U(B){return V1(B)}let $={get action(){return m},get location(){return r(o,c)},listen(B){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(SE,w),p=B,()=>{o.removeEventListener(SE,w),p=null}},createHref(B){return e(o,B)},createURL:U,encodeLocation(B){let X=U(B);return{pathname:X.pathname,search:X.search,hash:X.hash}},push:I,replace:M,go(B){return c.go(B)}};return $}function V1(r,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ut(n,"No window.location.(origin|href) available to create URL");let s=typeof r=="string"?r:lu(r);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function bT(r,e,n="/"){return P1(r,e,n,!1)}function P1(r,e,n,s){let o=typeof e=="string"?Ra(e):e,u=pi(o.pathname||"/",n);if(u==null)return null;let c=AT(r);L1(c);let m=null;for(let p=0;m==null&&p<c.length;++p){let g=Q1(u);m=$1(c[p],g,s)}return m}function AT(r,e=[],n=[],s="",o=!1){let u=(c,m,p=o,g)=>{let _={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:m,route:c};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(s)&&p)return;ut(_.relativePath.startsWith(s),`Absolute route path "${_.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(s.length)}let w=fi([s,_.relativePath]),I=n.concat(_);c.children&&c.children.length>0&&(ut(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),AT(c.children,e,I,w,p)),!(c.path==null&&!c.index)&&e.push({path:w,score:H1(w,c.index),routesMeta:I})};return r.forEach((c,m)=>{var p;if(c.path===""||!((p=c.path)!=null&&p.includes("?")))u(c,m);else for(let g of RT(c.path))u(c,m,!0,g)}),e}function RT(r){let e=r.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let c=RT(s.join("/")),m=[];return m.push(...c.map(p=>p===""?u:[u,p].join("/"))),o&&m.push(...c),m.map(p=>r.startsWith("/")&&p===""?"/":p)}function L1(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:G1(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var U1=/^:[\w-]+$/,j1=3,z1=2,B1=1,q1=10,F1=-2,AE=r=>r==="*";function H1(r,e){let n=r.split("/"),s=n.length;return n.some(AE)&&(s+=F1),e&&(s+=z1),n.filter(o=>!AE(o)).reduce((o,u)=>o+(U1.test(u)?j1:u===""?B1:q1),s)}function G1(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function $1(r,e,n=!1){let{routesMeta:s}=r,o={},u="/",c=[];for(let m=0;m<s.length;++m){let p=s[m],g=m===s.length-1,_=u==="/"?e:e.slice(u.length)||"/",w=Dh({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},_),I=p.route;if(!w&&g&&n&&!s[s.length-1].route.index&&(w=Dh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},_)),!w)return null;Object.assign(o,w.params),c.push({params:o,pathname:fi([u,w.pathname]),pathnameBase:J1(fi([u,w.pathnameBase])),route:I}),w.pathnameBase!=="/"&&(u=fi([u,w.pathnameBase]))}return c}function Dh(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,s]=K1(r.path,r.caseSensitive,r.end),o=e.match(n);if(!o)return null;let u=o[0],c=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((g,{paramName:_,isOptional:w},I)=>{if(_==="*"){let U=m[I]||"";c=u.slice(0,u.length-U.length).replace(/(.)\/+$/,"$1")}const M=m[I];return w&&!M?g[_]=void 0:g[_]=(M||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:c,pattern:r}}function K1(r,e=!1,n=!0){Yn(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,m,p)=>(s.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function Q1(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yn(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function pi(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=r.charAt(n);return s&&s!=="/"?null:r.slice(n)||"/"}function Y1(r,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof r=="string"?Ra(r):r;return{pathname:n?n.startsWith("/")?n:X1(n,e):e,search:Z1(s),hash:eR(o)}}function X1(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Hm(r,e,n,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function W1(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function IT(r){let e=W1(r);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function CT(r,e,n,s=!1){let o;typeof r=="string"?o=Ra(r):(o={...r},ut(!o.pathname||!o.pathname.includes("?"),Hm("?","pathname","search",o)),ut(!o.pathname||!o.pathname.includes("#"),Hm("#","pathname","hash",o)),ut(!o.search||!o.search.includes("#"),Hm("#","search","hash",o)));let u=r===""||o.pathname==="",c=u?"/":o.pathname,m;if(c==null)m=n;else{let w=e.length-1;if(!s&&c.startsWith("..")){let I=c.split("/");for(;I[0]==="..";)I.shift(),w-=1;o.pathname=I.join("/")}m=w>=0?e[w]:"/"}let p=Y1(o,m),g=c&&c!=="/"&&c.endsWith("/"),_=(u||c===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||_)&&(p.pathname+="/"),p}var fi=r=>r.join("/").replace(/\/\/+/g,"/"),J1=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Z1=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,eR=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function tR(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var NT=["POST","PUT","PATCH","DELETE"];new Set(NT);var nR=["GET",...NT];new Set(nR);var Lo=L.createContext(null);Lo.displayName="DataRouter";var sf=L.createContext(null);sf.displayName="DataRouterState";L.createContext(!1);var xT=L.createContext({isTransitioning:!1});xT.displayName="ViewTransition";var rR=L.createContext(new Map);rR.displayName="Fetchers";var iR=L.createContext(null);iR.displayName="Await";var kr=L.createContext(null);kr.displayName="Navigation";var Eu=L.createContext(null);Eu.displayName="Location";var Mr=L.createContext({outlet:null,matches:[],isDataRoute:!1});Mr.displayName="Route";var zp=L.createContext(null);zp.displayName="RouteError";function sR(r,{relative:e}={}){ut(Tu(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=L.useContext(kr),{hash:o,pathname:u,search:c}=wu(r,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:fi([n,u])),s.createHref({pathname:m,search:c,hash:o})}function Tu(){return L.useContext(Eu)!=null}function xs(){return ut(Tu(),"useLocation() may be used only in the context of a <Router> component."),L.useContext(Eu).location}var DT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function OT(r){L.useContext(kr).static||L.useLayoutEffect(r)}function ur(){let{isDataRoute:r}=L.useContext(Mr);return r?vR():aR()}function aR(){ut(Tu(),"useNavigate() may be used only in the context of a <Router> component.");let r=L.useContext(Lo),{basename:e,navigator:n}=L.useContext(kr),{matches:s}=L.useContext(Mr),{pathname:o}=xs(),u=JSON.stringify(IT(s)),c=L.useRef(!1);return OT(()=>{c.current=!0}),L.useCallback((p,g={})=>{if(Yn(c.current,DT),!c.current)return;if(typeof p=="number"){n.go(p);return}let _=CT(p,JSON.parse(u),o,g.relative==="path");r==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:fi([e,_.pathname])),(g.replace?n.replace:n.push)(_,g.state,g)},[e,n,u,o,r])}L.createContext(null);function kT(){let{matches:r}=L.useContext(Mr),e=r[r.length-1];return e?e.params:{}}function wu(r,{relative:e}={}){let{matches:n}=L.useContext(Mr),{pathname:s}=xs(),o=JSON.stringify(IT(n));return L.useMemo(()=>CT(r,JSON.parse(o),s,e==="path"),[r,o,s,e])}function oR(r,e){return MT(r,e)}function MT(r,e,n,s,o){var re;ut(Tu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=L.useContext(kr),{matches:c}=L.useContext(Mr),m=c[c.length-1],p=m?m.params:{},g=m?m.pathname:"/",_=m?m.pathnameBase:"/",w=m&&m.route;{let Z=w&&w.path||"";VT(g,!w||Z.endsWith("*")||Z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${Z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Z}"> to <Route path="${Z==="/"?"*":`${Z}/*`}">.`)}let I=xs(),M;if(e){let Z=typeof e=="string"?Ra(e):e;ut(_==="/"||((re=Z.pathname)==null?void 0:re.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${Z.pathname}" was given in the \`location\` prop.`),M=Z}else M=I;let U=M.pathname||"/",$=U;if(_!=="/"){let Z=_.replace(/^\//,"").split("/");$="/"+U.replace(/^\//,"").split("/").slice(Z.length).join("/")}let B=bT(r,{pathname:$});Yn(w||B!=null,`No routes matched location "${M.pathname}${M.search}${M.hash}" `),Yn(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${M.pathname}${M.search}${M.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let X=fR(B&&B.map(Z=>Object.assign({},Z,{params:Object.assign({},p,Z.params),pathname:fi([_,u.encodeLocation?u.encodeLocation(Z.pathname).pathname:Z.pathname]),pathnameBase:Z.pathnameBase==="/"?_:fi([_,u.encodeLocation?u.encodeLocation(Z.pathnameBase).pathname:Z.pathnameBase])})),c,n,s,o);return e&&X?L.createElement(Eu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...M},navigationType:"POP"}},X):X}function lR(){let r=yR(),e=tR(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",r),c=L.createElement(L.Fragment,null,L.createElement("p",null," Hey developer "),L.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",L.createElement("code",{style:u},"ErrorBoundary")," or"," ",L.createElement("code",{style:u},"errorElement")," prop on your route.")),L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),n?L.createElement("pre",{style:o},n):null,c)}var uR=L.createElement(lR,null),cR=class extends L.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.unstable_onError?this.props.unstable_onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?L.createElement(Mr.Provider,{value:this.props.routeContext},L.createElement(zp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function hR({routeContext:r,match:e,children:n}){let s=L.useContext(Lo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),L.createElement(Mr.Provider,{value:r},n)}function fR(r,e=[],n=null,s=null,o=null){if(r==null){if(!n)return null;if(n.errors)r=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let u=r,c=n==null?void 0:n.errors;if(c!=null){let g=u.findIndex(_=>_.route.id&&(c==null?void 0:c[_.route.id])!==void 0);ut(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),u=u.slice(0,Math.min(u.length,g+1))}let m=!1,p=-1;if(n)for(let g=0;g<u.length;g++){let _=u[g];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(p=g),_.route.id){let{loaderData:w,errors:I}=n,M=_.route.loader&&!w.hasOwnProperty(_.route.id)&&(!I||I[_.route.id]===void 0);if(_.route.lazy||M){m=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}return u.reduceRight((g,_,w)=>{let I,M=!1,U=null,$=null;n&&(I=c&&_.route.id?c[_.route.id]:void 0,U=_.route.errorElement||uR,m&&(p<0&&w===0?(VT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),M=!0,$=null):p===w&&(M=!0,$=_.route.hydrateFallbackElement||null)));let B=e.concat(u.slice(0,w+1)),X=()=>{let re;return I?re=U:M?re=$:_.route.Component?re=L.createElement(_.route.Component,null):_.route.element?re=_.route.element:re=g,L.createElement(hR,{match:_,routeContext:{outlet:g,matches:B,isDataRoute:n!=null},children:re})};return n&&(_.route.ErrorBoundary||_.route.errorElement||w===0)?L.createElement(cR,{location:n.location,revalidation:n.revalidation,component:U,error:I,children:X(),routeContext:{outlet:null,matches:B,isDataRoute:!0},unstable_onError:s}):X()},null)}function Bp(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dR(r){let e=L.useContext(Lo);return ut(e,Bp(r)),e}function mR(r){let e=L.useContext(sf);return ut(e,Bp(r)),e}function pR(r){let e=L.useContext(Mr);return ut(e,Bp(r)),e}function qp(r){let e=pR(r),n=e.matches[e.matches.length-1];return ut(n.route.id,`${r} can only be used on routes that contain a unique "id"`),n.route.id}function gR(){return qp("useRouteId")}function yR(){var s;let r=L.useContext(zp),e=mR("useRouteError"),n=qp("useRouteError");return r!==void 0?r:(s=e.errors)==null?void 0:s[n]}function vR(){let{router:r}=dR("useNavigate"),e=qp("useNavigate"),n=L.useRef(!1);return OT(()=>{n.current=!0}),L.useCallback(async(o,u={})=>{Yn(n.current,DT),n.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...u}))},[r,e])}var RE={};function VT(r,e,n){!e&&!RE[r]&&(RE[r]=!0,Yn(!1,n))}L.memo(_R);function _R({routes:r,future:e,state:n,unstable_onError:s}){return MT(r,void 0,n,s,e)}function hs(r){ut(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ER({basename:r="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:u=!1}){ut(!Tu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=r.replace(/^\/*/,"/"),m=L.useMemo(()=>({basename:c,navigator:o,static:u,future:{}}),[c,o,u]);typeof n=="string"&&(n=Ra(n));let{pathname:p="/",search:g="",hash:_="",state:w=null,key:I="default"}=n,M=L.useMemo(()=>{let U=pi(p,c);return U==null?null:{location:{pathname:U,search:g,hash:_,state:w,key:I},navigationType:s}},[c,p,g,_,w,I,s]);return Yn(M!=null,`<Router basename="${c}"> is not able to match the URL "${p}${g}${_}" because it does not start with the basename, so the <Router> won't render anything.`),M==null?null:L.createElement(kr.Provider,{value:m},L.createElement(Eu.Provider,{children:e,value:M}))}function TR({children:r,location:e}){return oR(lp(r),e)}function lp(r,e=[]){let n=[];return L.Children.forEach(r,(s,o)=>{if(!L.isValidElement(s))return;let u=[...e,o];if(s.type===L.Fragment){n.push.apply(n,lp(s.props.children,u));return}ut(s.type===hs,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ut(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=lp(s.props.children,u)),n.push(c)}),n}var vh="get",_h="application/x-www-form-urlencoded";function af(r){return r!=null&&typeof r.tagName=="string"}function wR(r){return af(r)&&r.tagName.toLowerCase()==="button"}function SR(r){return af(r)&&r.tagName.toLowerCase()==="form"}function bR(r){return af(r)&&r.tagName.toLowerCase()==="input"}function AR(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function RR(r,e){return r.button===0&&(!e||e==="_self")&&!AR(r)}function up(r=""){return new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((e,n)=>{let s=r[n];return e.concat(Array.isArray(s)?s.map(o=>[n,o]):[[n,s]])},[]))}function IR(r,e){let n=up(r);return e&&e.forEach((s,o)=>{n.has(o)||e.getAll(o).forEach(u=>{n.append(o,u)})}),n}var hh=null;function CR(){if(hh===null)try{new FormData(document.createElement("form"),0),hh=!1}catch{hh=!0}return hh}var NR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Gm(r){return r!=null&&!NR.has(r)?(Yn(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_h}"`),null):r}function xR(r,e){let n,s,o,u,c;if(SR(r)){let m=r.getAttribute("action");s=m?pi(m,e):null,n=r.getAttribute("method")||vh,o=Gm(r.getAttribute("enctype"))||_h,u=new FormData(r)}else if(wR(r)||bR(r)&&(r.type==="submit"||r.type==="image")){let m=r.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||m.getAttribute("action");if(s=p?pi(p,e):null,n=r.getAttribute("formmethod")||m.getAttribute("method")||vh,o=Gm(r.getAttribute("formenctype"))||Gm(m.getAttribute("enctype"))||_h,u=new FormData(m,r),!CR()){let{name:g,type:_,value:w}=r;if(_==="image"){let I=g?`${g}.`:"";u.append(`${I}x`,"0"),u.append(`${I}y`,"0")}else g&&u.append(g,w)}}else{if(af(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=vh,s=null,o=_h,c=r}return u&&o==="text/plain"&&(c=u,u=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:u,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Fp(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function DR(r,e,n){let s=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return s.pathname==="/"?s.pathname=`_root.${n}`:e&&pi(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function OR(r,e){if(r.id in e)return e[r.id];try{let n=await import(r.module);return e[r.id]=n,n}catch(n){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function kR(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function MR(r,e,n){let s=await Promise.all(r.map(async o=>{let u=e.routes[o.route.id];if(u){let c=await OR(u,n);return c.links?c.links():[]}return[]}));return UR(s.flat(1).filter(kR).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function IE(r,e,n,s,o,u){let c=(p,g)=>n[g]?p.route.id!==n[g].route.id:!0,m=(p,g)=>{var _;return n[g].pathname!==p.pathname||((_=n[g].route.path)==null?void 0:_.endsWith("*"))&&n[g].params["*"]!==p.params["*"]};return u==="assets"?e.filter((p,g)=>c(p,g)||m(p,g)):u==="data"?e.filter((p,g)=>{var w;let _=s.routes[p.route.id];if(!_||!_.hasLoader)return!1;if(c(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let I=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((w=n[0])==null?void 0:w.params)||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof I=="boolean")return I}return!0}):[]}function VR(r,e,{includeHydrateFallback:n}={}){return PR(r.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function PR(r){return[...new Set(r)]}function LR(r){let e={},n=Object.keys(r).sort();for(let s of n)e[s]=r[s];return e}function UR(r,e){let n=new Set;return new Set(e),r.reduce((s,o)=>{let u=JSON.stringify(LR(o));return n.has(u)||(n.add(u),s.push({key:u,link:o})),s},[])}function PT(){let r=L.useContext(Lo);return Fp(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function jR(){let r=L.useContext(sf);return Fp(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Hp=L.createContext(void 0);Hp.displayName="FrameworkContext";function LT(){let r=L.useContext(Hp);return Fp(r,"You must render this element inside a <HydratedRouter> element"),r}function zR(r,e){let n=L.useContext(Hp),[s,o]=L.useState(!1),[u,c]=L.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:_,onTouchStart:w}=e,I=L.useRef(null);L.useEffect(()=>{if(r==="render"&&c(!0),r==="viewport"){let $=X=>{X.forEach(re=>{c(re.isIntersecting)})},B=new IntersectionObserver($,{threshold:.5});return I.current&&B.observe(I.current),()=>{B.disconnect()}}},[r]),L.useEffect(()=>{if(s){let $=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout($)}}},[s]);let M=()=>{o(!0)},U=()=>{o(!1),c(!1)};return n?r!=="intent"?[u,I,{}]:[u,I,{onFocus:Ql(m,M),onBlur:Ql(p,U),onMouseEnter:Ql(g,M),onMouseLeave:Ql(_,U),onTouchStart:Ql(w,M)}]:[!1,I,{}]}function Ql(r,e){return n=>{r&&r(n),n.defaultPrevented||e(n)}}function BR({page:r,...e}){let{router:n}=PT(),s=L.useMemo(()=>bT(n.routes,r,n.basename),[n.routes,r,n.basename]);return s?L.createElement(FR,{page:r,matches:s,...e}):null}function qR(r){let{manifest:e,routeModules:n}=LT(),[s,o]=L.useState([]);return L.useEffect(()=>{let u=!1;return MR(r,e,n).then(c=>{u||o(c)}),()=>{u=!0}},[r,e,n]),s}function FR({page:r,matches:e,...n}){let s=xs(),{manifest:o,routeModules:u}=LT(),{basename:c}=PT(),{loaderData:m,matches:p}=jR(),g=L.useMemo(()=>IE(r,e,p,o,s,"data"),[r,e,p,o,s]),_=L.useMemo(()=>IE(r,e,p,o,s,"assets"),[r,e,p,o,s]),w=L.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let U=new Set,$=!1;if(e.forEach(X=>{var Z;let re=o.routes[X.route.id];!re||!re.hasLoader||(!g.some(le=>le.route.id===X.route.id)&&X.route.id in m&&((Z=u[X.route.id])!=null&&Z.shouldRevalidate)||re.hasClientLoader?$=!0:U.add(X.route.id))}),U.size===0)return[];let B=DR(r,c,"data");return $&&U.size>0&&B.searchParams.set("_routes",e.filter(X=>U.has(X.route.id)).map(X=>X.route.id).join(",")),[B.pathname+B.search]},[c,m,s,o,g,e,r,u]),I=L.useMemo(()=>VR(_,o),[_,o]),M=qR(_);return L.createElement(L.Fragment,null,w.map(U=>L.createElement("link",{key:U,rel:"prefetch",as:"fetch",href:U,...n})),I.map(U=>L.createElement("link",{key:U,rel:"modulepreload",href:U,...n})),M.map(({key:U,link:$})=>L.createElement("link",{key:U,nonce:n.nonce,...$})))}function HR(...r){return e=>{r.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var UT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{UT&&(window.__reactRouterVersion="7.8.2")}catch{}function GR({basename:r,children:e,window:n}){let s=L.useRef();s.current==null&&(s.current=O1({window:n,v5Compat:!0}));let o=s.current,[u,c]=L.useState({action:o.action,location:o.location}),m=L.useCallback(p=>{L.startTransition(()=>c(p))},[c]);return L.useLayoutEffect(()=>o.listen(m),[o,m]),L.createElement(ER,{basename:r,children:e,location:u.location,navigationType:u.action,navigator:o})}var jT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zT=L.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:u,replace:c,state:m,target:p,to:g,preventScrollReset:_,viewTransition:w,...I},M){let{basename:U}=L.useContext(kr),$=typeof g=="string"&&jT.test(g),B,X=!1;if(typeof g=="string"&&$&&(B=g,UT))try{let A=new URL(window.location.href),C=g.startsWith("//")?new URL(A.protocol+g):new URL(g),x=pi(C.pathname,U);C.origin===A.origin&&x!=null?g=x+C.search+C.hash:X=!0}catch{Yn(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let re=sR(g,{relative:o}),[Z,le,me]=zR(s,I),ae=YR(g,{replace:c,state:m,target:p,preventScrollReset:_,relative:o,viewTransition:w});function D(A){e&&e(A),A.defaultPrevented||ae(A)}let b=L.createElement("a",{...I,...me,href:B||re,onClick:X||u?e:D,ref:HR(M,le),target:p,"data-discover":!$&&n==="render"?"true":void 0});return Z&&!$?L.createElement(L.Fragment,null,b,L.createElement(BR,{page:re})):b});zT.displayName="Link";var $R=L.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:u,to:c,viewTransition:m,children:p,...g},_){let w=wu(c,{relative:g.relative}),I=xs(),M=L.useContext(sf),{navigator:U,basename:$}=L.useContext(kr),B=M!=null&&tI(w)&&m===!0,X=U.encodeLocation?U.encodeLocation(w).pathname:w.pathname,re=I.pathname,Z=M&&M.navigation&&M.navigation.location?M.navigation.location.pathname:null;n||(re=re.toLowerCase(),Z=Z?Z.toLowerCase():null,X=X.toLowerCase()),Z&&$&&(Z=pi(Z,$)||Z);const le=X!=="/"&&X.endsWith("/")?X.length-1:X.length;let me=re===X||!o&&re.startsWith(X)&&re.charAt(le)==="/",ae=Z!=null&&(Z===X||!o&&Z.startsWith(X)&&Z.charAt(X.length)==="/"),D={isActive:me,isPending:ae,isTransitioning:B},b=me?e:void 0,A;typeof s=="function"?A=s(D):A=[s,me?"active":null,ae?"pending":null,B?"transitioning":null].filter(Boolean).join(" ");let C=typeof u=="function"?u(D):u;return L.createElement(zT,{...g,"aria-current":b,className:A,ref:_,style:C,to:c,viewTransition:m},typeof p=="function"?p(D):p)});$R.displayName="NavLink";var KR=L.forwardRef(({discover:r="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:u,method:c=vh,action:m,onSubmit:p,relative:g,preventScrollReset:_,viewTransition:w,...I},M)=>{let U=ZR(),$=eI(m,{relative:g}),B=c.toLowerCase()==="get"?"get":"post",X=typeof m=="string"&&jT.test(m),re=Z=>{if(p&&p(Z),Z.defaultPrevented)return;Z.preventDefault();let le=Z.nativeEvent.submitter,me=(le==null?void 0:le.getAttribute("formmethod"))||c;U(le||Z.currentTarget,{fetcherKey:e,method:me,navigate:n,replace:o,state:u,relative:g,preventScrollReset:_,viewTransition:w})};return L.createElement("form",{ref:M,method:B,action:$,onSubmit:s?p:re,...I,"data-discover":!X&&r==="render"?"true":void 0})});KR.displayName="Form";function QR(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function BT(r){let e=L.useContext(Lo);return ut(e,QR(r)),e}function YR(r,{target:e,replace:n,state:s,preventScrollReset:o,relative:u,viewTransition:c}={}){let m=ur(),p=xs(),g=wu(r,{relative:u});return L.useCallback(_=>{if(RR(_,e)){_.preventDefault();let w=n!==void 0?n:lu(p)===lu(g);m(r,{replace:w,state:s,preventScrollReset:o,relative:u,viewTransition:c})}},[p,m,g,n,s,e,r,o,u,c])}function XR(r){Yn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=L.useRef(up(r)),n=L.useRef(!1),s=xs(),o=L.useMemo(()=>IR(s.search,n.current?null:e.current),[s.search]),u=ur(),c=L.useCallback((m,p)=>{const g=up(typeof m=="function"?m(new URLSearchParams(o)):m);n.current=!0,u("?"+g,p)},[u,o]);return[o,c]}var WR=0,JR=()=>`__${String(++WR)}__`;function ZR(){let{router:r}=BT("useSubmit"),{basename:e}=L.useContext(kr),n=gR();return L.useCallback(async(s,o={})=>{let{action:u,method:c,encType:m,formData:p,body:g}=xR(s,e);if(o.navigate===!1){let _=o.fetcherKey||JR();await r.fetch(_,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||c,formEncType:o.encType||m,flushSync:o.flushSync})}else await r.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||c,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,n])}function eI(r,{relative:e}={}){let{basename:n}=L.useContext(kr),s=L.useContext(Mr);ut(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...wu(r||".",{relative:e})},c=xs();if(r==null){u.search=c.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(_=>_==="")){m.delete("index"),p.filter(w=>w).forEach(w=>m.append("index",w));let _=m.toString();u.search=_?`?${_}`:""}}return(!r||r===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:fi([n,u.pathname])),lu(u)}function tI(r,{relative:e}={}){let n=L.useContext(xT);ut(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=BT("useViewTransitionState"),o=wu(r,{relative:e});if(!n.isTransitioning)return!1;let u=pi(n.currentLocation.pathname,s)||n.currentLocation.pathname,c=pi(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Dh(o.pathname,c)!=null||Dh(o.pathname,u)!=null}const qT="workout-tracker-theme",Io={DARK:"dark",LIGHT:"light"};function Gp(){return localStorage.getItem(qT)||Io.DARK}function FT(r){Object.values(Io).includes(r)||(console.warn(`Invalid theme: ${r}. Using dark theme.`),r=Io.DARK),document.documentElement.setAttribute("data-theme",r),localStorage.setItem(qT,r),window.dispatchEvent(new CustomEvent("themechange",{detail:{theme:r}}))}function nI(){const e=Gp()===Io.DARK?Io.LIGHT:Io.DARK;return FT(e),e}function rI(){const r=Gp();FT(r)}const iI=()=>{};var CE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},sI=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],c=r[n++],m=r[n++],p=((o&7)<<18|(u&63)<<12|(c&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=r[n++],c=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|c&63)}}return e.join("")},GT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],c=o+1<r.length,m=c?r[o+1]:0,p=o+2<r.length,g=p?r[o+2]:0,_=u>>2,w=(u&3)<<4|m>>4;let I=(m&15)<<2|g>>6,M=g&63;p||(M=64,c||(I=64)),s.push(n[_],n[w],n[I],n[M])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(HT(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):sI(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const g=o<r.length?n[r.charAt(o)]:64;++o;const w=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||m==null||g==null||w==null)throw new aI;const I=u<<2|m>>4;if(s.push(I),g!==64){const M=m<<4&240|g>>2;if(s.push(M),w!==64){const U=g<<6&192|w;s.push(U)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class aI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oI=function(r){const e=HT(r);return GT.encodeByteArray(e,!0)},Oh=function(r){return oI(r).replace(/\./g,"")},$T=function(r){try{return GT.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI=()=>lI().__FIREBASE_DEFAULTS__,cI=()=>{if(typeof process>"u"||typeof CE>"u")return;const r=CE.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},hI=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&$T(r[1]);return e&&JSON.parse(e)},of=()=>{try{return iI()||uI()||cI()||hI()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},KT=r=>{var e,n;return(n=(e=of())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[r]},fI=r=>{const e=KT(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},QT=()=>{var r;return(r=of())===null||r===void 0?void 0:r.config},YT=r=>{var e;return(e=of())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function XT(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Oh(JSON.stringify(n)),Oh(JSON.stringify(c)),""].join(".")}const tu={};function pI(){const r={prod:[],emulator:[]};for(const e of Object.keys(tu))tu[e]?r.emulator.push(e):r.prod.push(e);return r}function gI(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let NE=!1;function WT(r,e){if(typeof window>"u"||typeof document>"u"||!Uo(window.location.host)||tu[r]===e||tu[r]||NE)return;tu[r]=e;function n(I){return`__firebase__banner__${I}`}const s="__firebase__banner",u=pI().prod.length>0;function c(){const I=document.getElementById(s);I&&I.remove()}function m(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function p(I,M){I.setAttribute("width","24"),I.setAttribute("id",M),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function g(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{NE=!0,c()},I}function _(I,M){I.setAttribute("id",M),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function w(){const I=gI(s),M=n("text"),U=document.getElementById(M)||document.createElement("span"),$=n("learnmore"),B=document.getElementById($)||document.createElement("a"),X=n("preprendIcon"),re=document.getElementById(X)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const Z=I.element;m(Z),_(B,$);const le=g();p(re,X),Z.append(re,U,B,le),document.body.appendChild(Z)}u?(U.innerText="Preview backend disconnected.",re.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(re.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function vI(){var r;const e=(r=of())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _I(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function EI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function TI(){const r=rn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function wI(){return!vI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ZT(){try{return typeof indexedDB=="object"}catch{return!1}}function ew(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}function SI(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI="FirebaseError";class cr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=bI,Object.setPrototypeOf(this,cr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ia.prototype.create)}}class Ia{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],c=u?AI(u,s):"Error",m=`${this.serviceName}: ${c} (${o}).`;return new cr(o,m,s)}}function AI(r,e){return r.replace(RI,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const RI=/\{\$([^}]+)}/g;function II(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ws(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=r[o],c=e[o];if(xE(u)&&xE(c)){if(!ws(u,c))return!1}else if(u!==c)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function xE(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Yl(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Xl(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function CI(r,e){const n=new NI(r,e);return n.subscribe.bind(n)}class NI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");xI(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=$m),o.error===void 0&&(o.error=$m),o.complete===void 0&&(o.complete=$m);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xI(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function $m(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI=1e3,OI=2,kI=4*60*60*1e3,MI=.5;function DE(r,e=DI,n=OI){const s=e*Math.pow(n,r),o=Math.round(MI*s*(Math.random()-.5)*2);return Math.min(kI,s+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(r){return r&&r._delegate?r._delegate:r}class or{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new dI;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(LI(e))try{this.getOrInitializeService({instanceIdentifier:fa})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=fa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fa){return this.instances.has(e)}getOptions(e=fa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&c.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(o,u);const c=this.instances.get(o);return c&&e(c,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:PI(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=fa){return this.component?this.component.multipleInstances?e:fa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PI(r){return r===fa?void 0:r}function LI(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new VI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Pe||(Pe={}));const jI={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},zI=Pe.INFO,BI={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},qI=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=BI[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lf{constructor(e){this.name=e,this._logLevel=zI,this._logHandler=qI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const FI=(r,e)=>e.some(n=>r instanceof n);let OE,kE;function HI(){return OE||(OE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GI(){return kE||(kE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tw=new WeakMap,cp=new WeakMap,nw=new WeakMap,Km=new WeakMap,$p=new WeakMap;function $I(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",c)},u=()=>{n(gs(r.result)),o()},c=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&tw.set(n,r)}).catch(()=>{}),$p.set(e,r),e}function KI(r){if(cp.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",c),r.removeEventListener("abort",c)},u=()=>{n(),o()},c=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",c),r.addEventListener("abort",c)});cp.set(r,e)}let hp={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return cp.get(r);if(e==="objectStoreNames")return r.objectStoreNames||nw.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gs(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function QI(r){hp=r(hp)}function YI(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(Qm(this),e,...n);return nw.set(s,e.sort?e.sort():[e]),gs(s)}:GI().includes(r)?function(...e){return r.apply(Qm(this),e),gs(tw.get(this))}:function(...e){return gs(r.apply(Qm(this),e))}}function XI(r){return typeof r=="function"?YI(r):(r instanceof IDBTransaction&&KI(r),FI(r,HI())?new Proxy(r,hp):r)}function gs(r){if(r instanceof IDBRequest)return $I(r);if(Km.has(r))return Km.get(r);const e=XI(r);return e!==r&&(Km.set(r,e),$p.set(e,r)),e}const Qm=r=>$p.get(r);function rw(r,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const c=indexedDB.open(r,e),m=gs(c);return s&&c.addEventListener("upgradeneeded",p=>{s(gs(c.result),p.oldVersion,p.newVersion,gs(c.transaction),p)}),n&&c.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const WI=["get","getKey","getAll","getAllKeys","count"],JI=["put","add","delete","clear"],Ym=new Map;function ME(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Ym.get(e))return Ym.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=JI.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||WI.includes(n)))return;const u=async function(c,...m){const p=this.transaction(c,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(m.shift())),(await Promise.all([g[n](...m),o&&p.done]))[0]};return Ym.set(e,u),u}QI(r=>({...r,get:(e,n,s)=>ME(e,n)||r.get(e,n,s),has:(e,n)=>!!ME(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(eC(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function eC(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const fp="@firebase/app",VE="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi=new lf("@firebase/app"),tC="@firebase/app-compat",nC="@firebase/analytics-compat",rC="@firebase/analytics",iC="@firebase/app-check-compat",sC="@firebase/app-check",aC="@firebase/auth",oC="@firebase/auth-compat",lC="@firebase/database",uC="@firebase/data-connect",cC="@firebase/database-compat",hC="@firebase/functions",fC="@firebase/functions-compat",dC="@firebase/installations",mC="@firebase/installations-compat",pC="@firebase/messaging",gC="@firebase/messaging-compat",yC="@firebase/performance",vC="@firebase/performance-compat",_C="@firebase/remote-config",EC="@firebase/remote-config-compat",TC="@firebase/storage",wC="@firebase/storage-compat",SC="@firebase/firestore",bC="@firebase/ai",AC="@firebase/firestore-compat",RC="firebase",IC="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp="[DEFAULT]",CC={[fp]:"fire-core",[tC]:"fire-core-compat",[rC]:"fire-analytics",[nC]:"fire-analytics-compat",[sC]:"fire-app-check",[iC]:"fire-app-check-compat",[aC]:"fire-auth",[oC]:"fire-auth-compat",[lC]:"fire-rtdb",[uC]:"fire-data-connect",[cC]:"fire-rtdb-compat",[hC]:"fire-fn",[fC]:"fire-fn-compat",[dC]:"fire-iid",[mC]:"fire-iid-compat",[pC]:"fire-fcm",[gC]:"fire-fcm-compat",[yC]:"fire-perf",[vC]:"fire-perf-compat",[_C]:"fire-rc",[EC]:"fire-rc-compat",[TC]:"fire-gcs",[wC]:"fire-gcs-compat",[SC]:"fire-fst",[AC]:"fire-fst-compat",[bC]:"fire-vertex","fire-js":"fire-js",[RC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh=new Map,NC=new Map,mp=new Map;function PE(r,e){try{r.container.addComponent(e)}catch(n){gi.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function xr(r){const e=r.name;if(mp.has(e))return gi.debug(`There were multiple attempts to register component ${e}.`),!1;mp.set(e,r);for(const n of kh.values())PE(n,r);for(const n of NC.values())PE(n,r);return!0}function Ca(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function Dn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ys=new Ia("app","Firebase",xC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new or("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ys.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo=IC;function iw(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:dp,automaticDataCollectionEnabled:!0},e),o=s.name;if(typeof o!="string"||!o)throw ys.create("bad-app-name",{appName:String(o)});if(n||(n=QT()),!n)throw ys.create("no-options");const u=kh.get(o);if(u){if(ws(n,u.options)&&ws(s,u.config))return u;throw ys.create("duplicate-app",{appName:o})}const c=new UI(o);for(const p of mp.values())c.addComponent(p);const m=new DC(n,s,c);return kh.set(o,m),m}function Kp(r=dp){const e=kh.get(r);if(!e&&r===dp&&QT())return iw();if(!e)throw ys.create("no-app",{appName:r});return e}function Kn(r,e,n){var s;let o=(s=CC[r])!==null&&s!==void 0?s:r;n&&(o+=`-${n}`);const u=o.match(/\s|\//),c=e.match(/\s|\//);if(u||c){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&c&&m.push("and"),c&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gi.warn(m.join(" "));return}xr(new or(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC="firebase-heartbeat-database",kC=1,uu="firebase-heartbeat-store";let Xm=null;function sw(){return Xm||(Xm=rw(OC,kC,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(uu)}catch(n){console.warn(n)}}}}).catch(r=>{throw ys.create("idb-open",{originalErrorMessage:r.message})})),Xm}async function MC(r){try{const n=(await sw()).transaction(uu),s=await n.objectStore(uu).get(aw(r));return await n.done,s}catch(e){if(e instanceof cr)gi.warn(e.message);else{const n=ys.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});gi.warn(n.message)}}}async function LE(r,e){try{const s=(await sw()).transaction(uu,"readwrite");await s.objectStore(uu).put(e,aw(r)),await s.done}catch(n){if(n instanceof cr)gi.warn(n.message);else{const s=ys.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});gi.warn(s.message)}}}function aw(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC=1024,PC=30;class LC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new jC(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=UE();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(c=>c.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>PC){const c=zC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){gi.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=UE(),{heartbeatsToSend:s,unsentEntries:o}=UC(this._heartbeatsCache.heartbeats),u=Oh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return gi.warn(n),""}}}function UE(){return new Date().toISOString().substring(0,10)}function UC(r,e=VC){const n=[];let s=r.slice();for(const o of r){const u=n.find(c=>c.agent===o.agent);if(u){if(u.dates.push(o.date),jE(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),jE(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class jC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ZT()?ew().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await MC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return LE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return LE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function jE(r){return Oh(JSON.stringify({version:2,heartbeats:r})).length}function zC(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(r){xr(new or("platform-logger",e=>new ZI(e),"PRIVATE")),xr(new or("heartbeat",e=>new LC(e),"PRIVATE")),Kn(fp,VE,r),Kn(fp,VE,"esm2017"),Kn("fire-js","")}BC("");function Qp(r,e){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(n[s[o]]=r[s[o]]);return n}function ow(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const qC=ow,lw=new Ia("auth","Firebase",ow());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh=new lf("@firebase/auth");function FC(r,...e){Mh.logLevel<=Pe.WARN&&Mh.warn(`Auth (${jo}): ${r}`,...e)}function Eh(r,...e){Mh.logLevel<=Pe.ERROR&&Mh.error(`Auth (${jo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(r,...e){throw Xp(r,...e)}function ar(r,...e){return Xp(r,...e)}function Yp(r,e,n){const s=Object.assign(Object.assign({},qC()),{[e]:n});return new Ia("auth","Firebase",s).create(e,{appName:r.name})}function di(r){return Yp(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function HC(r,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Xn(r,"argument-error"),Yp(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xp(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return lw.create(r,...e)}function Ee(r,e,...n){if(!r)throw Xp(e,...n)}function ci(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Eh(e),new Error(e)}function yi(r,e){r||ci(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function GC(){return zE()==="http:"||zE()==="https:"}function zE(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(GC()||JT()||"connection"in navigator)?navigator.onLine:!0}function KC(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,n){this.shortDelay=e,this.longDelay=n,yi(n>e,"Short delay should be less than long delay!"),this.isMobile=yI()||EI()}get(){return $C()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(r,e){yi(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ci("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ci("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ci("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],XC=new bu(3e4,6e4);function Ds(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Os(r,e,n,s,o={}){return cw(r,o,async()=>{let u={},c={};s&&(e==="GET"?c=s:u={body:JSON.stringify(s)});const m=Su(Object.assign({key:r.config.apiKey},c)).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const g=Object.assign({method:e,headers:p},u);return _I()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&Uo(r.emulatorConfig.host)&&(g.credentials="include"),uw.fetch()(await hw(r,r.config.apiHost,n,m),g)})}async function cw(r,e,n){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},QC),e);try{const o=new JC(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const c=await u.json();if("needConfirmation"in c)throw fh(r,"account-exists-with-different-credential",c);if(u.ok&&!("errorMessage"in c))return c;{const m=u.ok?c.errorMessage:c.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw fh(r,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw fh(r,"email-already-in-use",c);if(p==="USER_DISABLED")throw fh(r,"user-disabled",c);const _=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Yp(r,_,g);Xn(r,_)}}catch(o){if(o instanceof cr)throw o;Xn(r,"network-request-failed",{message:String(o)})}}async function Au(r,e,n,s,o={}){const u=await Os(r,e,n,s,o);return"mfaPendingCredential"in u&&Xn(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function hw(r,e,n,s){const o=`${e}${n}?${s}`,u=r,c=u.config.emulator?Wp(r.config,o):`${r.config.apiScheme}://${o}`;return YC.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(c).toString():c}function WC(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class JC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(ar(this.auth,"network-request-failed")),XC.get())})}}function fh(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=ar(r,e,s);return o.customData._tokenResponse=n,o}function BE(r){return r!==void 0&&r.enterprise!==void 0}class ZC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return WC(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function e2(r,e){return Os(r,"GET","/v2/recaptchaConfig",Ds(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t2(r,e){return Os(r,"POST","/v1/accounts:delete",e)}async function Vh(r,e){return Os(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function n2(r,e=!1){const n=Et(r),s=await n.getIdToken(e),o=Jp(s);Ee(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,c=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:nu(Wm(o.auth_time)),issuedAtTime:nu(Wm(o.iat)),expirationTime:nu(Wm(o.exp)),signInProvider:c||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Wm(r){return Number(r)*1e3}function Jp(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return Eh("JWT malformed, contained fewer than 3 sections"),null;try{const o=$T(n);return o?JSON.parse(o):(Eh("Failed to decode base64 JWT payload"),null)}catch(o){return Eh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function qE(r){const e=Jp(r);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cu(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof cr&&r2(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function r2({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=nu(this.lastLoginAt),this.creationTime=nu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ph(r){var e;const n=r.auth,s=await r.getIdToken(),o=await cu(r,Vh(n,{idToken:s}));Ee(o==null?void 0:o.users.length,n,"internal-error");const u=o.users[0];r._notifyReloadListener(u);const c=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?fw(u.providerUserInfo):[],m=a2(r.providerData,c),p=r.isAnonymous,g=!(r.email&&u.passwordHash)&&!(m!=null&&m.length),_=p?g:!1,w={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new gp(u.createdAt,u.lastLoginAt),isAnonymous:_};Object.assign(r,w)}async function s2(r){const e=Et(r);await Ph(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function a2(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function fw(r){return r.map(e=>{var{providerId:n}=e,s=Qp(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o2(r,e){const n=await cw(r,{},async()=>{const s=Su({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,c=await hw(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:s};return r.emulatorConfig&&Uo(r.emulatorConfig.host)&&(p.credentials="include"),uw.fetch()(c,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function l2(r,e){return Os(r,"POST","/v2/accounts:revokeToken",Ds(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const n=qE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await o2(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,c=new Co;return s&&(Ee(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),o&&(Ee(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),u&&(Ee(typeof u=="number","internal-error",{appName:e}),c.expirationTime=u),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Co,this.toJSON())}_performRefresh(){return ci("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cs(r,e){Ee(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class sr{constructor(e){var{uid:n,auth:s,stsTokenManager:o}=e,u=Qp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new i2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new gp(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await cu(this,this.stsTokenManager.getToken(this.auth,e));return Ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return n2(this,e)}reload(){return s2(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new sr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Ph(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dn(this.auth.app))return Promise.reject(di(this.auth));const e=await this.getIdToken();return await cu(this,t2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,o,u,c,m,p,g,_;const w=(s=n.displayName)!==null&&s!==void 0?s:void 0,I=(o=n.email)!==null&&o!==void 0?o:void 0,M=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,U=(c=n.photoURL)!==null&&c!==void 0?c:void 0,$=(m=n.tenantId)!==null&&m!==void 0?m:void 0,B=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,X=(g=n.createdAt)!==null&&g!==void 0?g:void 0,re=(_=n.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:Z,emailVerified:le,isAnonymous:me,providerData:ae,stsTokenManager:D}=n;Ee(Z&&D,e,"internal-error");const b=Co.fromJSON(this.name,D);Ee(typeof Z=="string",e,"internal-error"),cs(w,e.name),cs(I,e.name),Ee(typeof le=="boolean",e,"internal-error"),Ee(typeof me=="boolean",e,"internal-error"),cs(M,e.name),cs(U,e.name),cs($,e.name),cs(B,e.name),cs(X,e.name),cs(re,e.name);const A=new sr({uid:Z,auth:e,email:I,emailVerified:le,displayName:w,isAnonymous:me,photoURL:U,phoneNumber:M,tenantId:$,stsTokenManager:b,createdAt:X,lastLoginAt:re});return ae&&Array.isArray(ae)&&(A.providerData=ae.map(C=>Object.assign({},C))),B&&(A._redirectEventId=B),A}static async _fromIdTokenResponse(e,n,s=!1){const o=new Co;o.updateFromServerResponse(n);const u=new sr({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Ph(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Ee(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?fw(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new Co;m.updateFromIdToken(s);const p=new sr({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:c}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new gp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE=new Map;function hi(r){yi(r instanceof Function,"Expected a class definition");let e=FE.get(r);return e?(yi(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,FE.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}dw.type="NONE";const HE=dw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Th(r,e,n){return`firebase:${r}:${e}:${n}`}class No{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Th(this.userKey,o.apiKey,u),this.fullPersistenceKey=Th("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Vh(this.auth,{idToken:e}).catch(()=>{});return n?sr._fromGetAccountInfoResponse(this.auth,n,e):null}return sr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new No(hi(HE),e,s);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||hi(HE);const c=Th(s,e.config.apiKey,e.name);let m=null;for(const g of n)try{const _=await g._get(c);if(_){let w;if(typeof _=="string"){const I=await Vh(e,{idToken:_}).catch(()=>{});if(!I)break;w=await sr._fromGetAccountInfoResponse(e,I,_)}else w=sr._fromJSON(e,_);g!==u&&(m=w),u=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new No(u,e,s):(u=p[0],m&&await u._set(c,m.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(c)}catch{}})),new No(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_w(e))return"Blackberry";if(Ew(e))return"Webos";if(pw(e))return"Safari";if((e.includes("chrome/")||gw(e))&&!e.includes("edge/"))return"Chrome";if(vw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function mw(r=rn()){return/firefox\//i.test(r)}function pw(r=rn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gw(r=rn()){return/crios\//i.test(r)}function yw(r=rn()){return/iemobile/i.test(r)}function vw(r=rn()){return/android/i.test(r)}function _w(r=rn()){return/blackberry/i.test(r)}function Ew(r=rn()){return/webos/i.test(r)}function Zp(r=rn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function u2(r=rn()){var e;return Zp(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function c2(){return TI()&&document.documentMode===10}function Tw(r=rn()){return Zp(r)||vw(r)||Ew(r)||_w(r)||/windows phone/i.test(r)||yw(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ww(r,e=[]){let n;switch(r){case"Browser":n=GE(rn());break;case"Worker":n=`${GE(rn())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${jo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((c,m)=>{try{const p=e(u);c(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f2(r,e={}){return Os(r,"GET","/v2/passwordPolicy",Ds(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2=6;class m2{constructor(e){var n,s,o,u;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:d2,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,o,u,c,m;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(u=p.containsUppercaseLetter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(m=p.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),p}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $E(this),this.idTokenSubscription=new $E(this),this.beforeStateQueue=new h2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=hi(n)),this._initializationPromise=this.queue(async()=>{var s,o,u;if(!this._deleted&&(this.persistenceManager=await No.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Vh(this,{idToken:e}),s=await sr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Dn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,m=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===m)&&(p!=null&&p.user)&&(o=p.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ph(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=KC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Dn(this.app))return Promise.reject(di(this));const n=e?Et(e):null;return n&&Ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Dn(this.app)?Promise.reject(di(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Dn(this.app)?Promise.reject(di(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await f2(this),n=new m2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ia("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await l2(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&hi(e)||this._popupRedirectResolver;Ee(n,this,"argument-error"),this.redirectPersistenceManager=await No.create(this,[hi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let c=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(m,this,"internal-error"),m.then(()=>{c||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{c=!0,p()}}else{const p=e.addObserver(n);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ww(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(Dn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&FC(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ks(r){return Et(r)}class $E{constructor(e){this.auth=e,this.observer=null,this.addObserver=CI(n=>this.observer=n)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function g2(r){uf=r}function Sw(r){return uf.loadJS(r)}function y2(){return uf.recaptchaEnterpriseScript}function v2(){return uf.gapiScript}function _2(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class E2{constructor(){this.enterprise=new T2}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class T2{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const w2="recaptcha-enterprise",bw="NO_RECAPTCHA";class S2{constructor(e){this.type=w2,this.auth=ks(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(c,m)=>{e2(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new ZC(p);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,c(g.siteKey)}}).catch(p=>{m(p)})})}function o(u,c,m){const p=window.grecaptcha;BE(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(g=>{c(g)}).catch(()=>{c(bw)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new E2().execute("siteKey",{action:"verify"}):new Promise((u,c)=>{s(this.auth).then(m=>{if(!n&&BE(window.grecaptcha))o(m,u,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=y2();p.length!==0&&(p+=m),Sw(p).then(()=>{o(m,u,c)}).catch(g=>{c(g)})}}).catch(m=>{c(m)})})}}async function KE(r,e,n,s=!1,o=!1){const u=new S2(r);let c;if(o)c=bw;else try{c=await u.verify(n)}catch{c=await u.verify(n,!0)}const m=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,g=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:c}):Object.assign(m,{captchaResponse:c}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function yp(r,e,n,s,o){var u;if(!((u=r._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await KE(r,e,n,n==="getOobCode");return s(r,c)}else return s(r,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await KE(r,e,n,n==="getOobCode");return s(r,m)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(r,e){const n=Ca(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(ws(u,e??{}))return o;Xn(o,"already-initialized")}return n.initialize({options:e})}function A2(r,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(hi);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function R2(r,e,n){const s=ks(r);Ee(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=Aw(e),{host:c,port:m}=I2(e),p=m===null?"":`:${m}`,g={url:`${u}//${c}${p}/`},_=Object.freeze({host:c,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ee(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ee(ws(g,s.config.emulator)&&ws(_,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=_,s.settings.appVerificationDisabledForTesting=!0,Uo(c)?(XT(`${u}//${c}${p}`),WT("Auth",!0)):C2()}function Aw(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function I2(r){const e=Aw(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:QE(s.substr(u.length+1))}}else{const[u,c]=s.split(":");return{host:u,port:QE(c)}}}function QE(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function C2(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ci("not implemented")}_getIdTokenResponse(e){return ci("not implemented")}_linkToIdToken(e,n){return ci("not implemented")}_getReauthenticationResolver(e){return ci("not implemented")}}async function N2(r,e){return Os(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x2(r,e){return Au(r,"POST","/v1/accounts:signInWithPassword",Ds(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D2(r,e){return Au(r,"POST","/v1/accounts:signInWithEmailLink",Ds(r,e))}async function O2(r,e){return Au(r,"POST","/v1/accounts:signInWithEmailLink",Ds(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu extends eg{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new hu(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new hu(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yp(e,n,"signInWithPassword",x2);case"emailLink":return D2(e,{email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yp(e,s,"signUpPassword",N2);case"emailLink":return O2(e,{idToken:n,email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xo(r,e){return Au(r,"POST","/v1/accounts:signInWithIdp",Ds(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2="http://localhost";class Ea extends eg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ea(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Xn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=n,u=Qp(n,["providerId","signInMethod"]);if(!s||!o)return null;const c=new Ea(s,o);return c.idToken=u.idToken||void 0,c.accessToken=u.accessToken||void 0,c.secret=u.secret,c.nonce=u.nonce,c.pendingToken=u.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return xo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,xo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,xo(e,n)}buildRequest(){const e={requestUri:k2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Su(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function V2(r){const e=Yl(Xl(r)).link,n=e?Yl(Xl(e)).deep_link_id:null,s=Yl(Xl(r)).deep_link_id;return(s?Yl(Xl(s)).link:null)||s||n||e||r}class tg{constructor(e){var n,s,o,u,c,m;const p=Yl(Xl(e)),g=(n=p.apiKey)!==null&&n!==void 0?n:null,_=(s=p.oobCode)!==null&&s!==void 0?s:null,w=M2((o=p.mode)!==null&&o!==void 0?o:null);Ee(g&&_&&w,"argument-error"),this.apiKey=g,this.operation=w,this.code=_,this.continueUrl=(u=p.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(c=p.lang)!==null&&c!==void 0?c:null,this.tenantId=(m=p.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const n=V2(e);try{return new tg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.providerId=zo.PROVIDER_ID}static credential(e,n){return hu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=tg.parseLink(n);return Ee(s,"argument-error"),hu._fromEmailAndCode(e,s.code,s.tenantId)}}zo.PROVIDER_ID="password";zo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru extends ng{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends Ru{constructor(){super("facebook.com")}static credential(e){return Ea._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fs.credential(e.oauthAccessToken)}catch{return null}}}fs.FACEBOOK_SIGN_IN_METHOD="facebook.com";fs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends Ru{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ea._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return ui.credential(n,s)}catch{return null}}}ui.GOOGLE_SIGN_IN_METHOD="google.com";ui.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends Ru{constructor(){super("github.com")}static credential(e){return Ea._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ds.credential(e.oauthAccessToken)}catch{return null}}}ds.GITHUB_SIGN_IN_METHOD="github.com";ds.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends Ru{constructor(){super("twitter.com")}static credential(e,n){return Ea._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return ms.credential(n,s)}catch{return null}}}ms.TWITTER_SIGN_IN_METHOD="twitter.com";ms.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P2(r,e){return Au(r,"POST","/v1/accounts:signUp",Ds(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await sr._fromIdTokenResponse(e,s,o),c=YE(s);return new Ta({user:u,providerId:c,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=YE(s);return new Ta({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function YE(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh extends cr{constructor(e,n,s,o){var u;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Lh.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Lh(e,n,s,o)}}function Rw(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Lh._fromErrorAndOperation(r,u,e,s):u})}async function L2(r,e,n=!1){const s=await cu(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return Ta._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U2(r,e,n=!1){const{auth:s}=r;if(Dn(s.app))return Promise.reject(di(s));const o="reauthenticate";try{const u=await cu(r,Rw(s,o,e,r),n);Ee(u.idToken,s,"internal-error");const c=Jp(u.idToken);Ee(c,s,"internal-error");const{sub:m}=c;return Ee(r.uid===m,s,"user-mismatch"),Ta._forOperation(r,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Xn(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iw(r,e,n=!1){if(Dn(r.app))return Promise.reject(di(r));const s="signIn",o=await Rw(r,s,e),u=await Ta._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}async function j2(r,e){return Iw(ks(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cw(r){const e=ks(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function z2(r,e,n){if(Dn(r.app))return Promise.reject(di(r));const s=ks(r),c=await yp(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",P2).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&Cw(r),p}),m=await Ta._fromIdTokenResponse(s,"signIn",c);return await s._updateCurrentUser(m.user),m}function B2(r,e,n){return Dn(r.app)?Promise.reject(di(r)):j2(Et(r),zo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Cw(r),s})}function q2(r,e,n,s){return Et(r).onIdTokenChanged(e,n,s)}function F2(r,e,n){return Et(r).beforeAuthStateChanged(e,n)}function H2(r,e,n,s){return Et(r).onAuthStateChanged(e,n,s)}function G2(r){return Et(r).signOut()}const Uh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Uh,"1"),this.storage.removeItem(Uh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2=1e3,K2=10;class xw extends Nw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Tw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,m,p)=>{this.notifyListeners(c,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(s);!n&&this.localCache[s]===c||this.notifyListeners(s,c)},u=this.storage.getItem(s);c2()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,K2):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},$2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}xw.type="LOCAL";const Q2=xw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw extends Nw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Dw.type="SESSION";const Ow=Dw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new cf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(c).map(async g=>g(n.origin,u)),p=await Y2(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,c;return new Promise((m,p)=>{const g=rg("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},s);c={messageChannel:o,onMessage(w){const I=w;if(I.data.eventId===g)switch(I.data.status){case"ack":clearTimeout(_),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(I.data.response);break;default:clearTimeout(_),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(){return window}function W2(r){Ar().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(){return typeof Ar().WorkerGlobalScope<"u"&&typeof Ar().importScripts=="function"}async function J2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Z2(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function eN(){return kw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw="firebaseLocalStorageDb",tN=1,jh="firebaseLocalStorage",Vw="fbase_key";class Iu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function hf(r,e){return r.transaction([jh],e?"readwrite":"readonly").objectStore(jh)}function nN(){const r=indexedDB.deleteDatabase(Mw);return new Iu(r).toPromise()}function vp(){const r=indexedDB.open(Mw,tN);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(jh,{keyPath:Vw})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(jh)?e(s):(s.close(),await nN(),e(await vp()))})})}async function XE(r,e,n){const s=hf(r,!0).put({[Vw]:e,value:n});return new Iu(s).toPromise()}async function rN(r,e){const n=hf(r,!1).get(e),s=await new Iu(n).toPromise();return s===void 0?null:s.value}function WE(r,e){const n=hf(r,!0).delete(e);return new Iu(n).toPromise()}const iN=800,sN=3;class Pw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>sN)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cf._getInstance(eN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await J2(),!this.activeServiceWorker)return;this.sender=new X2(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Z2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vp();return await XE(e,Uh,"1"),await WE(e,Uh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>XE(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>rN(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>WE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=hf(o,!1).getAll();return new Iu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Pw.type="LOCAL";const aN=Pw;new bu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lw(r,e){return e?hi(e):(Ee(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig extends eg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return xo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return xo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function oN(r){return Iw(r.auth,new ig(r),r.bypassAuthState)}function lN(r){const{auth:e,user:n}=r;return Ee(n,e,"internal-error"),U2(n,new ig(r),r.bypassAuthState)}async function uN(r){const{auth:e,user:n}=r;return Ee(n,e,"internal-error"),L2(n,new ig(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:c,type:m}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oN;case"linkViaPopup":case"linkViaRedirect":return uN;case"reauthViaPopup":case"reauthViaRedirect":return lN;default:Xn(this.auth,"internal-error")}}resolve(e){yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN=new bu(2e3,1e4);async function hN(r,e,n){if(Dn(r.app))return Promise.reject(ar(r,"operation-not-supported-in-this-environment"));const s=ks(r);HC(r,e,ng);const o=Lw(s,n);return new da(s,"signInViaPopup",e,o).executeNotNull()}class da extends Uw{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,da.currentPopupAction&&da.currentPopupAction.cancel(),da.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){yi(this.filter.length===1,"Popup operations only handle one event");const e=rg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ar(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ar(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,da.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ar(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,cN.get())};e()}}da.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN="pendingRedirect",wh=new Map;class dN extends Uw{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=wh.get(this.auth._key());if(!e){try{const s=await mN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}wh.set(this.auth._key(),e)}return this.bypassAuthState||wh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mN(r,e){const n=yN(e),s=gN(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function pN(r,e){wh.set(r._key(),e)}function gN(r){return hi(r._redirectPersistence)}function yN(r){return Th(fN,r.config.apiKey,r.name)}async function vN(r,e,n=!1){if(Dn(r.app))return Promise.reject(di(r));const s=ks(r),o=Lw(s,e),c=await new dN(s,o,n).execute();return c&&!n&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=10*60*1e3;class EN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!TN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!jw(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(ar(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_N&&this.cachedEventUids.clear(),this.cachedEventUids.has(JE(e))}saveEventToCache(e){this.cachedEventUids.add(JE(e)),this.lastProcessedEventTime=Date.now()}}function JE(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function jw({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function TN(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jw(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wN(r,e={}){return Os(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bN=/^https?/;async function AN(r){if(r.config.emulator)return;const{authorizedDomains:e}=await wN(r);for(const n of e)try{if(RN(n))return}catch{}Xn(r,"unauthorized-domain")}function RN(r){const e=pp(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===s}if(!bN.test(n))return!1;if(SN.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN=new bu(3e4,6e4);function ZE(){const r=Ar().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function CN(r){return new Promise((e,n)=>{var s,o,u;function c(){ZE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ZE(),n(ar(r,"network-request-failed"))},timeout:IN.get()})}if(!((o=(s=Ar().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=Ar().gapi)===null||u===void 0)&&u.load)c();else{const m=_2("iframefcb");return Ar()[m]=()=>{gapi.load?c():n(ar(r,"network-request-failed"))},Sw(`${v2()}?onload=${m}`).catch(p=>n(p))}}).catch(e=>{throw Sh=null,e})}let Sh=null;function NN(r){return Sh=Sh||CN(r),Sh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN=new bu(5e3,15e3),DN="__/auth/iframe",ON="emulator/auth/iframe",kN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},MN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VN(r){const e=r.config;Ee(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?Wp(e,ON):`https://${r.config.authDomain}/${DN}`,s={apiKey:e.apiKey,appName:r.name,v:jo},o=MN.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Su(s).slice(1)}`}async function PN(r){const e=await NN(r),n=Ar().gapi;return Ee(n,r,"internal-error"),e.open({where:document.body,url:VN(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kN,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const c=ar(r,"network-request-failed"),m=Ar().setTimeout(()=>{u(c)},xN.get());function p(){Ar().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},UN=500,jN=600,zN="_blank",BN="http://localhost";class e0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qN(r,e,n,s=UN,o=jN){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p=Object.assign(Object.assign({},LN),{width:s.toString(),height:o.toString(),top:u,left:c}),g=rn().toLowerCase();n&&(m=gw(g)?zN:n),mw(g)&&(e=e||BN,p.scrollbars="yes");const _=Object.entries(p).reduce((I,[M,U])=>`${I}${M}=${U},`,"");if(u2(g)&&m!=="_self")return FN(e||"",m),new e0(null);const w=window.open(e||"",m,_);Ee(w,r,"popup-blocked");try{w.focus()}catch{}return new e0(w)}function FN(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN="__/auth/handler",GN="emulator/auth/handler",$N=encodeURIComponent("fac");async function t0(r,e,n,s,o,u){Ee(r.config.authDomain,r,"auth-domain-config-required"),Ee(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:jo,eventId:o};if(e instanceof ng){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",II(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,w]of Object.entries({}))c[_]=w}if(e instanceof Ru){const _=e.getScopes().filter(w=>w!=="");_.length>0&&(c.scopes=_.join(","))}r.tenantId&&(c.tid=r.tenantId);const m=c;for(const _ of Object.keys(m))m[_]===void 0&&delete m[_];const p=await r._getAppCheckToken(),g=p?`#${$N}=${encodeURIComponent(p)}`:"";return`${KN(r)}?${Su(m).slice(1)}${g}`}function KN({config:r}){return r.emulator?Wp(r,GN):`https://${r.authDomain}/${HN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="webStorageSupport";class QN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ow,this._completeRedirectFn=vN,this._overrideRedirectResult=pN}async _openPopup(e,n,s,o){var u;yi((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const c=await t0(e,n,s,pp(),o);return qN(e,c,rg())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await t0(e,n,s,pp(),o);return W2(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(yi(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await PN(e),s=new EN(e);return n.register("authEvent",o=>(Ee(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Jm,{type:Jm},o=>{var u;const c=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[Jm];c!==void 0&&n(!!c),Xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=AN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Tw()||pw()||Zp()}}const YN=QN;var n0="@firebase/auth",r0="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WN(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function JN(r){xr(new or("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:c,authDomain:m}=s.options;Ee(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:c,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ww(r)},g=new p2(s,o,u,p);return A2(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),xr(new or("auth-internal",e=>{const n=ks(e.getProvider("auth").getImmediate());return(s=>new XN(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Kn(n0,r0,WN(r)),Kn(n0,r0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=5*60,ex=YT("authIdTokenMaxAge")||ZN;let i0=null;const tx=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>ex)return;const o=n==null?void 0:n.token;i0!==o&&(i0=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function nx(r=Kp()){const e=Ca(r,"auth");if(e.isInitialized())return e.getImmediate();const n=b2(r,{popupRedirectResolver:YN,persistence:[aN,Q2,Ow]}),s=YT("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const c=tx(u.toString());F2(n,c,()=>c(n.currentUser)),q2(n,m=>c(m))}}const o=KT("auth");return o&&R2(n,`http://${o}`),n}function rx(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}g2({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const u=ar("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",rx().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});JN("Browser");var ix="firebase",sx="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kn(ix,sx,"app");const zw="@firebase/installations",sg="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw=1e4,qw=`w:${sg}`,Fw="FIS_v2",ax="https://firebaseinstallations.googleapis.com/v1",ox=60*60*1e3,lx="installations",ux="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},wa=new Ia(lx,ux,cx);function Hw(r){return r instanceof cr&&r.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw({projectId:r}){return`${ax}/projects/${r}/installations`}function $w(r){return{token:r.token,requestStatus:2,expiresIn:fx(r.expiresIn),creationTime:Date.now()}}async function Kw(r,e){const s=(await e.json()).error;return wa.create("request-failed",{requestName:r,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function Qw({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function hx(r,{refreshToken:e}){const n=Qw(r);return n.append("Authorization",dx(e)),n}async function Yw(r){const e=await r();return e.status>=500&&e.status<600?r():e}function fx(r){return Number(r.replace("s","000"))}function dx(r){return`${Fw} ${r}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mx({appConfig:r,heartbeatServiceProvider:e},{fid:n}){const s=Gw(r),o=Qw(r),u=e.getImmediate({optional:!0});if(u){const g=await u.getHeartbeatsHeader();g&&o.append("x-firebase-client",g)}const c={fid:n,authVersion:Fw,appId:r.appId,sdkVersion:qw},m={method:"POST",headers:o,body:JSON.stringify(c)},p=await Yw(()=>fetch(s,m));if(p.ok){const g=await p.json();return{fid:g.fid||n,registrationStatus:2,refreshToken:g.refreshToken,authToken:$w(g.authToken)}}else throw await Kw("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(r){return new Promise(e=>{setTimeout(e,r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx=/^[cdef][\w-]{21}$/,_p="";function yx(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const n=vx(r);return gx.test(n)?n:_p}catch{return _p}}function vx(r){return px(r).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(r){return`${r.appName}!${r.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww=new Map;function Jw(r,e){const n=ff(r);Zw(n,e),_x(n,e)}function Zw(r,e){const n=Ww.get(r);if(n)for(const s of n)s(e)}function _x(r,e){const n=Ex();n&&n.postMessage({key:r,fid:e}),Tx()}let ma=null;function Ex(){return!ma&&"BroadcastChannel"in self&&(ma=new BroadcastChannel("[Firebase] FID Change"),ma.onmessage=r=>{Zw(r.data.key,r.data.fid)}),ma}function Tx(){Ww.size===0&&ma&&(ma.close(),ma=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx="firebase-installations-database",Sx=1,Sa="firebase-installations-store";let Zm=null;function ag(){return Zm||(Zm=rw(wx,Sx,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(Sa)}}})),Zm}async function zh(r,e){const n=ff(r),o=(await ag()).transaction(Sa,"readwrite"),u=o.objectStore(Sa),c=await u.get(n);return await u.put(e,n),await o.done,(!c||c.fid!==e.fid)&&Jw(r,e.fid),e}async function eS(r){const e=ff(r),s=(await ag()).transaction(Sa,"readwrite");await s.objectStore(Sa).delete(e),await s.done}async function df(r,e){const n=ff(r),o=(await ag()).transaction(Sa,"readwrite"),u=o.objectStore(Sa),c=await u.get(n),m=e(c);return m===void 0?await u.delete(n):await u.put(m,n),await o.done,m&&(!c||c.fid!==m.fid)&&Jw(r,m.fid),m}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function og(r){let e;const n=await df(r.appConfig,s=>{const o=bx(s),u=Ax(r,o);return e=u.registrationPromise,u.installationEntry});return n.fid===_p?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function bx(r){const e=r||{fid:yx(),registrationStatus:0};return tS(e)}function Ax(r,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(wa.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=Rx(r,n);return{installationEntry:n,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Ix(r)}:{installationEntry:e}}async function Rx(r,e){try{const n=await mx(r,e);return zh(r.appConfig,n)}catch(n){throw Hw(n)&&n.customData.serverCode===409?await eS(r.appConfig):await zh(r.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function Ix(r){let e=await s0(r.appConfig);for(;e.registrationStatus===1;)await Xw(100),e=await s0(r.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await og(r);return s||n}return e}function s0(r){return df(r,e=>{if(!e)throw wa.create("installation-not-found");return tS(e)})}function tS(r){return Cx(r)?{fid:r.fid,registrationStatus:0}:r}function Cx(r){return r.registrationStatus===1&&r.registrationTime+Bw<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nx({appConfig:r,heartbeatServiceProvider:e},n){const s=xx(r,n),o=hx(r,n),u=e.getImmediate({optional:!0});if(u){const g=await u.getHeartbeatsHeader();g&&o.append("x-firebase-client",g)}const c={installation:{sdkVersion:qw,appId:r.appId}},m={method:"POST",headers:o,body:JSON.stringify(c)},p=await Yw(()=>fetch(s,m));if(p.ok){const g=await p.json();return $w(g)}else throw await Kw("Generate Auth Token",p)}function xx(r,{fid:e}){return`${Gw(r)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lg(r,e=!1){let n;const s=await df(r.appConfig,u=>{if(!nS(u))throw wa.create("not-registered");const c=u.authToken;if(!e&&kx(c))return u;if(c.requestStatus===1)return n=Dx(r,e),u;{if(!navigator.onLine)throw wa.create("app-offline");const m=Vx(u);return n=Ox(r,m),m}});return n?await n:s.authToken}async function Dx(r,e){let n=await a0(r.appConfig);for(;n.authToken.requestStatus===1;)await Xw(100),n=await a0(r.appConfig);const s=n.authToken;return s.requestStatus===0?lg(r,e):s}function a0(r){return df(r,e=>{if(!nS(e))throw wa.create("not-registered");const n=e.authToken;return Px(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function Ox(r,e){try{const n=await Nx(r,e),s=Object.assign(Object.assign({},e),{authToken:n});return await zh(r.appConfig,s),n}catch(n){if(Hw(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await eS(r.appConfig);else{const s=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await zh(r.appConfig,s)}throw n}}function nS(r){return r!==void 0&&r.registrationStatus===2}function kx(r){return r.requestStatus===2&&!Mx(r)}function Mx(r){const e=Date.now();return e<r.creationTime||r.creationTime+r.expiresIn<e+ox}function Vx(r){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},r),{authToken:e})}function Px(r){return r.requestStatus===1&&r.requestTime+Bw<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lx(r){const e=r,{installationEntry:n,registrationPromise:s}=await og(e);return s?s.catch(console.error):lg(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ux(r,e=!1){const n=r;return await jx(n),(await lg(n,e)).token}async function jx(r){const{registrationPromise:e}=await og(r);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(r){if(!r||!r.options)throw ep("App Configuration");if(!r.name)throw ep("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!r.options[n])throw ep(n);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function ep(r){return wa.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS="installations",Bx="installations-internal",qx=r=>{const e=r.getProvider("app").getImmediate(),n=zx(e),s=Ca(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},Fx=r=>{const e=r.getProvider("app").getImmediate(),n=Ca(e,rS).getImmediate();return{getId:()=>Lx(n),getToken:o=>Ux(n,o)}};function Hx(){xr(new or(rS,qx,"PUBLIC")),xr(new or(Bx,Fx,"PRIVATE"))}Hx();Kn(zw,sg);Kn(zw,sg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh="analytics",Gx="firebase_id",$x="origin",Kx=60*1e3,Qx="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ug="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En=new lf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},kn=new Ia("analytics","Analytics",Yx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(r){if(!r.startsWith(ug)){const e=kn.create("invalid-gtag-resource",{gtagURL:r});return En.warn(e.message),""}return r}function iS(r){return Promise.all(r.map(e=>e.catch(n=>n)))}function Wx(r,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(r,e)),n}function Jx(r,e){const n=Wx("firebase-js-sdk-policy",{createScriptURL:Xx}),s=document.createElement("script"),o=`${ug}?l=${r}&id=${e}`;s.src=n?n==null?void 0:n.createScriptURL(o):o,s.async=!0,document.head.appendChild(s)}function Zx(r){let e=[];return Array.isArray(window[r])?e=window[r]:window[r]=e,e}async function eD(r,e,n,s,o,u){const c=s[o];try{if(c)await e[c];else{const p=(await iS(n)).find(g=>g.measurementId===o);p&&await e[p.appId]}}catch(m){En.error(m)}r("config",o,u)}async function tD(r,e,n,s,o){try{let u=[];if(o&&o.send_to){let c=o.send_to;Array.isArray(c)||(c=[c]);const m=await iS(n);for(const p of c){const g=m.find(w=>w.measurementId===p),_=g&&e[g.appId];if(_)u.push(_);else{u=[];break}}}u.length===0&&(u=Object.values(e)),await Promise.all(u),r("event",s,o||{})}catch(u){En.error(u)}}function nD(r,e,n,s){async function o(u,...c){try{if(u==="event"){const[m,p]=c;await tD(r,e,n,m,p)}else if(u==="config"){const[m,p]=c;await eD(r,e,n,s,m,p)}else if(u==="consent"){const[m,p]=c;r("consent",m,p)}else if(u==="get"){const[m,p,g]=c;r("get",m,p,g)}else if(u==="set"){const[m]=c;r("set",m)}else r(u,...c)}catch(m){En.error(m)}}return o}function rD(r,e,n,s,o){let u=function(...c){window[s].push(arguments)};return window[o]&&typeof window[o]=="function"&&(u=window[o]),window[o]=nD(u,r,e,n),{gtagCore:u,wrappedGtag:window[o]}}function iD(r){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(ug)&&n.src.includes(r))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD=30,aD=1e3;class oD{constructor(e={},n=aD){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const sS=new oD;function lD(r){return new Headers({Accept:"application/json","x-goog-api-key":r})}async function uD(r){var e;const{appId:n,apiKey:s}=r,o={method:"GET",headers:lD(s)},u=Qx.replace("{app-id}",n),c=await fetch(u,o);if(c.status!==200&&c.status!==304){let m="";try{const p=await c.json();!((e=p.error)===null||e===void 0)&&e.message&&(m=p.error.message)}catch{}throw kn.create("config-fetch-failed",{httpStatus:c.status,responseMessage:m})}return c.json()}async function cD(r,e=sS,n){const{appId:s,apiKey:o,measurementId:u}=r.options;if(!s)throw kn.create("no-app-id");if(!o){if(u)return{measurementId:u,appId:s};throw kn.create("no-api-key")}const c=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},m=new dD;return setTimeout(async()=>{m.abort()},Kx),aS({appId:s,apiKey:o,measurementId:u},c,m,e)}async function aS(r,{throttleEndTimeMillis:e,backoffCount:n},s,o=sS){var u;const{appId:c,measurementId:m}=r;try{await hD(s,e)}catch(p){if(m)return En.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${m} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:c,measurementId:m};throw p}try{const p=await uD(r);return o.deleteThrottleMetadata(c),p}catch(p){const g=p;if(!fD(g)){if(o.deleteThrottleMetadata(c),m)return En.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${m} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:c,measurementId:m};throw p}const _=Number((u=g==null?void 0:g.customData)===null||u===void 0?void 0:u.httpStatus)===503?DE(n,o.intervalMillis,sD):DE(n,o.intervalMillis),w={throttleEndTimeMillis:Date.now()+_,backoffCount:n+1};return o.setThrottleMetadata(c,w),En.debug(`Calling attemptFetch again in ${_} millis`),aS(r,w,s,o)}}function hD(r,e){return new Promise((n,s)=>{const o=Math.max(e-Date.now(),0),u=setTimeout(n,o);r.addEventListener(()=>{clearTimeout(u),s(kn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function fD(r){if(!(r instanceof cr)||!r.customData)return!1;const e=Number(r.customData.httpStatus);return e===429||e===500||e===503||e===504}class dD{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function mD(r,e,n,s,o){if(o&&o.global){r("event",n,s);return}else{const u=await e,c=Object.assign(Object.assign({},s),{send_to:u});r("event",n,c)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pD(){if(ZT())try{await ew()}catch(r){return En.warn(kn.create("indexeddb-unavailable",{errorInfo:r==null?void 0:r.toString()}).message),!1}else return En.warn(kn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function gD(r,e,n,s,o,u,c){var m;const p=cD(r);p.then(M=>{n[M.measurementId]=M.appId,r.options.measurementId&&M.measurementId!==r.options.measurementId&&En.warn(`The measurement ID in the local Firebase config (${r.options.measurementId}) does not match the measurement ID fetched from the server (${M.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(M=>En.error(M)),e.push(p);const g=pD().then(M=>{if(M)return s.getId()}),[_,w]=await Promise.all([p,g]);iD(u)||Jx(u,_.measurementId),o("js",new Date);const I=(m=c==null?void 0:c.config)!==null&&m!==void 0?m:{};return I[$x]="firebase",I.update=!0,w!=null&&(I[Gx]=w),o("config",_.measurementId,I),_.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e){this.app=e}_delete(){return delete ru[this.app.options.appId],Promise.resolve()}}let ru={},o0=[];const l0={};let tp="dataLayer",vD="gtag",u0,oS,c0=!1;function _D(){const r=[];if(JT()&&r.push("This is a browser extension environment."),SI()||r.push("Cookies are not available."),r.length>0){const e=r.map((s,o)=>`(${o+1}) ${s}`).join(" "),n=kn.create("invalid-analytics-context",{errorInfo:e});En.warn(n.message)}}function ED(r,e,n){_D();const s=r.options.appId;if(!s)throw kn.create("no-app-id");if(!r.options.apiKey)if(r.options.measurementId)En.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${r.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw kn.create("no-api-key");if(ru[s]!=null)throw kn.create("already-exists",{id:s});if(!c0){Zx(tp);const{wrappedGtag:u,gtagCore:c}=rD(ru,o0,l0,tp,vD);oS=u,u0=c,c0=!0}return ru[s]=gD(r,o0,l0,e,u0,tp,n),new yD(r)}function TD(r=Kp()){r=Et(r);const e=Ca(r,Bh);return e.isInitialized()?e.getImmediate():wD(r)}function wD(r,e={}){const n=Ca(r,Bh);if(n.isInitialized()){const o=n.getImmediate();if(ws(e,n.getOptions()))return o;throw kn.create("already-initialized")}return n.initialize({options:e})}function SD(r,e,n,s){r=Et(r),mD(oS,ru[r.app.options.appId],e,n,s).catch(o=>En.error(o))}const h0="@firebase/analytics",f0="0.10.17";function bD(){xr(new or(Bh,(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return ED(s,o,n)},"PUBLIC")),xr(new or("analytics-internal",r,"PRIVATE")),Kn(h0,f0),Kn(h0,f0,"esm2017");function r(e){try{const n=e.getProvider(Bh).getImmediate();return{logEvent:(s,o,u)=>SD(n,s,o,u)}}catch(n){throw kn.create("interop-component-reg-failed",{reason:n})}}}bD();var d0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vs,lS;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,b){function A(){}A.prototype=b.prototype,D.D=b.prototype,D.prototype=new A,D.prototype.constructor=D,D.C=function(C,x,O){for(var N=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)N[pe-2]=arguments[pe];return b.prototype[x].apply(C,N)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,b,A){A||(A=0);var C=Array(16);if(typeof b=="string")for(var x=0;16>x;++x)C[x]=b.charCodeAt(A++)|b.charCodeAt(A++)<<8|b.charCodeAt(A++)<<16|b.charCodeAt(A++)<<24;else for(x=0;16>x;++x)C[x]=b[A++]|b[A++]<<8|b[A++]<<16|b[A++]<<24;b=D.g[0],A=D.g[1],x=D.g[2];var O=D.g[3],N=b+(O^A&(x^O))+C[0]+3614090360&4294967295;b=A+(N<<7&4294967295|N>>>25),N=O+(x^b&(A^x))+C[1]+3905402710&4294967295,O=b+(N<<12&4294967295|N>>>20),N=x+(A^O&(b^A))+C[2]+606105819&4294967295,x=O+(N<<17&4294967295|N>>>15),N=A+(b^x&(O^b))+C[3]+3250441966&4294967295,A=x+(N<<22&4294967295|N>>>10),N=b+(O^A&(x^O))+C[4]+4118548399&4294967295,b=A+(N<<7&4294967295|N>>>25),N=O+(x^b&(A^x))+C[5]+1200080426&4294967295,O=b+(N<<12&4294967295|N>>>20),N=x+(A^O&(b^A))+C[6]+2821735955&4294967295,x=O+(N<<17&4294967295|N>>>15),N=A+(b^x&(O^b))+C[7]+4249261313&4294967295,A=x+(N<<22&4294967295|N>>>10),N=b+(O^A&(x^O))+C[8]+1770035416&4294967295,b=A+(N<<7&4294967295|N>>>25),N=O+(x^b&(A^x))+C[9]+2336552879&4294967295,O=b+(N<<12&4294967295|N>>>20),N=x+(A^O&(b^A))+C[10]+4294925233&4294967295,x=O+(N<<17&4294967295|N>>>15),N=A+(b^x&(O^b))+C[11]+2304563134&4294967295,A=x+(N<<22&4294967295|N>>>10),N=b+(O^A&(x^O))+C[12]+1804603682&4294967295,b=A+(N<<7&4294967295|N>>>25),N=O+(x^b&(A^x))+C[13]+4254626195&4294967295,O=b+(N<<12&4294967295|N>>>20),N=x+(A^O&(b^A))+C[14]+2792965006&4294967295,x=O+(N<<17&4294967295|N>>>15),N=A+(b^x&(O^b))+C[15]+1236535329&4294967295,A=x+(N<<22&4294967295|N>>>10),N=b+(x^O&(A^x))+C[1]+4129170786&4294967295,b=A+(N<<5&4294967295|N>>>27),N=O+(A^x&(b^A))+C[6]+3225465664&4294967295,O=b+(N<<9&4294967295|N>>>23),N=x+(b^A&(O^b))+C[11]+643717713&4294967295,x=O+(N<<14&4294967295|N>>>18),N=A+(O^b&(x^O))+C[0]+3921069994&4294967295,A=x+(N<<20&4294967295|N>>>12),N=b+(x^O&(A^x))+C[5]+3593408605&4294967295,b=A+(N<<5&4294967295|N>>>27),N=O+(A^x&(b^A))+C[10]+38016083&4294967295,O=b+(N<<9&4294967295|N>>>23),N=x+(b^A&(O^b))+C[15]+3634488961&4294967295,x=O+(N<<14&4294967295|N>>>18),N=A+(O^b&(x^O))+C[4]+3889429448&4294967295,A=x+(N<<20&4294967295|N>>>12),N=b+(x^O&(A^x))+C[9]+568446438&4294967295,b=A+(N<<5&4294967295|N>>>27),N=O+(A^x&(b^A))+C[14]+3275163606&4294967295,O=b+(N<<9&4294967295|N>>>23),N=x+(b^A&(O^b))+C[3]+4107603335&4294967295,x=O+(N<<14&4294967295|N>>>18),N=A+(O^b&(x^O))+C[8]+1163531501&4294967295,A=x+(N<<20&4294967295|N>>>12),N=b+(x^O&(A^x))+C[13]+2850285829&4294967295,b=A+(N<<5&4294967295|N>>>27),N=O+(A^x&(b^A))+C[2]+4243563512&4294967295,O=b+(N<<9&4294967295|N>>>23),N=x+(b^A&(O^b))+C[7]+1735328473&4294967295,x=O+(N<<14&4294967295|N>>>18),N=A+(O^b&(x^O))+C[12]+2368359562&4294967295,A=x+(N<<20&4294967295|N>>>12),N=b+(A^x^O)+C[5]+4294588738&4294967295,b=A+(N<<4&4294967295|N>>>28),N=O+(b^A^x)+C[8]+2272392833&4294967295,O=b+(N<<11&4294967295|N>>>21),N=x+(O^b^A)+C[11]+1839030562&4294967295,x=O+(N<<16&4294967295|N>>>16),N=A+(x^O^b)+C[14]+4259657740&4294967295,A=x+(N<<23&4294967295|N>>>9),N=b+(A^x^O)+C[1]+2763975236&4294967295,b=A+(N<<4&4294967295|N>>>28),N=O+(b^A^x)+C[4]+1272893353&4294967295,O=b+(N<<11&4294967295|N>>>21),N=x+(O^b^A)+C[7]+4139469664&4294967295,x=O+(N<<16&4294967295|N>>>16),N=A+(x^O^b)+C[10]+3200236656&4294967295,A=x+(N<<23&4294967295|N>>>9),N=b+(A^x^O)+C[13]+681279174&4294967295,b=A+(N<<4&4294967295|N>>>28),N=O+(b^A^x)+C[0]+3936430074&4294967295,O=b+(N<<11&4294967295|N>>>21),N=x+(O^b^A)+C[3]+3572445317&4294967295,x=O+(N<<16&4294967295|N>>>16),N=A+(x^O^b)+C[6]+76029189&4294967295,A=x+(N<<23&4294967295|N>>>9),N=b+(A^x^O)+C[9]+3654602809&4294967295,b=A+(N<<4&4294967295|N>>>28),N=O+(b^A^x)+C[12]+3873151461&4294967295,O=b+(N<<11&4294967295|N>>>21),N=x+(O^b^A)+C[15]+530742520&4294967295,x=O+(N<<16&4294967295|N>>>16),N=A+(x^O^b)+C[2]+3299628645&4294967295,A=x+(N<<23&4294967295|N>>>9),N=b+(x^(A|~O))+C[0]+4096336452&4294967295,b=A+(N<<6&4294967295|N>>>26),N=O+(A^(b|~x))+C[7]+1126891415&4294967295,O=b+(N<<10&4294967295|N>>>22),N=x+(b^(O|~A))+C[14]+2878612391&4294967295,x=O+(N<<15&4294967295|N>>>17),N=A+(O^(x|~b))+C[5]+4237533241&4294967295,A=x+(N<<21&4294967295|N>>>11),N=b+(x^(A|~O))+C[12]+1700485571&4294967295,b=A+(N<<6&4294967295|N>>>26),N=O+(A^(b|~x))+C[3]+2399980690&4294967295,O=b+(N<<10&4294967295|N>>>22),N=x+(b^(O|~A))+C[10]+4293915773&4294967295,x=O+(N<<15&4294967295|N>>>17),N=A+(O^(x|~b))+C[1]+2240044497&4294967295,A=x+(N<<21&4294967295|N>>>11),N=b+(x^(A|~O))+C[8]+1873313359&4294967295,b=A+(N<<6&4294967295|N>>>26),N=O+(A^(b|~x))+C[15]+4264355552&4294967295,O=b+(N<<10&4294967295|N>>>22),N=x+(b^(O|~A))+C[6]+2734768916&4294967295,x=O+(N<<15&4294967295|N>>>17),N=A+(O^(x|~b))+C[13]+1309151649&4294967295,A=x+(N<<21&4294967295|N>>>11),N=b+(x^(A|~O))+C[4]+4149444226&4294967295,b=A+(N<<6&4294967295|N>>>26),N=O+(A^(b|~x))+C[11]+3174756917&4294967295,O=b+(N<<10&4294967295|N>>>22),N=x+(b^(O|~A))+C[2]+718787259&4294967295,x=O+(N<<15&4294967295|N>>>17),N=A+(O^(x|~b))+C[9]+3951481745&4294967295,D.g[0]=D.g[0]+b&4294967295,D.g[1]=D.g[1]+(x+(N<<21&4294967295|N>>>11))&4294967295,D.g[2]=D.g[2]+x&4294967295,D.g[3]=D.g[3]+O&4294967295}s.prototype.u=function(D,b){b===void 0&&(b=D.length);for(var A=b-this.blockSize,C=this.B,x=this.h,O=0;O<b;){if(x==0)for(;O<=A;)o(this,D,O),O+=this.blockSize;if(typeof D=="string"){for(;O<b;)if(C[x++]=D.charCodeAt(O++),x==this.blockSize){o(this,C),x=0;break}}else for(;O<b;)if(C[x++]=D[O++],x==this.blockSize){o(this,C),x=0;break}}this.h=x,this.o+=b},s.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var b=1;b<D.length-8;++b)D[b]=0;var A=8*this.o;for(b=D.length-8;b<D.length;++b)D[b]=A&255,A/=256;for(this.u(D),D=Array(16),b=A=0;4>b;++b)for(var C=0;32>C;C+=8)D[A++]=this.g[b]>>>C&255;return D};function u(D,b){var A=m;return Object.prototype.hasOwnProperty.call(A,D)?A[D]:A[D]=b(D)}function c(D,b){this.h=b;for(var A=[],C=!0,x=D.length-1;0<=x;x--){var O=D[x]|0;C&&O==b||(A[x]=O,C=!1)}this.g=A}var m={};function p(D){return-128<=D&&128>D?u(D,function(b){return new c([b|0],0>b?-1:0)}):new c([D|0],0>D?-1:0)}function g(D){if(isNaN(D)||!isFinite(D))return w;if(0>D)return B(g(-D));for(var b=[],A=1,C=0;D>=A;C++)b[C]=D/A|0,A*=4294967296;return new c(b,0)}function _(D,b){if(D.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(D.charAt(0)=="-")return B(_(D.substring(1),b));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=g(Math.pow(b,8)),C=w,x=0;x<D.length;x+=8){var O=Math.min(8,D.length-x),N=parseInt(D.substring(x,x+O),b);8>O?(O=g(Math.pow(b,O)),C=C.j(O).add(g(N))):(C=C.j(A),C=C.add(g(N)))}return C}var w=p(0),I=p(1),M=p(16777216);r=c.prototype,r.m=function(){if($(this))return-B(this).m();for(var D=0,b=1,A=0;A<this.g.length;A++){var C=this.i(A);D+=(0<=C?C:4294967296+C)*b,b*=4294967296}return D},r.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(U(this))return"0";if($(this))return"-"+B(this).toString(D);for(var b=g(Math.pow(D,6)),A=this,C="";;){var x=le(A,b).g;A=X(A,x.j(b));var O=((0<A.g.length?A.g[0]:A.h)>>>0).toString(D);if(A=x,U(A))return O+C;for(;6>O.length;)O="0"+O;C=O+C}},r.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function U(D){if(D.h!=0)return!1;for(var b=0;b<D.g.length;b++)if(D.g[b]!=0)return!1;return!0}function $(D){return D.h==-1}r.l=function(D){return D=X(this,D),$(D)?-1:U(D)?0:1};function B(D){for(var b=D.g.length,A=[],C=0;C<b;C++)A[C]=~D.g[C];return new c(A,~D.h).add(I)}r.abs=function(){return $(this)?B(this):this},r.add=function(D){for(var b=Math.max(this.g.length,D.g.length),A=[],C=0,x=0;x<=b;x++){var O=C+(this.i(x)&65535)+(D.i(x)&65535),N=(O>>>16)+(this.i(x)>>>16)+(D.i(x)>>>16);C=N>>>16,O&=65535,N&=65535,A[x]=N<<16|O}return new c(A,A[A.length-1]&-2147483648?-1:0)};function X(D,b){return D.add(B(b))}r.j=function(D){if(U(this)||U(D))return w;if($(this))return $(D)?B(this).j(B(D)):B(B(this).j(D));if($(D))return B(this.j(B(D)));if(0>this.l(M)&&0>D.l(M))return g(this.m()*D.m());for(var b=this.g.length+D.g.length,A=[],C=0;C<2*b;C++)A[C]=0;for(C=0;C<this.g.length;C++)for(var x=0;x<D.g.length;x++){var O=this.i(C)>>>16,N=this.i(C)&65535,pe=D.i(x)>>>16,Ie=D.i(x)&65535;A[2*C+2*x]+=N*Ie,re(A,2*C+2*x),A[2*C+2*x+1]+=O*Ie,re(A,2*C+2*x+1),A[2*C+2*x+1]+=N*pe,re(A,2*C+2*x+1),A[2*C+2*x+2]+=O*pe,re(A,2*C+2*x+2)}for(C=0;C<b;C++)A[C]=A[2*C+1]<<16|A[2*C];for(C=b;C<2*b;C++)A[C]=0;return new c(A,0)};function re(D,b){for(;(D[b]&65535)!=D[b];)D[b+1]+=D[b]>>>16,D[b]&=65535,b++}function Z(D,b){this.g=D,this.h=b}function le(D,b){if(U(b))throw Error("division by zero");if(U(D))return new Z(w,w);if($(D))return b=le(B(D),b),new Z(B(b.g),B(b.h));if($(b))return b=le(D,B(b)),new Z(B(b.g),b.h);if(30<D.g.length){if($(D)||$(b))throw Error("slowDivide_ only works with positive integers.");for(var A=I,C=b;0>=C.l(D);)A=me(A),C=me(C);var x=ae(A,1),O=ae(C,1);for(C=ae(C,2),A=ae(A,2);!U(C);){var N=O.add(C);0>=N.l(D)&&(x=x.add(A),O=N),C=ae(C,1),A=ae(A,1)}return b=X(D,x.j(b)),new Z(x,b)}for(x=w;0<=D.l(b);){for(A=Math.max(1,Math.floor(D.m()/b.m())),C=Math.ceil(Math.log(A)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),O=g(A),N=O.j(b);$(N)||0<N.l(D);)A-=C,O=g(A),N=O.j(b);U(O)&&(O=I),x=x.add(O),D=X(D,N)}return new Z(x,D)}r.A=function(D){return le(this,D).h},r.and=function(D){for(var b=Math.max(this.g.length,D.g.length),A=[],C=0;C<b;C++)A[C]=this.i(C)&D.i(C);return new c(A,this.h&D.h)},r.or=function(D){for(var b=Math.max(this.g.length,D.g.length),A=[],C=0;C<b;C++)A[C]=this.i(C)|D.i(C);return new c(A,this.h|D.h)},r.xor=function(D){for(var b=Math.max(this.g.length,D.g.length),A=[],C=0;C<b;C++)A[C]=this.i(C)^D.i(C);return new c(A,this.h^D.h)};function me(D){for(var b=D.g.length+1,A=[],C=0;C<b;C++)A[C]=D.i(C)<<1|D.i(C-1)>>>31;return new c(A,D.h)}function ae(D,b){var A=b>>5;b%=32;for(var C=D.g.length-A,x=[],O=0;O<C;O++)x[O]=0<b?D.i(O+A)>>>b|D.i(O+A+1)<<32-b:D.i(O+A);return new c(x,D.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,lS=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=_,vs=c}).apply(typeof d0<"u"?d0:typeof self<"u"?self:typeof window<"u"?window:{});var dh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var uS,Wl,cS,bh,Ep,hS,fS,dS;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,E){return h==Array.prototype||h==Object.prototype||(h[y]=E.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof dh=="object"&&dh];for(var y=0;y<h.length;++y){var E=h[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var s=n(this);function o(h,y){if(y)e:{var E=s;h=h.split(".");for(var R=0;R<h.length-1;R++){var z=h[R];if(!(z in E))break e;E=E[z]}h=h[h.length-1],R=E[h],y=y(R),y!=R&&y!=null&&e(E,h,{configurable:!0,writable:!0,value:y})}}function u(h,y){h instanceof String&&(h+="");var E=0,R=!1,z={next:function(){if(!R&&E<h.length){var Q=E++;return{value:y(Q,h[Q]),done:!1}}return R=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}o("Array.prototype.values",function(h){return h||function(){return u(this,function(y,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},m=this||self;function p(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function g(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function _(h,y,E){return h.call.apply(h.bind,arguments)}function w(h,y,E){if(!h)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,R),h.apply(y,z)}}return function(){return h.apply(y,arguments)}}function I(h,y,E){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:w,I.apply(null,arguments)}function M(h,y){var E=Array.prototype.slice.call(arguments,1);return function(){var R=E.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function U(h,y){function E(){}E.prototype=y.prototype,h.aa=y.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(R,z,Q){for(var oe=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)oe[Ke-2]=arguments[Ke];return y.prototype[z].apply(R,oe)}}function $(h){const y=h.length;if(0<y){const E=Array(y);for(let R=0;R<y;R++)E[R]=h[R];return E}return[]}function B(h,y){for(let E=1;E<arguments.length;E++){const R=arguments[E];if(p(R)){const z=h.length||0,Q=R.length||0;h.length=z+Q;for(let oe=0;oe<Q;oe++)h[z+oe]=R[oe]}else h.push(R)}}class X{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function re(h){return/^[\s\xa0]*$/.test(h)}function Z(){var h=m.navigator;return h&&(h=h.userAgent)?h:""}function le(h){return le[" "](h),h}le[" "]=function(){};var me=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function ae(h,y,E){for(const R in h)y.call(E,h[R],R,h)}function D(h,y){for(const E in h)y.call(void 0,h[E],E,h)}function b(h){const y={};for(const E in h)y[E]=h[E];return y}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(h,y){let E,R;for(let z=1;z<arguments.length;z++){R=arguments[z];for(E in R)h[E]=R[E];for(let Q=0;Q<A.length;Q++)E=A[Q],Object.prototype.hasOwnProperty.call(R,E)&&(h[E]=R[E])}}function x(h){var y=1;h=h.split(":");const E=[];for(;0<y&&h.length;)E.push(h.shift()),y--;return h.length&&E.push(h.join(":")),E}function O(h){m.setTimeout(()=>{throw h},0)}function N(){var h=Be;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class pe{constructor(){this.h=this.g=null}add(y,E){const R=Ie.get();R.set(y,E),this.h?this.h.next=R:this.g=R,this.h=R}}var Ie=new X(()=>new H,h=>h.reset());class H{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let se,ve=!1,Be=new pe,$e=()=>{const h=m.Promise.resolve(void 0);se=()=>{h.then(P)}};var P=()=>{for(var h;h=N();){try{h.h.call(h.g)}catch(E){O(E)}var y=Ie;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}ve=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var fe=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};m.addEventListener("test",E,y),m.removeEventListener("test",E,y)}catch{}return h}();function we(h,y){if(ie.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(me){e:{try{le(y.nodeName);var z=!0;break e}catch{}z=!1}z||(y=null)}}else E=="mouseover"?y=h.fromElement:E=="mouseout"&&(y=h.toElement);this.relatedTarget=y,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Ne[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&we.aa.h.call(this)}}U(we,ie);var Ne={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ue="closure_listenable_"+(1e6*Math.random()|0),Ut=0;function ot(h,y,E,R,z){this.listener=h,this.proxy=null,this.src=y,this.type=E,this.capture=!!R,this.ha=z,this.key=++Ut,this.da=this.fa=!1}function hr(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Vr(h){this.src=h,this.g={},this.h=0}Vr.prototype.add=function(h,y,E,R,z){var Q=h.toString();h=this.g[Q],h||(h=this.g[Q]=[],this.h++);var oe=Oa(h,y,R,z);return-1<oe?(y=h[oe],E||(y.fa=!1)):(y=new ot(y,this.src,Q,!!R,z),y.fa=E,h.push(y)),y};function Ps(h,y){var E=y.type;if(E in h.g){var R=h.g[E],z=Array.prototype.indexOf.call(R,y,void 0),Q;(Q=0<=z)&&Array.prototype.splice.call(R,z,1),Q&&(hr(y),h.g[E].length==0&&(delete h.g[E],h.h--))}}function Oa(h,y,E,R){for(var z=0;z<h.length;++z){var Q=h[z];if(!Q.da&&Q.listener==y&&Q.capture==!!E&&Q.ha==R)return z}return-1}var Wn="closure_lm_"+(1e6*Math.random()|0),Ls={};function ka(h,y,E,R,z){if(Array.isArray(y)){for(var Q=0;Q<y.length;Q++)ka(h,y[Q],E,R,z);return null}return E=Uu(E),h&&h[Ue]?h.K(y,E,g(R)?!!R.capture:!1,z):Vf(h,y,E,!1,R,z)}function Vf(h,y,E,R,z,Q){if(!y)throw Error("Invalid event type");var oe=g(z)?!!z.capture:!!z,Ke=Go(h);if(Ke||(h[Wn]=Ke=new Vr(h)),E=Ke.add(y,E,R,oe,Q),E.proxy)return E;if(R=Lu(),E.proxy=R,R.src=h,R.listener=E,h.addEventListener)fe||(z=oe),z===void 0&&(z=!1),h.addEventListener(y.toString(),R,z);else if(h.attachEvent)h.attachEvent(Va(y.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Lu(){function h(E){return y.call(h.src,h.listener,E)}const y=Pf;return h}function Ma(h,y,E,R,z){if(Array.isArray(y))for(var Q=0;Q<y.length;Q++)Ma(h,y[Q],E,R,z);else R=g(R)?!!R.capture:!!R,E=Uu(E),h&&h[Ue]?(h=h.i,y=String(y).toString(),y in h.g&&(Q=h.g[y],E=Oa(Q,E,R,z),-1<E&&(hr(Q[E]),Array.prototype.splice.call(Q,E,1),Q.length==0&&(delete h.g[y],h.h--)))):h&&(h=Go(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Oa(y,E,R,z)),(E=-1<h?y[h]:null)&&Us(E))}function Us(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Ue])Ps(y.i,h);else{var E=h.type,R=h.proxy;y.removeEventListener?y.removeEventListener(E,R,h.capture):y.detachEvent?y.detachEvent(Va(E),R):y.addListener&&y.removeListener&&y.removeListener(R),(E=Go(y))?(Ps(E,h),E.h==0&&(E.src=null,y[Wn]=null)):hr(h)}}}function Va(h){return h in Ls?Ls[h]:Ls[h]="on"+h}function Pf(h,y){if(h.da)h=!0;else{y=new we(y,this);var E=h.listener,R=h.ha||h.src;h.fa&&Us(h),h=E.call(R,y)}return h}function Go(h){return h=h[Wn],h instanceof Vr?h:null}var jt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Uu(h){return typeof h=="function"?h:(h[jt]||(h[jt]=function(y){return h.handleEvent(y)}),h[jt])}function Nt(){W.call(this),this.i=new Vr(this),this.M=this,this.F=null}U(Nt,W),Nt.prototype[Ue]=!0,Nt.prototype.removeEventListener=function(h,y,E,R){Ma(this,h,y,E,R)};function Ot(h,y){var E,R=h.F;if(R)for(E=[];R;R=R.F)E.push(R);if(h=h.M,R=y.type||y,typeof y=="string")y=new ie(y,h);else if(y instanceof ie)y.target=y.target||h;else{var z=y;y=new ie(R,h),C(y,z)}if(z=!0,E)for(var Q=E.length-1;0<=Q;Q--){var oe=y.g=E[Q];z=Pr(oe,R,!0,y)&&z}if(oe=y.g=h,z=Pr(oe,R,!0,y)&&z,z=Pr(oe,R,!1,y)&&z,E)for(Q=0;Q<E.length;Q++)oe=y.g=E[Q],z=Pr(oe,R,!1,y)&&z}Nt.prototype.N=function(){if(Nt.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var E=h.g[y],R=0;R<E.length;R++)hr(E[R]);delete h.g[y],h.h--}}this.F=null},Nt.prototype.K=function(h,y,E,R){return this.i.add(String(h),y,!1,E,R)},Nt.prototype.L=function(h,y,E,R){return this.i.add(String(h),y,!0,E,R)};function Pr(h,y,E,R){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var z=!0,Q=0;Q<y.length;++Q){var oe=y[Q];if(oe&&!oe.da&&oe.capture==E){var Ke=oe.listener,Tt=oe.ha||oe.src;oe.fa&&Ps(h.i,oe),z=Ke.call(Tt,R)!==!1&&z}}return z&&!R.defaultPrevented}function ju(h,y,E){if(typeof h=="function")E&&(h=I(h,E));else if(h&&typeof h.handleEvent=="function")h=I(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:m.setTimeout(h,y||0)}function $o(h){h.g=ju(()=>{h.g=null,h.i&&(h.i=!1,$o(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Lf extends W{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:$o(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function js(h){W.call(this),this.h=h,this.g={}}U(js,W);var wi=[];function Xt(h){ae(h.g,function(y,E){this.g.hasOwnProperty(E)&&Us(y)},h),h.g={}}js.prototype.N=function(){js.aa.N.call(this),Xt(this)},js.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mn=m.JSON.stringify,sn=m.JSON.parse,Uf=class{stringify(h){return m.JSON.stringify(h,void 0)}parse(h){return m.JSON.parse(h,void 0)}};function Ko(){}Ko.prototype.h=null;function zu(h){return h.h||(h.h=h.i())}function zs(){}var fr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Si(){ie.call(this,"d")}U(Si,ie);function Jn(){ie.call(this,"c")}U(Jn,ie);var Vn={},bi=null;function Pa(){return bi=bi||new Nt}Vn.La="serverreachability";function Qo(h){ie.call(this,Vn.La,h)}U(Qo,ie);function Lr(h){const y=Pa();Ot(y,new Qo(y))}Vn.STAT_EVENT="statevent";function Ai(h,y){ie.call(this,Vn.STAT_EVENT,h),this.stat=y}U(Ai,ie);function zt(h){const y=Pa();Ot(y,new Ai(y,h))}Vn.Ma="timingevent";function Yo(h,y){ie.call(this,Vn.Ma,h),this.size=y}U(Yo,ie);function Ri(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){h()},y)}function Ii(){this.g=!0}Ii.prototype.xa=function(){this.g=!1};function Xo(h,y,E,R,z,Q){h.info(function(){if(h.g)if(Q)for(var oe="",Ke=Q.split("&"),Tt=0;Tt<Ke.length;Tt++){var xe=Ke[Tt].split("=");if(1<xe.length){var Mt=xe[0];xe=xe[1];var Vt=Mt.split("_");oe=2<=Vt.length&&Vt[1]=="type"?oe+(Mt+"="+xe+"&"):oe+(Mt+"=redacted&")}}else oe=null;else oe=Q;return"XMLHTTP REQ ("+R+") [attempt "+z+"]: "+y+`
`+E+`
`+oe})}function Wo(h,y,E,R,z,Q,oe){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+z+"]: "+y+`
`+E+`
`+Q+" "+oe})}function Ur(h,y,E,R){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+dr(h,E)+(R?" "+R:"")})}function Bu(h,y){h.info(function(){return"TIMEOUT: "+y})}Ii.prototype.info=function(){};function dr(h,y){if(!h.g)return y;if(!y)return null;try{var E=JSON.parse(y);if(E){for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var R=E[h];if(!(2>R.length)){var z=R[1];if(Array.isArray(z)&&!(1>z.length)){var Q=z[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var oe=1;oe<z.length;oe++)z[oe]=""}}}}return Mn(E)}catch{return y}}var ht={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Bt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},mr;function Ci(){}U(Ci,Ko),Ci.prototype.g=function(){return new XMLHttpRequest},Ci.prototype.i=function(){return{}},mr=new Ci;function pr(h,y,E,R){this.j=h,this.i=y,this.l=E,this.R=R||1,this.U=new js(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new qu}function qu(){this.i=null,this.g="",this.h=!1}var Jo={},jr={};function Bs(h,y,E){h.L=1,h.v=Hs(ft(y)),h.m=E,h.P=!0,zr(h,null)}function zr(h,y){h.F=Date.now(),Zn(h),h.A=ft(h.v);var E=h.A,R=h.R;Array.isArray(R)||(R=[String(R)]),Fr(E.i,"t",R),h.C=0,E=h.j.J,h.h=new qu,h.g=ic(h.j,E?y:null,!h.m),0<h.O&&(h.M=new Lf(I(h.Y,h,h.g),h.O)),y=h.U,E=h.g,R=h.ca;var z="readystatechange";Array.isArray(z)||(z&&(wi[0]=z.toString()),z=wi);for(var Q=0;Q<z.length;Q++){var oe=ka(E,z[Q],R||y.handleEvent,!1,y.h||y);if(!oe)break;y.g[oe.key]=oe}y=h.H?b(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),Lr(),Xo(h.i,h.u,h.A,h.l,h.R,h.m)}pr.prototype.ca=function(h){h=h.target;const y=this.M;y&&ln(h)==3?y.j():this.Y(h)},pr.prototype.Y=function(h){try{if(h==this.g)e:{const Vt=ln(this.g);var y=this.g.Ba();const Bi=this.g.Z();if(!(3>Vt)&&(Vt!=3||this.g&&(this.h.h||this.g.oa()||Ks(this.g)))){this.J||Vt!=4||y==7||(y==8||0>=Bi?Lr(3):Lr(2)),La(this);var E=this.g.Z();this.X=E;t:if(Br(this)){var R=Ks(this.g);h="";var z=R.length,Q=ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){an(this),Ni(this);var oe="";break t}this.h.i=new m.TextDecoder}for(y=0;y<z;y++)this.h.h=!0,h+=this.h.i.decode(R[y],{stream:!(Q&&y==z-1)});R.length=0,this.h.g+=h,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=E==200,Wo(this.i,this.u,this.A,this.l,this.R,Vt,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Ke,Tt=this.g;if((Ke=Tt.g?Tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!re(Ke)){var xe=Ke;break t}}xe=null}if(E=xe)Ur(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gr(this,E);else{this.o=!1,this.s=3,zt(12),an(this),Ni(this);break e}}if(this.P){E=!0;let fn;for(;!this.J&&this.C<oe.length;)if(fn=qs(this,oe),fn==jr){Vt==4&&(this.s=4,zt(14),E=!1),Ur(this.i,this.l,null,"[Incomplete Response]");break}else if(fn==Jo){this.s=4,zt(15),Ur(this.i,this.l,oe,"[Invalid Chunk]"),E=!1;break}else Ur(this.i,this.l,fn,null),gr(this,fn);if(Br(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Vt!=4||oe.length!=0||this.h.h||(this.s=1,zt(16),E=!1),this.o=this.o&&E,!E)Ur(this.i,this.l,oe,"[Invalid Chunked Response]"),an(this),Ni(this);else if(0<oe.length&&!this.W){this.W=!0;var Mt=this.j;Mt.g==this&&Mt.ba&&!Mt.M&&(Mt.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),ul(Mt),Mt.M=!0,zt(11))}}else Ur(this.i,this.l,oe,null),gr(this,oe);Vt==4&&an(this),this.o&&!this.J&&(Vt==4?tc(this.j,this):(this.o=!1,Zn(this)))}else Yu(this.g),E==400&&0<oe.indexOf("Unknown SID")?(this.s=3,zt(12)):(this.s=0,zt(13)),an(this),Ni(this)}}}catch{}finally{}};function Br(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function qs(h,y){var E=h.C,R=y.indexOf(`
`,E);return R==-1?jr:(E=Number(y.substring(E,R)),isNaN(E)?Jo:(R+=1,R+E>y.length?jr:(y=y.slice(R,R+E),h.C=R+E,y)))}pr.prototype.cancel=function(){this.J=!0,an(this)};function Zn(h){h.S=Date.now()+h.I,gt(h,h.I)}function gt(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Ri(I(h.ba,h),y)}function La(h){h.B&&(m.clearTimeout(h.B),h.B=null)}pr.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Bu(this.i,this.A),this.L!=2&&(Lr(),zt(17)),an(this),this.s=2,Ni(this)):gt(this,this.S-h)};function Ni(h){h.j.G==0||h.J||tc(h.j,h)}function an(h){La(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,Xt(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function gr(h,y){try{var E=h.j;if(E.G!=0&&(E.g==h||xi(E.h,h))){if(!h.K&&xi(E.h,h)&&E.G==3){try{var R=E.Da.g.parse(y)}catch{R=null}if(Array.isArray(R)&&R.length==3){var z=R;if(z[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<h.F)ji(E),Ui(E);else break e;ll(E),zt(18)}}else E.za=z[1],0<E.za-E.T&&37500>z[2]&&E.F&&E.v==0&&!E.C&&(E.C=Ri(I(E.Za,E),6e3));if(1>=Fu(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Gr(E,11)}else if((h.K||E.g==h)&&ji(E),!re(y))for(z=E.Da.g.parse(y),y=0;y<z.length;y++){let xe=z[y];if(E.T=xe[0],xe=xe[1],E.G==2)if(xe[0]=="c"){E.K=xe[1],E.ia=xe[2];const Mt=xe[3];Mt!=null&&(E.la=Mt,E.j.info("VER="+E.la));const Vt=xe[4];Vt!=null&&(E.Aa=Vt,E.j.info("SVER="+E.Aa));const Bi=xe[5];Bi!=null&&typeof Bi=="number"&&0<Bi&&(R=1.5*Bi,E.L=R,E.j.info("backChannelRequestTimeoutMs_="+R)),R=E;const fn=h.g;if(fn){const Xs=fn.g?fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xs){var Q=R.h;Q.g||Xs.indexOf("spdy")==-1&&Xs.indexOf("quic")==-1&&Xs.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Di(Q,Q.h),Q.h=null))}if(R.D){const $r=fn.g?fn.g.getResponseHeader("X-HTTP-Session-Id"):null;$r&&(R.ya=$r,qe(R.I,R.D,$r))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms")),R=E;var oe=h;if(R.qa=rc(R,R.J?R.ia:null,R.W),oe.K){Pn(R.h,oe);var Ke=oe,Tt=R.L;Tt&&(Ke.I=Tt),Ke.B&&(La(Ke),Zn(Ke)),R.g=oe}else Zu(R);0<E.i.length&&Ga(E)}else xe[0]!="stop"&&xe[0]!="close"||Gr(E,7);else E.G==3&&(xe[0]=="stop"||xe[0]=="close"?xe[0]=="stop"?Gr(E,7):al(E):xe[0]!="noop"&&E.l&&E.l.ta(xe),E.v=0)}}Lr(4)}catch{}}var jf=class{constructor(h,y){this.g=h,this.map=y}};function Zo(h){this.l=h||10,m.PerformanceNavigationTiming?(h=m.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function el(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Fu(h){return h.h?1:h.g?h.g.size:0}function xi(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Di(h,y){h.g?h.g.add(y):h.h=y}function Pn(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Zo.prototype.cancel=function(){if(this.i=on(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function on(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const E of h.g.values())y=y.concat(E.D);return y}return $(h.i)}function Hu(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(p(h)){for(var y=[],E=h.length,R=0;R<E;R++)y.push(h[R]);return y}y=[],E=0;for(R in h)y[E++]=h[R];return y}function zf(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(p(h)||typeof h=="string"){var y=[];h=h.length;for(var E=0;E<h;E++)y.push(E);return y}y=[],E=0;for(const R in h)y[E++]=R;return y}}}function Ua(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(p(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var E=zf(h),R=Hu(h),z=R.length,Q=0;Q<z;Q++)y.call(void 0,R[Q],E&&E[Q],h)}var tl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ja(h,y){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var R=h[E].indexOf("="),z=null;if(0<=R){var Q=h[E].substring(0,R);z=h[E].substring(R+1)}else Q=h[E];y(Q,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function qr(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof qr){this.h=h.h,Oi(this,h.j),this.o=h.o,this.g=h.g,Fs(this,h.s),this.l=h.l;var y=h.i,E=new yr;E.i=y.i,y.g&&(E.g=new Map(y.g),E.h=y.h),za(this,E),this.m=h.m}else h&&(y=String(h).match(tl))?(this.h=!1,Oi(this,y[1]||"",!0),this.o=ki(y[2]||""),this.g=ki(y[3]||"",!0),Fs(this,y[4]),this.l=ki(y[5]||"",!0),za(this,y[6]||"",!0),this.m=ki(y[7]||"")):(this.h=!1,this.i=new yr(null,this.h))}qr.prototype.toString=function(){var h=[],y=this.j;y&&h.push(Ln(y,nl,!0),":");var E=this.g;return(E||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Ln(y,nl,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&h.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(Ln(E,E.charAt(0)=="/"?rl:Gu,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Ln(E,Ff)),h.join("")};function ft(h){return new qr(h)}function Oi(h,y,E){h.j=E?ki(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Fs(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function za(h,y,E){y instanceof yr?(h.i=y,$u(h.i,h.h)):(E||(y=Ln(y,qf)),h.i=new yr(y,h.h))}function qe(h,y,E){h.i.set(y,E)}function Hs(h){return qe(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function ki(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ln(h,y,E){return typeof h=="string"?(h=encodeURI(h).replace(y,Bf),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Bf(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var nl=/[#\/\?@]/g,Gu=/[#\?:]/g,rl=/[#\?]/g,qf=/[#\?@]/g,Ff=/#/g;function yr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function kt(h){h.g||(h.g=new Map,h.h=0,h.i&&ja(h.i,function(y,E){h.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}r=yr.prototype,r.add=function(h,y){kt(this),this.i=null,h=wn(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(y),this.h+=1,this};function Ba(h,y){kt(h),y=wn(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function qa(h,y){return kt(h),y=wn(h,y),h.g.has(y)}r.forEach=function(h,y){kt(this),this.g.forEach(function(E,R){E.forEach(function(z){h.call(y,z,R,this)},this)},this)},r.na=function(){kt(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),E=[];for(let R=0;R<y.length;R++){const z=h[R];for(let Q=0;Q<z.length;Q++)E.push(y[R])}return E},r.V=function(h){kt(this);let y=[];if(typeof h=="string")qa(this,h)&&(y=y.concat(this.g.get(wn(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)y=y.concat(h[E])}return y},r.set=function(h,y){return kt(this),this.i=null,h=wn(this,h),qa(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function Fr(h,y,E){Ba(h,y),0<E.length&&(h.i=null,h.g.set(wn(h,y),$(E)),h.h+=E.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var E=0;E<y.length;E++){var R=y[E];const Q=encodeURIComponent(String(R)),oe=this.V(R);for(R=0;R<oe.length;R++){var z=Q;oe[R]!==""&&(z+="="+encodeURIComponent(String(oe[R]))),h.push(z)}}return this.i=h.join("&")};function wn(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function $u(h,y){y&&!h.j&&(kt(h),h.i=null,h.g.forEach(function(E,R){var z=R.toLowerCase();R!=z&&(Ba(this,R),Fr(this,z,E))},h)),h.j=y}function il(h,y){const E=new Ii;if(m.Image){const R=new Image;R.onload=M(hn,E,"TestLoadImage: loaded",!0,y,R),R.onerror=M(hn,E,"TestLoadImage: error",!1,y,R),R.onabort=M(hn,E,"TestLoadImage: abort",!1,y,R),R.ontimeout=M(hn,E,"TestLoadImage: timeout",!1,y,R),m.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else y(!1)}function Ku(h,y){const E=new Ii,R=new AbortController,z=setTimeout(()=>{R.abort(),hn(E,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:R.signal}).then(Q=>{clearTimeout(z),Q.ok?hn(E,"TestPingServer: ok",!0,y):hn(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(z),hn(E,"TestPingServer: error",!1,y)})}function hn(h,y,E,R,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),R(E)}catch{}}function er(){this.g=new Uf}function sl(h,y,E){const R=E||"";try{Ua(h,function(z,Q){let oe=z;g(z)&&(oe=Mn(z)),y.push(R+Q+"="+encodeURIComponent(oe))})}catch(z){throw y.push(R+"type="+encodeURIComponent("_badmap")),z}}function vr(h){this.l=h.Ub||null,this.j=h.eb||!1}U(vr,Ko),vr.prototype.g=function(){return new Sn(this.l,this.j)},vr.prototype.i=function(h){return function(){return h}}({});function Sn(h,y){Nt.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}U(Sn,Nt),r=Sn.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,Mi(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||m).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_r(this)),this.readyState=0},r.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Mi(this)),this.g&&(this.readyState=3,Mi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fa(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fa(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}r.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?_r(this):Mi(this),this.readyState==3&&Fa(this)}},r.Ra=function(h){this.g&&(this.response=this.responseText=h,_r(this))},r.Qa=function(h){this.g&&(this.response=h,_r(this))},r.ga=function(){this.g&&_r(this)};function _r(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Mi(h)}r.setRequestHeader=function(h,y){this.u.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=y.next();return h.join(`\r
`)};function Mi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Sn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Gs(h){let y="";return ae(h,function(E,R){y+=R,y+=":",y+=E,y+=`\r
`}),y}function Vi(h,y,E){e:{for(R in E){var R=!1;break e}R=!0}R||(E=Gs(E),typeof h=="string"?E!=null&&encodeURIComponent(String(E)):qe(h,y,E))}function nt(h){Nt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}U(nt,Nt);var Wt=/^https?$/i,Hr=["POST","PUT"];r=nt.prototype,r.Ha=function(h){this.J=h},r.ea=function(h,y,E,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():mr.g(),this.v=this.o?zu(this.o):zu(mr),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Q){$s(this,Q);return}if(h=E||"",E=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var z in R)E.set(z,R[z]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const Q of R.keys())E.set(Q,R.get(Q));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(E.keys()).find(Q=>Q.toLowerCase()=="content-type"),z=m.FormData&&h instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Hr,y,void 0))||R||z||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,oe]of E)this.g.setRequestHeader(Q,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ha(this),this.u=!0,this.g.send(h),this.u=!1}catch(Q){$s(this,Q)}};function $s(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,Pi(h),Li(h)}function Pi(h){h.A||(h.A=!0,Ot(h,"complete"),Ot(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ot(this,"complete"),Ot(this,"abort"),Li(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Li(this,!0)),nt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Qu(this):this.bb())},r.bb=function(){Qu(this)};function Qu(h){if(h.h&&typeof c<"u"&&(!h.v[1]||ln(h)!=4||h.Z()!=2)){if(h.u&&ln(h)==4)ju(h.Ea,0,h);else if(Ot(h,"readystatechange"),ln(h)==4){h.h=!1;try{const oe=h.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var R;if(R=oe===0){var z=String(h.D).match(tl)[1]||null;!z&&m.self&&m.self.location&&(z=m.self.location.protocol.slice(0,-1)),R=!Wt.test(z?z.toLowerCase():"")}E=R}if(E)Ot(h,"complete"),Ot(h,"success");else{h.m=6;try{var Q=2<ln(h)?h.g.statusText:""}catch{Q=""}h.l=Q+" ["+h.Z()+"]",Pi(h)}}finally{Li(h)}}}}function Li(h,y){if(h.g){Ha(h);const E=h.g,R=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||Ot(h,"ready");try{E.onreadystatechange=R}catch{}}}function Ha(h){h.I&&(m.clearTimeout(h.I),h.I=null)}r.isActive=function(){return!!this.g};function ln(h){return h.g?h.g.readyState:0}r.Z=function(){try{return 2<ln(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),sn(y)}};function Ks(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Yu(h){const y={};h=(h.g&&2<=ln(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if(re(h[R]))continue;var E=x(h[R]);const z=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Q=y[z]||[];y[z]=Q,Q.push(E)}D(y,function(R){return R.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qs(h,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||y}function Xu(h){this.Aa=0,this.i=[],this.j=new Ii,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qs("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qs("baseRetryDelayMs",5e3,h),this.cb=Qs("retryDelaySeedMs",1e4,h),this.Wa=Qs("forwardChannelMaxRetries",2,h),this.wa=Qs("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Zo(h&&h.concurrentRequestLimit),this.Da=new er,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Xu.prototype,r.la=8,r.G=1,r.connect=function(h,y,E,R){zt(0),this.W=h,this.H=y||{},E&&R!==void 0&&(this.H.OSID=E,this.H.OAID=R),this.F=this.X,this.I=rc(this,null,this.W),Ga(this)};function al(h){if(Wu(h),h.G==3){var y=h.U++,E=ft(h.I);if(qe(E,"SID",h.K),qe(E,"RID",y),qe(E,"TYPE","terminate"),Ys(h,E),y=new pr(h,h.j,y),y.L=2,y.v=Hs(ft(E)),E=!1,m.navigator&&m.navigator.sendBeacon)try{E=m.navigator.sendBeacon(y.v.toString(),"")}catch{}!E&&m.Image&&(new Image().src=y.v,E=!0),E||(y.g=ic(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Zn(y)}cl(h)}function Ui(h){h.g&&(ul(h),h.g.cancel(),h.g=null)}function Wu(h){Ui(h),h.u&&(m.clearTimeout(h.u),h.u=null),ji(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&m.clearTimeout(h.s),h.s=null)}function Ga(h){if(!el(h.h)&&!h.s){h.s=!0;var y=h.Ga;se||$e(),ve||(se(),ve=!0),Be.add(y,h),h.B=0}}function Hf(h,y){return Fu(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Ri(I(h.Ga,h,y),nc(h,h.B)),h.B++,!0)}r.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const z=new pr(this,this.j,h);let Q=this.o;if(this.S&&(Q?(Q=b(Q),C(Q,this.S)):Q=this.S),this.m!==null||this.O||(z.H=Q,Q=null),this.P)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var R=this.i[E];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(y+=R,4096<y){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=ol(this,z,y),E=ft(this.I),qe(E,"RID",h),qe(E,"CVER",22),this.D&&qe(E,"X-HTTP-Session-Id",this.D),Ys(this,E),Q&&(this.O?y="headers="+encodeURIComponent(String(Gs(Q)))+"&"+y:this.m&&Vi(E,this.m,Q)),Di(this.h,z),this.Ua&&qe(E,"TYPE","init"),this.P?(qe(E,"$req",y),qe(E,"SID","null"),z.T=!0,Bs(z,E,null)):Bs(z,E,y),this.G=2}}else this.G==3&&(h?Ju(this,h):this.i.length==0||el(this.h)||Ju(this))};function Ju(h,y){var E;y?E=y.l:E=h.U++;const R=ft(h.I);qe(R,"SID",h.K),qe(R,"RID",E),qe(R,"AID",h.T),Ys(h,R),h.m&&h.o&&Vi(R,h.m,h.o),E=new pr(h,h.j,E,h.B+1),h.m===null&&(E.H=h.o),y&&(h.i=y.D.concat(h.i)),y=ol(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Di(h.h,E),Bs(E,R,y)}function Ys(h,y){h.H&&ae(h.H,function(E,R){qe(y,R,E)}),h.l&&Ua({},function(E,R){qe(y,R,E)})}function ol(h,y,E){E=Math.min(h.i.length,E);var R=h.l?I(h.l.Na,h.l,h):null;e:{var z=h.i;let Q=-1;for(;;){const oe=["count="+E];Q==-1?0<E?(Q=z[0].g,oe.push("ofs="+Q)):Q=0:oe.push("ofs="+Q);let Ke=!0;for(let Tt=0;Tt<E;Tt++){let xe=z[Tt].g;const Mt=z[Tt].map;if(xe-=Q,0>xe)Q=Math.max(0,z[Tt].g-100),Ke=!1;else try{sl(Mt,oe,"req"+xe+"_")}catch{R&&R(Mt)}}if(Ke){R=oe.join("&");break e}}}return h=h.i.splice(0,E),y.D=h,R}function Zu(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;se||$e(),ve||(se(),ve=!0),Be.add(y,h),h.v=0}}function ll(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Ri(I(h.Fa,h),nc(h,h.v)),h.v++,!0)}r.Fa=function(){if(this.u=null,ec(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Ri(I(this.ab,this),h)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,zt(10),Ui(this),ec(this))};function ul(h){h.A!=null&&(m.clearTimeout(h.A),h.A=null)}function ec(h){h.g=new pr(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=ft(h.qa);qe(y,"RID","rpc"),qe(y,"SID",h.K),qe(y,"AID",h.T),qe(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&qe(y,"TO",h.ja),qe(y,"TYPE","xmlhttp"),Ys(h,y),h.m&&h.o&&Vi(y,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=Hs(ft(y)),E.m=null,E.P=!0,zr(E,h)}r.Za=function(){this.C!=null&&(this.C=null,Ui(this),ll(this),zt(19))};function ji(h){h.C!=null&&(m.clearTimeout(h.C),h.C=null)}function tc(h,y){var E=null;if(h.g==y){ji(h),ul(h),h.g=null;var R=2}else if(xi(h.h,y))E=y.D,Pn(h.h,y),R=1;else return;if(h.G!=0){if(y.o)if(R==1){E=y.m?y.m.length:0,y=Date.now()-y.F;var z=h.B;R=Pa(),Ot(R,new Yo(R,E)),Ga(h)}else Zu(h);else if(z=y.s,z==3||z==0&&0<y.X||!(R==1&&Hf(h,y)||R==2&&ll(h)))switch(E&&0<E.length&&(y=h.h,y.i=y.i.concat(E)),z){case 1:Gr(h,5);break;case 4:Gr(h,10);break;case 3:Gr(h,6);break;default:Gr(h,2)}}}function nc(h,y){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*y}function Gr(h,y){if(h.j.info("Error code "+y),y==2){var E=I(h.fb,h),R=h.Xa;const z=!R;R=new qr(R||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Oi(R,"https"),Hs(R),z?il(R.toString(),E):Ku(R.toString(),E)}else zt(2);h.G=0,h.l&&h.l.sa(y),cl(h),Wu(h)}r.fb=function(h){h?(this.j.info("Successfully pinged google.com"),zt(2)):(this.j.info("Failed to ping google.com"),zt(1))};function cl(h){if(h.G=0,h.ka=[],h.l){const y=on(h.h);(y.length!=0||h.i.length!=0)&&(B(h.ka,y),B(h.ka,h.i),h.h.i.length=0,$(h.i),h.i.length=0),h.l.ra()}}function rc(h,y,E){var R=E instanceof qr?ft(E):new qr(E);if(R.g!="")y&&(R.g=y+"."+R.g),Fs(R,R.s);else{var z=m.location;R=z.protocol,y=y?y+"."+z.hostname:z.hostname,z=+z.port;var Q=new qr(null);R&&Oi(Q,R),y&&(Q.g=y),z&&Fs(Q,z),E&&(Q.l=E),R=Q}return E=h.D,y=h.ya,E&&y&&qe(R,E,y),qe(R,"VER",h.la),Ys(h,R),R}function ic(h,y,E){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new nt(new vr({eb:E})):new nt(h.pa),y.Ha(h.J),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function sc(){}r=sc.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function $a(){}$a.prototype.g=function(h,y){return new un(h,y)};function un(h,y){Nt.call(this),this.g=new Xu(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!re(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!re(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new zi(this)}U(un,Nt),un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){al(this.g)},un.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.u&&(E={},E.__data__=Mn(h),h=E);y.i.push(new jf(y.Ya++,h)),y.G==3&&Ga(y)},un.prototype.N=function(){this.g.l=null,delete this.j,al(this.g),delete this.g,un.aa.N.call(this)};function ac(h){Si.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const E in y){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}U(ac,Si);function oc(){Jn.call(this),this.status=1}U(oc,Jn);function zi(h){this.g=h}U(zi,sc),zi.prototype.ua=function(){Ot(this.g,"a")},zi.prototype.ta=function(h){Ot(this.g,new ac(h))},zi.prototype.sa=function(h){Ot(this.g,new oc)},zi.prototype.ra=function(){Ot(this.g,"b")},$a.prototype.createWebChannel=$a.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,dS=function(){return new $a},fS=function(){return Pa()},hS=Vn,Ep={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ht.NO_ERROR=0,ht.TIMEOUT=8,ht.HTTP_ERROR=6,bh=ht,Bt.COMPLETE="complete",cS=Bt,zs.EventType=fr,fr.OPEN="a",fr.CLOSE="b",fr.ERROR="c",fr.MESSAGE="d",Nt.prototype.listen=Nt.prototype.K,Wl=zs,nt.prototype.listenOnce=nt.prototype.L,nt.prototype.getLastError=nt.prototype.Ka,nt.prototype.getLastErrorCode=nt.prototype.Ba,nt.prototype.getStatus=nt.prototype.Z,nt.prototype.getResponseJson=nt.prototype.Oa,nt.prototype.getResponseText=nt.prototype.oa,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Ha,uS=nt}).apply(typeof dh<"u"?dh:typeof self<"u"?self:typeof window<"u"?window:{});const m0="@firebase/firestore",p0="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bo="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba=new lf("@firebase/firestore");function wo(){return ba.logLevel}function ce(r,...e){if(ba.logLevel<=Pe.DEBUG){const n=e.map(cg);ba.debug(`Firestore (${Bo}): ${r}`,...n)}}function vi(r,...e){if(ba.logLevel<=Pe.ERROR){const n=e.map(cg);ba.error(`Firestore (${Bo}): ${r}`,...n)}}function Ss(r,...e){if(ba.logLevel<=Pe.WARN){const n=e.map(cg);ba.warn(`Firestore (${Bo}): ${r}`,...n)}}function cg(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,mS(r,s,n)}function mS(r,e,n){let s=`FIRESTORE (${Bo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw vi(s),new Error(s)}function Qe(r,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||mS(e,o,s)}function Ae(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends cr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class AD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(en.UNAUTHENTICATED))}shutdown(){}}class RD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ID{constructor(e){this.t=e,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Qe(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new mi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new mi,e.enqueueRetryable(()=>o(this.currentUser))};const c=()=>{const p=u;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},m=p=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>m(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new mi)}},0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Qe(typeof s.accessToken=="string",31837,{l:s}),new pS(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new en(e)}}class CD{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=en.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ND{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new CD(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(en.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class g0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xD{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Dn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Qe(this.o===void 0,3512);const s=u=>{u.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,ce("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const o=u=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new g0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Qe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new g0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=DD(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function De(r,e){return r<e?-1:r>e?1:0}function Tp(r,e){let n=0;for(;n<r.length&&n<e.length;){const s=r.codePointAt(n),o=e.codePointAt(n);if(s!==o){if(s<128&&o<128)return De(s,o);{const u=gS(),c=OD(u.encode(y0(r,n)),u.encode(y0(e,n)));return c!==0?c:De(s,o)}}n+=s>65535?2:1}return De(r.length,e.length)}function y0(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function OD(r,e){for(let n=0;n<r.length&&n<e.length;++n)if(r[n]!==e[n])return De(r[n],e[n]);return De(r.length,e.length)}function Oo(r,e,n){return r.length===e.length&&r.every((s,o)=>n(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0="__name__";class br{constructor(e,n,s){n===void 0?n=0:n>e.length&&Te(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Te(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return br.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof br?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=br.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return De(e.length,n.length)}static compareSegments(e,n){const s=br.isNumericId(e),o=br.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?br.extractNumericId(e).compare(br.extractNumericId(n)):Tp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vs.fromString(e.substring(4,e.length-2))}}class tt extends br{construct(e,n,s){return new tt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ue(te.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(o=>o.length>0))}return new tt(n)}static emptyPath(){return new tt([])}}const kD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends br{construct(e,n,s){return new Qt(e,n,s)}static isValidIdentifier(e){return kD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===v0}static keyField(){return new Qt([v0])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new ue(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let c=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ue(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ue(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(c=!c,o++):m!=="."||c?(s+=m,o++):(u(),o++)}if(u(),c)throw new ue(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(n)}static emptyPath(){return new Qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(tt.fromString(e))}static fromName(e){return new ye(tt.fromString(e).popFirst(5))}static empty(){return new ye(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return tt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new tt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(r,e,n){if(!n)throw new ue(te.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function MD(r,e,n,s){if(e===!0&&s===!0)throw new ue(te.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function _0(r){if(!ye.isDocumentKey(r))throw new ue(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function E0(r){if(ye.isDocumentKey(r))throw new ue(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function vS(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function mf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Te(12329,{type:typeof r})}function Tn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ue(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=mf(r);throw new ue(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(r,e){const n={typeString:r};return e&&(n.value=e),n}function Cu(r,e){if(!vS(r))throw new ue(te.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const c=r[s];if(o&&typeof c!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&c!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new ue(te.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0=-62135596800,w0=1e6;class st{static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*w0);return new st(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ue(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ue(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<T0)throw new ue(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/w0}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:st._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Cu(e,st._jsonSchema))return new st(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-T0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}st._jsonSchemaVersion="firestore/timestamp/1.0",st._jsonSchema={type:Ct("string",st._jsonSchemaVersion),seconds:Ct("number"),nanoseconds:Ct("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new st(0,0))}static max(){return new Se(new st(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fu=-1;function VD(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Se.fromTimestamp(s===1e9?new st(n+1,0):new st(n,s));return new bs(o,ye.empty(),e)}function PD(r){return new bs(r.readTime,r.key,fu)}class bs{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new bs(Se.min(),ye.empty(),fu)}static max(){return new bs(Se.max(),ye.empty(),fu)}}function LD(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=ye.comparator(r.documentKey,e.documentKey),n!==0?n:De(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(r){if(r.code!==te.FAILED_PRECONDITION||r.message!==UD)throw r;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ne((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ne?n:ne.resolve(n)}catch(n){return ne.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ne.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ne.reject(n)}static resolve(e){return new ne((n,s)=>{n(e)})}static reject(e){return new ne((n,s)=>{s(e)})}static waitFor(e){return new ne((n,s)=>{let o=0,u=0,c=!1;e.forEach(m=>{++o,m.next(()=>{++u,c&&u===o&&n()},p=>s(p))}),c=!0,u===o&&n()})}static or(e){let n=ne.resolve(!1);for(const s of e)n=n.next(o=>o?ne.resolve(o):s());return n}static forEach(e,n){const s=[];return e.forEach((o,u)=>{s.push(n.call(this,o,u))}),this.waitFor(s)}static mapArray(e,n){return new ne((s,o)=>{const u=e.length,c=new Array(u);let m=0;for(let p=0;p<u;p++){const g=p;n(e[g]).next(_=>{c[g]=_,++m,m===u&&s(c)},_=>o(_))}})}static doWhile(e,n){return new ne((s,o)=>{const u=()=>{e()===!0?n().next(()=>{u()},o):s()};u()})}}function zD(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Fo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this._e(s),this.ae=s=>n.writeSequenceNumber(s))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}pf.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg=-1;function gf(r){return r==null}function qh(r){return r===0&&1/r==-1/0}function BD(r){return typeof r=="number"&&Number.isInteger(r)&&!qh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S="";function qD(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=S0(e)),e=FD(r.get(n),e);return S0(e)}function FD(r,e){let n=e;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case _S:n+="";break;default:n+=u}}return n}function S0(r){return r+_S+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function Ms(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function ES(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n){this.comparator=e,this.root=n||Kt.EMPTY}insert(e,n){return new ct(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Kt.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mh(this.root,e,this.comparator,!1)}getReverseIterator(){return new mh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mh(this.root,e,this.comparator,!0)}}class mh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kt{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??Kt.RED,this.left=o??Kt.EMPTY,this.right=u??Kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new Kt(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Kt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}Kt.EMPTY=null,Kt.RED=!0,Kt.BLACK=!1;Kt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new Kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new A0(this.data.getIterator())}getIteratorFrom(e){return new A0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Dt(this.comparator);return n.data=e,n}}class A0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new On([])}unionWith(e){let n=new Dt(Qt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new On(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Oo(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new TS("Invalid base64 string: "+u):u}}(e);return new Yt(n)}static fromUint8Array(e){const n=function(o){let u="";for(let c=0;c<o.length;++c)u+=String.fromCharCode(o[c]);return u}(e);return new Yt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yt.EMPTY_BYTE_STRING=new Yt("");const HD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function As(r){if(Qe(!!r,39018),typeof r=="string"){let e=0;const n=HD.exec(r);if(Qe(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:_t(r.seconds),nanos:_t(r.nanos)}}function _t(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Rs(r){return typeof r=="string"?Yt.fromBase64String(r):Yt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS="server_timestamp",SS="__type__",bS="__previous_value__",AS="__local_write_time__";function dg(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[SS])===null||n===void 0?void 0:n.stringValue)===wS}function yf(r){const e=r.mapValue.fields[bS];return dg(e)?yf(e):e}function du(r){const e=As(r.mapValue.fields[AS].timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e,n,s,o,u,c,m,p,g,_){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=_}}const Fh="(default)";class mu{constructor(e,n){this.projectId=e,this.database=n||Fh}static empty(){return new mu("","")}get isDefaultDatabase(){return this.database===Fh}isEqual(e){return e instanceof mu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS="__type__",$D="__max__",ph={mapValue:{}},IS="__vector__",Hh="value";function Is(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?dg(r)?4:QD(r)?9007199254740991:KD(r)?10:11:Te(28295,{value:r})}function Dr(r,e){if(r===e)return!0;const n=Is(r);if(n!==Is(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return du(r).isEqual(du(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const c=As(o.timestampValue),m=As(u.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,u){return Rs(o.bytesValue).isEqual(Rs(u.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,u){return _t(o.geoPointValue.latitude)===_t(u.geoPointValue.latitude)&&_t(o.geoPointValue.longitude)===_t(u.geoPointValue.longitude)}(r,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return _t(o.integerValue)===_t(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const c=_t(o.doubleValue),m=_t(u.doubleValue);return c===m?qh(c)===qh(m):isNaN(c)&&isNaN(m)}return!1}(r,e);case 9:return Oo(r.arrayValue.values||[],e.arrayValue.values||[],Dr);case 10:case 11:return function(o,u){const c=o.mapValue.fields||{},m=u.mapValue.fields||{};if(b0(c)!==b0(m))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(m[p]===void 0||!Dr(c[p],m[p])))return!1;return!0}(r,e);default:return Te(52216,{left:r})}}function pu(r,e){return(r.values||[]).find(n=>Dr(n,e))!==void 0}function ko(r,e){if(r===e)return 0;const n=Is(r),s=Is(e);if(n!==s)return De(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return De(r.booleanValue,e.booleanValue);case 2:return function(u,c){const m=_t(u.integerValue||u.doubleValue),p=_t(c.integerValue||c.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1}(r,e);case 3:return R0(r.timestampValue,e.timestampValue);case 4:return R0(du(r),du(e));case 5:return Tp(r.stringValue,e.stringValue);case 6:return function(u,c){const m=Rs(u),p=Rs(c);return m.compareTo(p)}(r.bytesValue,e.bytesValue);case 7:return function(u,c){const m=u.split("/"),p=c.split("/");for(let g=0;g<m.length&&g<p.length;g++){const _=De(m[g],p[g]);if(_!==0)return _}return De(m.length,p.length)}(r.referenceValue,e.referenceValue);case 8:return function(u,c){const m=De(_t(u.latitude),_t(c.latitude));return m!==0?m:De(_t(u.longitude),_t(c.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return I0(r.arrayValue,e.arrayValue);case 10:return function(u,c){var m,p,g,_;const w=u.fields||{},I=c.fields||{},M=(m=w[Hh])===null||m===void 0?void 0:m.arrayValue,U=(p=I[Hh])===null||p===void 0?void 0:p.arrayValue,$=De(((g=M==null?void 0:M.values)===null||g===void 0?void 0:g.length)||0,((_=U==null?void 0:U.values)===null||_===void 0?void 0:_.length)||0);return $!==0?$:I0(M,U)}(r.mapValue,e.mapValue);case 11:return function(u,c){if(u===ph.mapValue&&c===ph.mapValue)return 0;if(u===ph.mapValue)return 1;if(c===ph.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),g=c.fields||{},_=Object.keys(g);p.sort(),_.sort();for(let w=0;w<p.length&&w<_.length;++w){const I=Tp(p[w],_[w]);if(I!==0)return I;const M=ko(m[p[w]],g[_[w]]);if(M!==0)return M}return De(p.length,_.length)}(r.mapValue,e.mapValue);default:throw Te(23264,{le:n})}}function R0(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return De(r,e);const n=As(r),s=As(e),o=De(n.seconds,s.seconds);return o!==0?o:De(n.nanos,s.nanos)}function I0(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=ko(n[o],s[o]);if(u)return u}return De(n.length,s.length)}function Mo(r){return wp(r)}function wp(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(n){const s=As(n);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(n){return Rs(n).toBase64()}(r.bytesValue):"referenceValue"in r?function(n){return ye.fromName(n).toString()}(r.referenceValue):"geoPointValue"in r?function(n){return`geo(${n.latitude},${n.longitude})`}(r.geoPointValue):"arrayValue"in r?function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=wp(u);return s+"]"}(r.arrayValue):"mapValue"in r?function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const c of s)u?u=!1:o+=",",o+=`${c}:${wp(n.fields[c])}`;return o+"}"}(r.mapValue):Te(61005,{value:r})}function Ah(r){switch(Is(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=yf(r);return e?16+Ah(e):16;case 5:return 2*r.stringValue.length;case 6:return Rs(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+Ah(u),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return Ms(s.fields,(u,c)=>{o+=u.length+Ah(c)}),o}(r.mapValue);default:throw Te(13486,{value:r})}}function C0(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Sp(r){return!!r&&"integerValue"in r}function mg(r){return!!r&&"arrayValue"in r}function N0(r){return!!r&&"nullValue"in r}function x0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Rh(r){return!!r&&"mapValue"in r}function KD(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[RS])===null||n===void 0?void 0:n.stringValue)===IS}function iu(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Ms(r.mapValue.fields,(n,s)=>e.mapValue.fields[n]=iu(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=iu(r.arrayValue.values[n]);return e}return Object.assign({},r)}function QD(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===$D}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.value=e}static empty(){return new _n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Rh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=iu(n)}setAll(e){let n=Qt.emptyPath(),s={},o=[];e.forEach((c,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}c?s[m.lastSegment()]=iu(c):o.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());Rh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Dr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];Rh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){Ms(n,(o,u)=>e[o]=u);for(const o of s)delete e[o]}clone(){return new _n(iu(this.value))}}function CS(r){const e=[];return Ms(r.fields,(n,s)=>{const o=new Qt([n]);if(Rh(s)){const u=CS(s.mapValue).fields;if(u.length===0)e.push(o);else for(const c of u)e.push(o.child(c))}else e.push(o)}),new On(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,n,s,o,u,c,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=c,this.documentState=m}static newInvalidDocument(e){return new tn(e,0,Se.min(),Se.min(),Se.min(),_n.empty(),0)}static newFoundDocument(e,n,s,o){return new tn(e,1,n,Se.min(),s,o,0)}static newNoDocument(e,n){return new tn(e,2,n,Se.min(),Se.min(),_n.empty(),0)}static newUnknownDocument(e,n){return new tn(e,3,n,Se.min(),Se.min(),_n.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n){this.position=e,this.inclusive=n}}function D0(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],c=r.position[o];if(u.field.isKeyField()?s=ye.comparator(ye.fromName(c.referenceValue),n.key):s=ko(c,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function O0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Dr(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,n="asc"){this.field=e,this.dir=n}}function YD(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{}class It extends NS{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new WD(e,n,s):n==="array-contains"?new eO(e,s):n==="in"?new tO(e,s):n==="not-in"?new nO(e,s):n==="array-contains-any"?new rO(e,s):new It(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new JD(e,s):new ZD(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ko(n,this.value)):n!==null&&Is(this.value)===Is(n)&&this.matchesComparison(ko(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class lr extends NS{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new lr(e,n)}matches(e){return xS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function xS(r){return r.op==="and"}function DS(r){return XD(r)&&xS(r)}function XD(r){for(const e of r.filters)if(e instanceof lr)return!1;return!0}function bp(r){if(r instanceof It)return r.field.canonicalString()+r.op.toString()+Mo(r.value);if(DS(r))return r.filters.map(e=>bp(e)).join(",");{const e=r.filters.map(n=>bp(n)).join(",");return`${r.op}(${e})`}}function OS(r,e){return r instanceof It?function(s,o){return o instanceof It&&s.op===o.op&&s.field.isEqual(o.field)&&Dr(s.value,o.value)}(r,e):r instanceof lr?function(s,o){return o instanceof lr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,c,m)=>u&&OS(c,o.filters[m]),!0):!1}(r,e):void Te(19439)}function kS(r){return r instanceof It?function(n){return`${n.field.canonicalString()} ${n.op} ${Mo(n.value)}`}(r):r instanceof lr?function(n){return n.op.toString()+" {"+n.getFilters().map(kS).join(" ,")+"}"}(r):"Filter"}class WD extends It{constructor(e,n,s){super(e,n,s),this.key=ye.fromName(s.referenceValue)}matches(e){const n=ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class JD extends It{constructor(e,n){super(e,"in",n),this.keys=MS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class ZD extends It{constructor(e,n){super(e,"not-in",n),this.keys=MS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function MS(r,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>ye.fromName(s.referenceValue))}class eO extends It{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return mg(n)&&pu(n.arrayValue,this.value)}}class tO extends It{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&pu(this.value.arrayValue,n)}}class nO extends It{constructor(e,n){super(e,"not-in",n)}matches(e){if(pu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!pu(this.value.arrayValue,n)}}class rO extends It{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!mg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>pu(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e,n=null,s=[],o=[],u=null,c=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=c,this.endAt=m,this.Pe=null}}function k0(r,e=null,n=[],s=[],o=null,u=null,c=null){return new iO(r,e,n,s,o,u,c)}function pg(r){const e=Ae(r);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>bp(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),gf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Mo(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Mo(s)).join(",")),e.Pe=n}return e.Pe}function gg(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!YD(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!OS(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!O0(r.startAt,e.startAt)&&O0(r.endAt,e.endAt)}function Ap(r){return ye.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,n=null,s=[],o=[],u=null,c="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=p,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function sO(r,e,n,s,o,u,c,m){return new Nu(r,e,n,s,o,u,c,m)}function vf(r){return new Nu(r)}function M0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function VS(r){return r.collectionGroup!==null}function su(r){const e=Ae(r);if(e.Te===null){e.Te=[];const n=new Set;for(const u of e.explicitOrderBy)e.Te.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new Dt(Qt.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(m=m.add(g.field))})}),m})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.Te.push(new $h(u,s))}),n.has(Qt.keyField().canonicalString())||e.Te.push(new $h(Qt.keyField(),s))}return e.Te}function Rr(r){const e=Ae(r);return e.Ie||(e.Ie=aO(e,su(r))),e.Ie}function aO(r,e){if(r.limitType==="F")return k0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new $h(o.field,u)});const n=r.endAt?new Gh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Gh(r.startAt.position,r.startAt.inclusive):null;return k0(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function Rp(r,e){const n=r.filters.concat([e]);return new Nu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function Ip(r,e,n){return new Nu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function _f(r,e){return gg(Rr(r),Rr(e))&&r.limitType===e.limitType}function PS(r){return`${pg(Rr(r))}|lt:${r.limitType}`}function So(r){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(o=>kS(o)).join(", ")}]`),gf(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(o=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(o)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(o=>Mo(o)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(o=>Mo(o)).join(",")),`Target(${s})`}(Rr(r))}; limitType=${r.limitType})`}function Ef(r,e){return e.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):ye.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(r,e)&&function(s,o){for(const u of su(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(c,m,p){const g=D0(c,m,p);return c.inclusive?g<=0:g<0}(s.startAt,su(s),o)||s.endAt&&!function(c,m,p){const g=D0(c,m,p);return c.inclusive?g>=0:g>0}(s.endAt,su(s),o))}(r,e)}function oO(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function LS(r){return(e,n)=>{let s=!1;for(const o of su(r)){const u=lO(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function lO(r,e,n){const s=r.field.isKeyField()?ye.comparator(e.key,n.key):function(u,c,m){const p=c.data.field(u),g=m.data.field(u);return p!==null&&g!==null?ko(p,g):Te(42886)}(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Te(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ms(this.inner,(n,s)=>{for(const[o,u]of s)e(o,u)})}isEmpty(){return ES(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO=new ct(ye.comparator);function _i(){return uO}const US=new ct(ye.comparator);function Jl(...r){let e=US;for(const n of r)e=e.insert(n.key,n);return e}function jS(r){let e=US;return r.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function pa(){return au()}function zS(){return au()}function au(){return new Na(r=>r.toString(),(r,e)=>r.isEqual(e))}const cO=new ct(ye.comparator),hO=new Dt(ye.comparator);function Le(...r){let e=hO;for(const n of r)e=e.add(n);return e}const fO=new Dt(De);function dO(){return fO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qh(e)?"-0":e}}function BS(r){return{integerValue:""+r}}function mO(r,e){return BD(e)?BS(e):yg(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(){this._=void 0}}function pO(r,e,n){return r instanceof Kh?function(o,u){const c={fields:{[SS]:{stringValue:wS},[AS]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&dg(u)&&(u=yf(u)),u&&(c.fields[bS]=u),{mapValue:c}}(n,e):r instanceof gu?FS(r,e):r instanceof yu?HS(r,e):function(o,u){const c=qS(o,u),m=V0(c)+V0(o.Ee);return Sp(c)&&Sp(o.Ee)?BS(m):yg(o.serializer,m)}(r,e)}function gO(r,e,n){return r instanceof gu?FS(r,e):r instanceof yu?HS(r,e):n}function qS(r,e){return r instanceof Qh?function(s){return Sp(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class Kh extends Tf{}class gu extends Tf{constructor(e){super(),this.elements=e}}function FS(r,e){const n=GS(e);for(const s of r.elements)n.some(o=>Dr(o,s))||n.push(s);return{arrayValue:{values:n}}}class yu extends Tf{constructor(e){super(),this.elements=e}}function HS(r,e){let n=GS(e);for(const s of r.elements)n=n.filter(o=>!Dr(o,s));return{arrayValue:{values:n}}}class Qh extends Tf{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function V0(r){return _t(r.integerValue||r.doubleValue)}function GS(r){return mg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function yO(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof gu&&o instanceof gu||s instanceof yu&&o instanceof yu?Oo(s.elements,o.elements,Dr):s instanceof Qh&&o instanceof Qh?Dr(s.Ee,o.Ee):s instanceof Kh&&o instanceof Kh}(r.transform,e.transform)}class vO{constructor(e,n){this.version=e,this.transformResults=n}}class Qn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Qn}static exists(e){return new Qn(void 0,e)}static updateTime(e){return new Qn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ih(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class wf{}function $S(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new vg(r.key,Qn.none()):new xu(r.key,r.data,Qn.none());{const n=r.data,s=_n.empty();let o=new Dt(Qt.comparator);for(let u of e.fields)if(!o.has(u)){let c=n.field(u);c===null&&u.length>1&&(u=u.popLast(),c=n.field(u)),c===null?s.delete(u):s.set(u,c),o=o.add(u)}return new Vs(r.key,s,new On(o.toArray()),Qn.none())}}function _O(r,e,n){r instanceof xu?function(o,u,c){const m=o.value.clone(),p=L0(o.fieldTransforms,u,c.transformResults);m.setAll(p),u.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(r,e,n):r instanceof Vs?function(o,u,c){if(!Ih(o.precondition,u))return void u.convertToUnknownDocument(c.version);const m=L0(o.fieldTransforms,u,c.transformResults),p=u.data;p.setAll(KS(o)),p.setAll(m),u.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(r,e,n):function(o,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,n)}function ou(r,e,n,s){return r instanceof xu?function(u,c,m,p){if(!Ih(u.precondition,c))return m;const g=u.value.clone(),_=U0(u.fieldTransforms,p,c);return g.setAll(_),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null}(r,e,n,s):r instanceof Vs?function(u,c,m,p){if(!Ih(u.precondition,c))return m;const g=U0(u.fieldTransforms,p,c),_=c.data;return _.setAll(KS(u)),_.setAll(g),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(w=>w.field))}(r,e,n,s):function(u,c,m){return Ih(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m}(r,e,n)}function EO(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=qS(s.transform,o||null);u!=null&&(n===null&&(n=_n.empty()),n.set(s.field,u))}return n||null}function P0(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Oo(s,o,(u,c)=>yO(u,c))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class xu extends wf{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Vs extends wf{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function KS(r){const e=new Map;return r.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}}),e}function L0(r,e,n){const s=new Map;Qe(r.length===n.length,32656,{Ae:n.length,Re:r.length});for(let o=0;o<n.length;o++){const u=r[o],c=u.transform,m=e.data.field(u.field);s.set(u.field,gO(c,m,n[o]))}return s}function U0(r,e,n){const s=new Map;for(const o of r){const u=o.transform,c=n.data.field(o.field);s.set(o.field,pO(u,c,e))}return s}class vg extends wf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TO extends wf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&_O(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=ou(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=ou(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=zS();return this.mutations.forEach(o=>{const u=e.get(o.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=n.has(o.key)?null:m;const p=$S(c,m);p!==null&&s.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Se.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Le())}isEqual(e){return this.batchId===e.batchId&&Oo(this.mutations,e.mutations,(n,s)=>P0(n,s))&&Oo(this.baseMutations,e.baseMutations,(n,s)=>P0(n,s))}}class _g{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Qe(e.mutations.length===s.length,58842,{Ve:e.mutations.length,me:s.length});let o=function(){return cO}();const u=e.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,s[c].version);return new _g(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rt,ze;function AO(r){switch(r){case te.OK:return Te(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Te(15467,{code:r})}}function QS(r){if(r===void 0)return vi("GRPC error has no .code"),te.UNKNOWN;switch(r){case Rt.OK:return te.OK;case Rt.CANCELLED:return te.CANCELLED;case Rt.UNKNOWN:return te.UNKNOWN;case Rt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Rt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Rt.INTERNAL:return te.INTERNAL;case Rt.UNAVAILABLE:return te.UNAVAILABLE;case Rt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Rt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Rt.NOT_FOUND:return te.NOT_FOUND;case Rt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Rt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Rt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Rt.ABORTED:return te.ABORTED;case Rt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Rt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Rt.DATA_LOSS:return te.DATA_LOSS;default:return Te(39323,{code:r})}}(ze=Rt||(Rt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO=new vs([4294967295,4294967295],0);function j0(r){const e=gS().encode(r),n=new lS;return n.update(e),new Uint8Array(n.digest())}function z0(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new vs([n,s],0),new vs([o,u],0)]}class Eg{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Zl(`Invalid padding: ${n}`);if(s<0)throw new Zl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Zl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Zl(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=vs.fromNumber(this.fe)}pe(e,n,s){let o=e.add(n.multiply(vs.fromNumber(s)));return o.compare(RO)===1&&(o=new vs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=j0(e),[s,o]=z0(n);for(let u=0;u<this.hashCount;u++){const c=this.pe(s,o,u);if(!this.ye(c))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),c=new Eg(u,o,n);return s.forEach(m=>c.insert(m)),c}insert(e){if(this.fe===0)return;const n=j0(e),[s,o]=z0(n);for(let u=0;u<this.hashCount;u++){const c=this.pe(s,o,u);this.we(c)}}we(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Zl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Du.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Sf(Se.min(),o,new ct(De),_i(),Le())}}class Du{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Du(s,n,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n,s,o){this.Se=e,this.removedTargetIds=n,this.key=s,this.be=o}}class YS{constructor(e,n){this.targetId=e,this.De=n}}class XS{constructor(e,n,s=Yt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class B0{constructor(){this.ve=0,this.Ce=q0(),this.Fe=Yt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Le(),n=Le(),s=Le();return this.Ce.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Te(38017,{changeType:u})}}),new Du(this.Fe,this.Me,e,n,s)}ke(){this.xe=!1,this.Ce=q0()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class IO{constructor(e){this.We=e,this.Ge=new Map,this.ze=_i(),this.je=gh(),this.Je=gh(),this.He=new ct(De)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const s=this.tt(n);switch(e.state){case 0:this.nt(n)&&s.Be(e.resumeToken);break;case 1:s.Ue(),s.Oe||s.ke(),s.Be(e.resumeToken);break;case 2:s.Ue(),s.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(s.Ke(),s.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),s.Be(e.resumeToken));break;default:Te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((s,o)=>{this.nt(o)&&n(o)})}it(e){const n=e.targetId,s=e.De.count,o=this.st(n);if(o){const u=o.target;if(Ap(u))if(s===0){const c=new ye(u.path);this.Xe(n,c,tn.newNoDocument(c,Se.min()))}else Qe(s===1,20013,{expectedCount:s});else{const c=this.ot(n);if(c!==s){const m=this._t(e),p=m?this.ut(m,e,c):1;if(p!==0){this.rt(n);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,g)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let c,m;try{c=Rs(s).toUint8Array()}catch(p){if(p instanceof TS)return Ss("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Eg(c,o,u)}catch(p){return Ss(p instanceof Zl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.fe===0?null:m}ut(e,n,s){return n.De.count===s-this.ht(e,n.targetId)?0:2}ht(e,n){const s=this.We.getRemoteKeysForTarget(n);let o=0;return s.forEach(u=>{const c=this.We.lt(),m=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.Xe(n,u,null),o++)}),o}Pt(e){const n=new Map;this.Ge.forEach((u,c)=>{const m=this.st(c);if(m){if(u.current&&Ap(m.target)){const p=new ye(m.target.path);this.Tt(p).has(c)||this.It(c,p)||this.Xe(c,p,tn.newNoDocument(p,e))}u.Ne&&(n.set(c,u.Le()),u.ke())}});let s=Le();this.Je.forEach((u,c)=>{let m=!0;c.forEachWhile(p=>{const g=this.st(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(u))}),this.ze.forEach((u,c)=>c.setReadTime(e));const o=new Sf(e,n,this.He,this.ze,s);return this.ze=_i(),this.je=gh(),this.Je=gh(),this.He=new ct(De),o}Ze(e,n){if(!this.nt(e))return;const s=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,s),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,s){if(!this.nt(e))return;const o=this.tt(e);this.It(e,n)?o.qe(n,1):o.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),s&&(this.ze=this.ze.insert(n,s))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new B0,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Dt(De),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Dt(De),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||ce("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new B0),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function gh(){return new ct(ye.comparator)}function q0(){return new ct(ye.comparator)}const CO={asc:"ASCENDING",desc:"DESCENDING"},NO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xO={and:"AND",or:"OR"};class DO{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Cp(r,e){return r.useProto3Json||gf(e)?e:{value:e}}function Yh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WS(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function OO(r,e){return Yh(r,e.toTimestamp())}function Ir(r){return Qe(!!r,49232),Se.fromTimestamp(function(n){const s=As(n);return new st(s.seconds,s.nanos)}(r))}function Tg(r,e){return Np(r,e).canonicalString()}function Np(r,e){const n=function(o){return new tt(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?n:n.child(e)}function JS(r){const e=tt.fromString(r);return Qe(rb(e),10190,{key:e.toString()}),e}function xp(r,e){return Tg(r.databaseId,e.path)}function np(r,e){const n=JS(e);if(n.get(1)!==r.databaseId.projectId)throw new ue(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new ue(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new ye(eb(n))}function ZS(r,e){return Tg(r.databaseId,e)}function kO(r){const e=JS(r);return e.length===4?tt.emptyPath():eb(e)}function Dp(r){return new tt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function eb(r){return Qe(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function F0(r,e,n){return{name:xp(r,e),fields:n.value.mapValue.fields}}function MO(r,e){let n;if("targetChange"in e){e.targetChange;const s=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Te(39313,{state:g})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(g,_){return g.useProto3Json?(Qe(_===void 0||typeof _=="string",58123),Yt.fromBase64String(_||"")):(Qe(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Yt.fromUint8Array(_||new Uint8Array))}(r,e.targetChange.resumeToken),c=e.targetChange.cause,m=c&&function(g){const _=g.code===void 0?te.UNKNOWN:QS(g.code);return new ue(_,g.message||"")}(c);n=new XS(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=np(r,s.document.name),u=Ir(s.document.updateTime),c=s.document.createTime?Ir(s.document.createTime):Se.min(),m=new _n({mapValue:{fields:s.document.fields}}),p=tn.newFoundDocument(o,u,c,m),g=s.targetIds||[],_=s.removedTargetIds||[];n=new Ch(g,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=np(r,s.document),u=s.readTime?Ir(s.readTime):Se.min(),c=tn.newNoDocument(o,u),m=s.removedTargetIds||[];n=new Ch([],m,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=np(r,s.document),u=s.removedTargetIds||[];n=new Ch([],u,o,null)}else{if(!("filter"in e))return Te(11601,{At:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,c=new bO(o,u),m=s.targetId;n=new YS(m,c)}}return n}function VO(r,e){let n;if(e instanceof xu)n={update:F0(r,e.key,e.value)};else if(e instanceof vg)n={delete:xp(r,e.key)};else if(e instanceof Vs)n={update:F0(r,e.key,e.data),updateMask:HO(e.fieldMask)};else{if(!(e instanceof TO))return Te(16599,{Rt:e.type});n={verify:xp(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(u,c){const m=c.transform;if(m instanceof Kh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof gu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof yu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Qh)return{fieldPath:c.field.canonicalString(),increment:m.Ee};throw Te(20930,{transform:c.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:OO(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Te(27497)}(r,e.precondition)),n}function PO(r,e){return r&&r.length>0?(Qe(e!==void 0,14353),r.map(n=>function(o,u){let c=o.updateTime?Ir(o.updateTime):Ir(u);return c.isEqual(Se.min())&&(c=Ir(u)),new vO(c,o.transformResults||[])}(n,e))):[]}function LO(r,e){return{documents:[ZS(r,e.path)]}}function UO(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=ZS(r,o);const u=function(g){if(g.length!==0)return nb(lr.create(g,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const c=function(g){if(g.length!==0)return g.map(_=>function(I){return{field:bo(I.field),direction:BO(I.dir)}}(_))}(e.orderBy);c&&(n.structuredQuery.orderBy=c);const m=Cp(r,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{Vt:n,parent:o}}function jO(r){let e=kO(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Qe(s===1,65062);const _=n.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let u=[];n.where&&(u=function(w){const I=tb(w);return I instanceof lr&&DS(I)?I.getFilters():[I]}(n.where));let c=[];n.orderBy&&(c=function(w){return w.map(I=>function(U){return new $h(Ao(U.field),function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(U.direction))}(I))}(n.orderBy));let m=null;n.limit&&(m=function(w){let I;return I=typeof w=="object"?w.value:w,gf(I)?null:I}(n.limit));let p=null;n.startAt&&(p=function(w){const I=!!w.before,M=w.values||[];return new Gh(M,I)}(n.startAt));let g=null;return n.endAt&&(g=function(w){const I=!w.before,M=w.values||[];return new Gh(M,I)}(n.endAt)),sO(e,o,c,u,m,"F",p,g)}function zO(r,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function tb(r){return r.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ao(n.unaryFilter.field);return It.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Ao(n.unaryFilter.field);return It.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Ao(n.unaryFilter.field);return It.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Ao(n.unaryFilter.field);return It.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}}(r):r.fieldFilter!==void 0?function(n){return It.create(Ao(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(n){return lr.create(n.compositeFilter.filters.map(s=>tb(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te(1026)}}(n.compositeFilter.op))}(r):Te(30097,{filter:r})}function BO(r){return CO[r]}function qO(r){return NO[r]}function FO(r){return xO[r]}function bo(r){return{fieldPath:r.canonicalString()}}function Ao(r){return Qt.fromServerFormat(r.fieldPath)}function nb(r){return r instanceof It?function(n){if(n.op==="=="){if(x0(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NAN"}};if(N0(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(x0(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NOT_NAN"}};if(N0(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bo(n.field),op:qO(n.op),value:n.value}}}(r):r instanceof lr?function(n){const s=n.getFilters().map(o=>nb(o));return s.length===1?s[0]:{compositeFilter:{op:FO(n.op),filters:s}}}(r):Te(54877,{filter:r})}function HO(r){const e=[];return r.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function rb(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,n,s,o,u=Se.min(),c=Se.min(),m=Yt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new ps(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e){this.gt=e}}function $O(r){const e=jO({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Ip(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(){this.Dn=new QO}addToCollectionParentIndex(e,n){return this.Dn.add(n),ne.resolve()}getCollectionParents(e,n){return ne.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return ne.resolve()}deleteFieldIndex(e,n){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,n){return ne.resolve()}getDocumentsMatchingTarget(e,n){return ne.resolve(null)}getIndexType(e,n){return ne.resolve(0)}getFieldIndexes(e,n){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,n){return ne.resolve(bs.min())}getMinOffsetFromCollectionGroup(e,n){return ne.resolve(bs.min())}updateCollectionGroup(e,n,s){return ne.resolve()}updateIndexEntries(e,n){return ne.resolve()}}class QO{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Dt(tt.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Dt(tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ib=41943040;class vn{static withCacheSize(e){return new vn(e,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vn.DEFAULT_COLLECTION_PERCENTILE=10,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vn.DEFAULT=new vn(ib,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vn.DISABLED=new vn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Vo(0)}static ur(){return new Vo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0="LruGarbageCollector",YO=1048576;function $0([r,e],[n,s]){const o=De(r,n);return o===0?De(e,s):o}class XO{constructor(e){this.Tr=e,this.buffer=new Dt($0),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();$0(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class WO{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ce(G0,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Fo(n)?ce(G0,"Ignoring IndexedDB error during garbage collection: ",n):await qo(n)}await this.Rr(3e5)})}}class JO{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return ne.resolve(pf.ue);const s=new XO(n);return this.Vr.forEachTarget(e,o=>s.Er(o.sequenceNumber)).next(()=>this.Vr.gr(e,o=>s.Er(o))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.Vr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(H0)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),H0):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let s,o,u,c,m,p,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,c=Date.now(),this.nthSequenceNumber(e,o))).next(w=>(s=w,m=Date.now(),this.removeTargets(e,s,n))).next(w=>(u=w,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(w=>(g=Date.now(),wo()<=Pe.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${o} in `+(m-c)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${w} documents in `+(g-p)+`ms
Total Duration: ${g-_}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:w})))}}function ZO(r,e){return new JO(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(){this.changes=new Na(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ne.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(s!==null&&ou(s.mutation,o,On.empty(),st.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Le()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Le()){const o=pa();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,s).next(u=>{let c=Jl();return u.forEach((m,p)=>{c=c.insert(m,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,n){const s=pa();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Le()))}populateOverlays(e,n,s){const o=[];return s.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((c,m)=>{n.set(c,m)})})}computeViews(e,n,s,o){let u=_i();const c=au(),m=function(){return au()}();return n.forEach((p,g)=>{const _=s.get(g.key);o.has(g.key)&&(_===void 0||_.mutation instanceof Vs)?u=u.insert(g.key,g):_!==void 0?(c.set(g.key,_.mutation.getFieldMask()),ou(_.mutation,g,_.mutation.getFieldMask(),st.now())):c.set(g.key,On.empty())}),this.recalculateAndSaveOverlays(e,u).next(p=>(p.forEach((g,_)=>c.set(g,_)),n.forEach((g,_)=>{var w;return m.set(g,new tk(_,(w=c.get(g))!==null&&w!==void 0?w:null))}),m))}recalculateAndSaveOverlays(e,n){const s=au();let o=new ct((c,m)=>c-m),u=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(c=>{for(const m of c)m.keys().forEach(p=>{const g=n.get(p);if(g===null)return;let _=s.get(p)||On.empty();_=m.applyToLocalView(g,_),s.set(p,_);const w=(o.get(m.batchId)||Le()).add(p);o=o.insert(m.batchId,w)})}).next(()=>{const c=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,_=p.value,w=zS();_.forEach(I=>{if(!u.has(I)){const M=$S(n.get(I),s.get(I));M!==null&&w.set(I,M),u=u.add(I)}}),c.push(this.documentOverlayCache.saveOverlays(e,g,w))}return ne.waitFor(c)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,o){return function(c){return ye.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):VS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next(u=>{const c=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):ne.resolve(pa());let m=fu,p=u;return c.next(g=>ne.forEach(g,(_,w)=>(m<w.largestBatchId&&(m=w.largestBatchId),u.get(_)?ne.resolve():this.remoteDocumentCache.getEntry(e,_).next(I=>{p=p.insert(_,I)}))).next(()=>this.populateOverlays(e,g,u)).next(()=>this.computeViews(e,p,g,Le())).next(_=>({batchId:m,changes:jS(_)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ye(n)).next(s=>{let o=Jl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let c=Jl();return this.indexManager.getCollectionParents(e,u).next(m=>ne.forEach(m,p=>{const g=function(w,I){return new Nu(I,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next(_=>{_.forEach((w,I)=>{c=c.insert(w,I)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o))).next(c=>{u.forEach((p,g)=>{const _=g.getKey();c.get(_)===null&&(c=c.insert(_,tn.newInvalidDocument(_)))});let m=Jl();return c.forEach((p,g)=>{const _=u.get(p);_!==void 0&&ou(_.mutation,g,On.empty(),st.now()),Ef(n,g)&&(m=m.insert(p,g))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return ne.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(o){return{id:o.id,version:o.version,createTime:Ir(o.createTime)}}(n)),ne.resolve()}getNamedQuery(e,n){return ne.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(o){return{name:o.name,query:$O(o.bundledQuery),readTime:Ir(o.readTime)}}(n)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(){this.overlays=new ct(ye.comparator),this.kr=new Map}getOverlay(e,n){return ne.resolve(this.overlays.get(n))}getOverlays(e,n){const s=pa();return ne.forEach(n,o=>this.getOverlay(e,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((o,u)=>{this.wt(e,n,u)}),ne.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.kr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.kr.delete(s)),ne.resolve()}getOverlaysForCollection(e,n,s){const o=pa(),u=n.length+1,c=new ye(n.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return ne.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new ct((g,_)=>g-_);const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>s){let _=u.get(g.largestBatchId);_===null&&(_=pa(),u=u.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const m=pa(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,_)=>m.set(g,_)),!(m.size()>=o)););return ne.resolve(m)}wt(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const c=this.kr.get(o.largestBatchId).delete(s.key);this.kr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new SO(n,s));let u=this.kr.get(n);u===void 0&&(u=Le(),this.kr.set(n,u)),this.kr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(){this.sessionToken=Yt.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(){this.qr=new Dt(Lt.Qr),this.$r=new Dt(Lt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const s=new Lt(e,n);this.qr=this.qr.add(s),this.$r=this.$r.add(s)}Kr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Wr(new Lt(e,n))}Gr(e,n){e.forEach(s=>this.removeReference(s,n))}zr(e){const n=new ye(new tt([])),s=new Lt(n,e),o=new Lt(n,e+1),u=[];return this.$r.forEachInRange([s,o],c=>{this.Wr(c),u.push(c.key)}),u}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new ye(new tt([])),s=new Lt(n,e),o=new Lt(n,e+1);let u=Le();return this.$r.forEachInRange([s,o],c=>{u=u.add(c.key)}),u}containsKey(e){const n=new Lt(e,0),s=this.qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Lt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return ye.comparator(e.key,n.key)||De(e.Hr,n.Hr)}static Ur(e,n){return De(e.Hr,n.Hr)||ye.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Dt(Lt.Qr)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new wO(u,n,s,o);this.mutationQueue.push(c);for(const m of o)this.Yr=this.Yr.add(new Lt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ne.resolve(c)}lookupMutationBatch(e,n){return ne.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.Xr(s),u=o<0?0:o;return ne.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?fg:this.er-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Lt(n,0),o=new Lt(n,Number.POSITIVE_INFINITY),u=[];return this.Yr.forEachInRange([s,o],c=>{const m=this.Zr(c.Hr);u.push(m)}),ne.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Dt(De);return n.forEach(o=>{const u=new Lt(o,0),c=new Lt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([u,c],m=>{s=s.add(m.Hr)})}),ne.resolve(this.ei(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;ye.isDocumentKey(u)||(u=u.child(""));const c=new Lt(new ye(u),0);let m=new Dt(De);return this.Yr.forEachWhile(p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(m=m.add(p.Hr)),!0)},c),ne.resolve(this.ei(m))}ei(e){const n=[];return e.forEach(s=>{const o=this.Zr(s);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){Qe(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Yr;return ne.forEach(n.mutations,o=>{const u=new Lt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Yr=s})}rr(e){}containsKey(e,n){const s=new Lt(n,0),o=this.Yr.firstAfterOrEqual(s);return ne.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e){this.ni=e,this.docs=function(){return new ct(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,c=this.ni(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ne.resolve(s?s.document.mutableCopy():tn.newInvalidDocument(n))}getEntries(e,n){let s=_i();return n.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():tn.newInvalidDocument(o))}),ne.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=_i();const c=n.path,m=new ye(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:_}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||LD(PD(_),s)<=0||(o.has(_.key)||Ef(n,_))&&(u=u.insert(_.key,_.mutableCopy()))}return ne.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Te(9500)}ri(e,n){return ne.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new lk(this)}getSize(e){return ne.resolve(this.size)}}class lk extends ek{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?n.push(this.Or.addEntry(e,o)):this.Or.removeEntry(s)}),ne.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e){this.persistence=e,this.ii=new Na(n=>pg(n),gg),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.si=0,this.oi=new wg,this.targetCount=0,this._i=Vo.ar()}forEachTarget(e,n){return this.ii.forEach((s,o)=>n(o)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.si&&(this.si=n),ne.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Vo(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,ne.resolve()}updateTargetData(e,n){return this.hr(n),ne.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.ii.forEach((c,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.ii.delete(c),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),ne.waitFor(u).next(()=>o)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,n){const s=this.ii.get(n)||null;return ne.resolve(s)}addMatchingKeys(e,n,s){return this.oi.Kr(n,s),ne.resolve()}removeMatchingKeys(e,n,s){this.oi.Gr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(c=>{u.push(o.markPotentiallyOrphaned(e,c))}),ne.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),ne.resolve()}getMatchingKeysForTargetId(e,n){const s=this.oi.Jr(n);return ne.resolve(s)}containsKey(e,n){return ne.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e,n){this.ai={},this.overlays={},this.ui=new pf(0),this.ci=!1,this.ci=!0,this.li=new sk,this.referenceDelegate=e(this),this.hi=new uk(this),this.indexManager=new KO,this.remoteDocumentCache=function(o){return new ok(o)}(s=>this.referenceDelegate.Pi(s)),this.serializer=new GO(n),this.Ti=new rk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ik,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ai[e.toKey()];return s||(s=new ak(n,this.referenceDelegate),this.ai[e.toKey()]=s),s}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,s){ce("MemoryPersistence","Starting transaction:",e);const o=new ck(this.ui.next());return this.referenceDelegate.Ii(),s(o).next(u=>this.referenceDelegate.di(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ei(e,n){return ne.or(Object.values(this.ai).map(s=>()=>s.containsKey(e,n)))}}class ck extends jD{constructor(e){super(),this.currentSequenceNumber=e}}class Sg{constructor(e){this.persistence=e,this.Ai=new wg,this.Ri=null}static Vi(e){return new Sg(e)}get mi(){if(this.Ri)return this.Ri;throw Te(60996)}addReference(e,n,s){return this.Ai.addReference(s,n),this.mi.delete(s.toString()),ne.resolve()}removeReference(e,n,s){return this.Ai.removeReference(s,n),this.mi.add(s.toString()),ne.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),ne.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(o=>this.mi.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(u=>this.mi.add(u.toString()))}).next(()=>s.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.mi,s=>{const o=ye.fromPath(s);return this.fi(e,o).next(u=>{u||n.removeEntry(o,Se.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(s=>{s?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return ne.or([()=>ne.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Xh{constructor(e,n){this.persistence=e,this.gi=new Na(s=>qD(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=ZO(this,n)}static Vi(e,n){return new Xh(e,n)}Ii(){}di(e){return ne.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(o=>s+o))}yr(e){let n=0;return this.gr(e,s=>{n++}).next(()=>n)}gr(e,n){return ne.forEach(this.gi,(s,o)=>this.Sr(e,s,o).next(u=>u?ne.resolve():n(o)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ri(e,c=>this.Sr(e,c,n).next(m=>{m||(s++,u.removeEntry(c,Se.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),ne.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.gi.set(s,e.currentSequenceNumber),ne.resolve()}removeReference(e,n,s){return this.gi.set(s,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),ne.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ah(e.data.value)),n}Sr(e,n,s){return ne.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.gi.get(n);return ne.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Is=s,this.ds=o}static Es(e,n){let s=Le(),o=Le();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new bg(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return wI()?8:zD(rn())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ps(e,n).next(c=>{u.result=c}).next(()=>{if(!u.result)return this.ys(e,n,o,s).next(c=>{u.result=c})}).next(()=>{if(u.result)return;const c=new hk;return this.ws(e,n,c).next(m=>{if(u.result=m,this.Rs)return this.Ss(e,n,c,m.size)})}).next(()=>u.result)}Ss(e,n,s,o){return s.documentReadCount<this.Vs?(wo()<=Pe.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",So(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ne.resolve()):(wo()<=Pe.DEBUG&&ce("QueryEngine","Query:",So(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.fs*o?(wo()<=Pe.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",So(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rr(n))):ne.resolve())}ps(e,n){if(M0(n))return ne.resolve(null);let s=Rr(n);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=Ip(n,null,"F"),s=Rr(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const c=Le(...u);return this.gs.getDocuments(e,c).next(m=>this.indexManager.getMinOffset(e,s).next(p=>{const g=this.bs(n,m);return this.Ds(n,g,c,p.readTime)?this.ps(e,Ip(n,null,"F")):this.vs(e,g,n,p)}))})))}ys(e,n,s,o){return M0(n)||o.isEqual(Se.min())?ne.resolve(null):this.gs.getDocuments(e,s).next(u=>{const c=this.bs(n,u);return this.Ds(n,c,s,o)?ne.resolve(null):(wo()<=Pe.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),So(n)),this.vs(e,c,n,VD(o,fu)).next(m=>m))})}bs(e,n){let s=new Dt(LS(e));return n.forEach((o,u)=>{Ef(e,u)&&(s=s.add(u))}),s}Ds(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ws(e,n,s){return wo()<=Pe.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",So(n)),this.gs.getDocumentsMatchingQuery(e,n,bs.min(),s)}vs(e,n,s,o){return this.gs.getDocumentsMatchingQuery(e,s,o).next(u=>(n.forEach(c=>{u=u.insert(c.key,c)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag="LocalStore",dk=3e8;class mk{constructor(e,n,s,o){this.persistence=e,this.Cs=n,this.serializer=o,this.Fs=new ct(De),this.Ms=new Na(u=>pg(u),gg),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(s)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nk(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function pk(r,e,n,s){return new mk(r,e,n,s)}async function ab(r,e){const n=Ae(r);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,n.Ns(e),n.mutationQueue.getAllMutationBatches(s))).next(u=>{const c=[],m=[];let p=Le();for(const g of o){c.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}for(const g of u){m.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}return n.localDocuments.getDocuments(s,p).next(g=>({Bs:g,removedBatchIds:c,addedBatchIds:m}))})})}function gk(r,e){const n=Ae(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),u=n.Os.newChangeBuffer({trackRemovals:!0});return function(m,p,g,_){const w=g.batch,I=w.keys();let M=ne.resolve();return I.forEach(U=>{M=M.next(()=>_.getEntry(p,U)).next($=>{const B=g.docVersions.get(U);Qe(B!==null,48541),$.version.compareTo(B)<0&&(w.applyToRemoteDocument($,g),$.isValidDocument()&&($.setReadTime(g.commitVersion),_.addEntry($)))})}),M.next(()=>m.mutationQueue.removeMutationBatch(p,w))}(n,s,e,u).next(()=>u.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let p=Le();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p}(e))).next(()=>n.localDocuments.getDocuments(s,o))})}function ob(r){const e=Ae(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function yk(r,e){const n=Ae(r),s=e.snapshotVersion;let o=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=n.Os.newChangeBuffer({trackRemovals:!0});o=n.Fs;const m=[];e.targetChanges.forEach((_,w)=>{const I=o.get(w);if(!I)return;m.push(n.hi.removeMatchingKeys(u,_.removedDocuments,w).next(()=>n.hi.addMatchingKeys(u,_.addedDocuments,w)));let M=I.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(w)!==null?M=M.withResumeToken(Yt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):_.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(_.resumeToken,s)),o=o.insert(w,M),function($,B,X){return $.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=dk?!0:X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0}(I,M,_)&&m.push(n.hi.updateTargetData(u,M))});let p=_i(),g=Le();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,_))}),m.push(vk(u,c,e.documentUpdates).next(_=>{p=_.Ls,g=_.ks})),!s.isEqual(Se.min())){const _=n.hi.getLastRemoteSnapshotVersion(u).next(w=>n.hi.setTargetsMetadata(u,u.currentSequenceNumber,s));m.push(_)}return ne.waitFor(m).next(()=>c.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,p,g)).next(()=>p)}).then(u=>(n.Fs=o,u))}function vk(r,e,n){let s=Le(),o=Le();return n.forEach(u=>s=s.add(u)),e.getEntries(r,s).next(u=>{let c=_i();return n.forEach((m,p)=>{const g=u.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Se.min())?(e.removeEntry(m,p.readTime),c=c.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(m,p)):ce(Ag,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)}),{Ls:c,ks:o}})}function _k(r,e){const n=Ae(r);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=fg),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Ek(r,e){const n=Ae(r);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return n.hi.getTargetData(s,e).next(u=>u?(o=u,ne.resolve(o)):n.hi.allocateTargetId(s).next(c=>(o=new ps(e,c,"TargetPurposeListen",s.currentSequenceNumber),n.hi.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=n.Fs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(s.targetId,s),n.Ms.set(e,s.targetId)),s})}async function Op(r,e,n){const s=Ae(r),o=s.Fs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,c=>s.persistence.referenceDelegate.removeTarget(c,o))}catch(c){if(!Fo(c))throw c;ce(Ag,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Fs=s.Fs.remove(e),s.Ms.delete(o.target)}function K0(r,e,n){const s=Ae(r);let o=Se.min(),u=Le();return s.persistence.runTransaction("Execute query","readwrite",c=>function(p,g,_){const w=Ae(p),I=w.Ms.get(_);return I!==void 0?ne.resolve(w.Fs.get(I)):w.hi.getTargetData(g,_)}(s,c,Rr(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.hi.getMatchingKeysForTargetId(c,m.targetId).next(p=>{u=p})}).next(()=>s.Cs.getDocumentsMatchingQuery(c,e,n?o:Se.min(),n?u:Le())).next(m=>(Tk(s,oO(e),m),{documents:m,qs:u})))}function Tk(r,e,n){let s=r.xs.get(e)||Se.min();n.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),r.xs.set(e,s)}class Q0{constructor(){this.activeTargetIds=dO()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wk{constructor(){this.Fo=new Q0,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,s){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Q0,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="ConnectivityMonitor";class X0{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ce(Y0,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ce(Y0,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yh=null;function kp(){return yh===null?yh=function(){return 268435456+Math.round(2147483648*Math.random())}():yh++,"0x"+yh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp="RestConnection",bk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ak{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${s}/databases/${o}`,this.Ko=this.databaseId.database===Fh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Wo(e,n,s,o,u){const c=kp(),m=this.Go(e,n.toUriEncodedString());ce(rp,`Sending RPC '${e}' ${c}:`,m,s);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(p,o,u);const{host:g}=new URL(m),_=Uo(g);return this.jo(e,m,p,s,_).then(w=>(ce(rp,`Received RPC '${e}' ${c}: `,w),w),w=>{throw Ss(rp,`RPC '${e}' ${c} failed with error: `,w,"url: ",m,"request:",s),w})}Jo(e,n,s,o,u,c){return this.Wo(e,n,s,o,u)}zo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>e[u]=o),s&&s.headers.forEach((o,u)=>e[u]=o)}Go(e,n){const s=bk[e];return`${this.$o}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt="WebChannelConnection";class Ik extends Ak{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,s,o,u){const c=kp();return new Promise((m,p)=>{const g=new uS;g.setWithCredentials(!0),g.listenOnce(cS.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case bh.NO_ERROR:const w=g.getResponseJson();ce(Zt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(w)),m(w);break;case bh.TIMEOUT:ce(Zt,`RPC '${e}' ${c} timed out`),p(new ue(te.DEADLINE_EXCEEDED,"Request time out"));break;case bh.HTTP_ERROR:const I=g.getStatus();if(ce(Zt,`RPC '${e}' ${c} failed with status:`,I,"response text:",g.getResponseText()),I>0){let M=g.getResponseJson();Array.isArray(M)&&(M=M[0]);const U=M==null?void 0:M.error;if(U&&U.status&&U.message){const $=function(X){const re=X.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(re)>=0?re:te.UNKNOWN}(U.status);p(new ue($,U.message))}else p(new ue(te.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new ue(te.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{c_:e,streamId:c,l_:g.getLastErrorCode(),h_:g.getLastError()})}}finally{ce(Zt,`RPC '${e}' ${c} completed.`)}});const _=JSON.stringify(o);ce(Zt,`RPC '${e}' ${c} sending request:`,o),g.send(n,"POST",_,s,15)})}P_(e,n,s){const o=kp(),u=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=dS(),m=fS(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.zo(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const _=u.join("");ce(Zt,`Creating RPC '${e}' stream ${o}: ${_}`,p);const w=c.createWebChannel(_,p);this.T_(w);let I=!1,M=!1;const U=new Rk({Ho:B=>{M?ce(Zt,`Not sending because RPC '${e}' stream ${o} is closed:`,B):(I||(ce(Zt,`Opening RPC '${e}' stream ${o} transport.`),w.open(),I=!0),ce(Zt,`RPC '${e}' stream ${o} sending:`,B),w.send(B))},Yo:()=>w.close()}),$=(B,X,re)=>{B.listen(X,Z=>{try{re(Z)}catch(le){setTimeout(()=>{throw le},0)}})};return $(w,Wl.EventType.OPEN,()=>{M||(ce(Zt,`RPC '${e}' stream ${o} transport opened.`),U.s_())}),$(w,Wl.EventType.CLOSE,()=>{M||(M=!0,ce(Zt,`RPC '${e}' stream ${o} transport closed`),U.__(),this.I_(w))}),$(w,Wl.EventType.ERROR,B=>{M||(M=!0,Ss(Zt,`RPC '${e}' stream ${o} transport errored. Name:`,B.name,"Message:",B.message),U.__(new ue(te.UNAVAILABLE,"The operation could not be completed")))}),$(w,Wl.EventType.MESSAGE,B=>{var X;if(!M){const re=B.data[0];Qe(!!re,16349);const Z=re,le=(Z==null?void 0:Z.error)||((X=Z[0])===null||X===void 0?void 0:X.error);if(le){ce(Zt,`RPC '${e}' stream ${o} received error:`,le);const me=le.status;let ae=function(A){const C=Rt[A];if(C!==void 0)return QS(C)}(me),D=le.message;ae===void 0&&(ae=te.INTERNAL,D="Unknown error status: "+me+" with message "+le.message),M=!0,U.__(new ue(ae,D)),w.close()}else ce(Zt,`RPC '${e}' stream ${o} received:`,re),U.a_(re)}}),$(m,hS.STAT_EVENT,B=>{B.stat===Ep.PROXY?ce(Zt,`RPC '${e}' stream ${o} detected buffering proxy`):B.stat===Ep.NOPROXY&&ce(Zt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{U.o_()},0),U}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function ip(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(r){return new DO(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Fi=e,this.timerId=n,this.d_=s,this.E_=o,this.A_=u,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),s=Math.max(0,Date.now()-this.m_),o=Math.max(0,n-s);o>0&&ce("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="PersistentStream";class ub{constructor(e,n,s,o,u,c,m,p){this.Fi=e,this.w_=s,this.S_=o,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new lb(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===te.RESOURCE_EXHAUSTED?(vi(n.toString()),vi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.b_===n&&this.W_(s,o)},s=>{e(()=>{const o=new ue(te.UNKNOWN,"Fetching auth token failed: "+s.message);return this.G_(o)})})}W_(e,n){const s=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{s(()=>this.listener.Zo())}),this.stream.e_(()=>{s(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(o=>{s(()=>this.G_(o))}),this.stream.onMessage(o=>{s(()=>++this.C_==1?this.j_(o):this.onNext(o))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return ce(W0,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(ce(W0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ck extends ub{constructor(e,n,s,o,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,c),this.serializer=u}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=MO(this.serializer,e),s=function(u){if(!("targetChange"in u))return Se.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?Se.min():c.readTime?Ir(c.readTime):Se.min()}(e);return this.listener.J_(n,s)}H_(e){const n={};n.database=Dp(this.serializer),n.addTarget=function(u,c){let m;const p=c.target;if(m=Ap(p)?{documents:LO(u,p)}:{query:UO(u,p).Vt},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=WS(u,c.resumeToken);const g=Cp(u,c.expectedCount);g!==null&&(m.expectedCount=g)}else if(c.snapshotVersion.compareTo(Se.min())>0){m.readTime=Yh(u,c.snapshotVersion.toTimestamp());const g=Cp(u,c.expectedCount);g!==null&&(m.expectedCount=g)}return m}(this.serializer,e);const s=zO(this.serializer,e);s&&(n.labels=s),this.k_(n)}Y_(e){const n={};n.database=Dp(this.serializer),n.removeTarget=e,this.k_(n)}}class Nk extends ub{constructor(e,n,s,o,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,c),this.serializer=u}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=PO(e.writeResults,e.commitTime),s=Ir(e.commitTime);return this.listener.ta(s,n)}na(){const e={};e.database=Dp(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>VO(this.serializer,s))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{}class Dk extends xk{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new ue(te.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,s,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.connection.Wo(e,Np(n,s),o,u,c)).catch(u=>{throw u.name==="FirebaseError"?(u.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ue(te.UNKNOWN,u.toString())})}Jo(e,n,s,o,u){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,m])=>this.connection.Jo(e,Np(n,s),o,c,m,u)).catch(c=>{throw c.name==="FirebaseError"?(c.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ue(te.UNKNOWN,c.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class Ok{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(vi(n),this._a=!1):ce("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa="RemoteStore";class kk{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=u,this.Ea.xo(c=>{s.enqueueAndForget(async()=>{xa(this)&&(ce(Aa,"Restarting streams for network reachability change."),await async function(p){const g=Ae(p);g.Ia.add(4),await Ou(g),g.Aa.set("Unknown"),g.Ia.delete(4),await Af(g)}(this))})}),this.Aa=new Ok(s,o)}}async function Af(r){if(xa(r))for(const e of r.da)await e(!0)}async function Ou(r){for(const e of r.da)await e(!1)}function cb(r,e){const n=Ae(r);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Ng(n)?Cg(n):Ho(n).x_()&&Ig(n,e))}function Rg(r,e){const n=Ae(r),s=Ho(n);n.Ta.delete(e),s.x_()&&hb(n,e),n.Ta.size===0&&(s.x_()?s.B_():xa(n)&&n.Aa.set("Unknown"))}function Ig(r,e){if(r.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ho(r).H_(e)}function hb(r,e){r.Ra.$e(e),Ho(r).Y_(e)}function Cg(r){r.Ra=new IO({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>r.Ta.get(e)||null,lt:()=>r.datastore.serializer.databaseId}),Ho(r).start(),r.Aa.aa()}function Ng(r){return xa(r)&&!Ho(r).M_()&&r.Ta.size>0}function xa(r){return Ae(r).Ia.size===0}function fb(r){r.Ra=void 0}async function Mk(r){r.Aa.set("Online")}async function Vk(r){r.Ta.forEach((e,n)=>{Ig(r,e)})}async function Pk(r,e){fb(r),Ng(r)?(r.Aa.la(e),Cg(r)):r.Aa.set("Unknown")}async function Lk(r,e,n){if(r.Aa.set("Online"),e instanceof XS&&e.state===2&&e.cause)try{await async function(o,u){const c=u.cause;for(const m of u.targetIds)o.Ta.has(m)&&(await o.remoteSyncer.rejectListen(m,c),o.Ta.delete(m),o.Ra.removeTarget(m))}(r,e)}catch(s){ce(Aa,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Wh(r,s)}else if(e instanceof Ch?r.Ra.Ye(e):e instanceof YS?r.Ra.it(e):r.Ra.et(e),!n.isEqual(Se.min()))try{const s=await ob(r.localStore);n.compareTo(s)>=0&&await function(u,c){const m=u.Ra.Pt(c);return m.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const _=u.Ta.get(g);_&&u.Ta.set(g,_.withResumeToken(p.resumeToken,c))}}),m.targetMismatches.forEach((p,g)=>{const _=u.Ta.get(p);if(!_)return;u.Ta.set(p,_.withResumeToken(Yt.EMPTY_BYTE_STRING,_.snapshotVersion)),hb(u,p);const w=new ps(_.target,p,g,_.sequenceNumber);Ig(u,w)}),u.remoteSyncer.applyRemoteEvent(m)}(r,n)}catch(s){ce(Aa,"Failed to raise snapshot:",s),await Wh(r,s)}}async function Wh(r,e,n){if(!Fo(e))throw e;r.Ia.add(1),await Ou(r),r.Aa.set("Offline"),n||(n=()=>ob(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{ce(Aa,"Retrying IndexedDB access"),await n(),r.Ia.delete(1),await Af(r)})}function db(r,e){return e().catch(n=>Wh(r,n,e))}async function Rf(r){const e=Ae(r),n=Cs(e);let s=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:fg;for(;Uk(e);)try{const o=await _k(e.localStore,s);if(o===null){e.Pa.length===0&&n.B_();break}s=o.batchId,jk(e,o)}catch(o){await Wh(e,o)}mb(e)&&pb(e)}function Uk(r){return xa(r)&&r.Pa.length<10}function jk(r,e){r.Pa.push(e);const n=Cs(r);n.x_()&&n.Z_&&n.X_(e.mutations)}function mb(r){return xa(r)&&!Cs(r).M_()&&r.Pa.length>0}function pb(r){Cs(r).start()}async function zk(r){Cs(r).na()}async function Bk(r){const e=Cs(r);for(const n of r.Pa)e.X_(n.mutations)}async function qk(r,e,n){const s=r.Pa.shift(),o=_g.from(s,e,n);await db(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await Rf(r)}async function Fk(r,e){e&&Cs(r).Z_&&await async function(s,o){if(function(c){return AO(c)&&c!==te.ABORTED}(o.code)){const u=s.Pa.shift();Cs(s).N_(),await db(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await Rf(s)}}(r,e),mb(r)&&pb(r)}async function J0(r,e){const n=Ae(r);n.asyncQueue.verifyOperationInProgress(),ce(Aa,"RemoteStore received new credentials");const s=xa(n);n.Ia.add(3),await Ou(n),s&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Af(n)}async function Hk(r,e){const n=Ae(r);e?(n.Ia.delete(2),await Af(n)):e||(n.Ia.add(2),await Ou(n),n.Aa.set("Unknown"))}function Ho(r){return r.Va||(r.Va=function(n,s,o){const u=Ae(n);return u.ia(),new Ck(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{Zo:Mk.bind(null,r),e_:Vk.bind(null,r),n_:Pk.bind(null,r),J_:Lk.bind(null,r)}),r.da.push(async e=>{e?(r.Va.N_(),Ng(r)?Cg(r):r.Aa.set("Unknown")):(await r.Va.stop(),fb(r))})),r.Va}function Cs(r){return r.ma||(r.ma=function(n,s,o){const u=Ae(n);return u.ia(),new Nk(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),e_:zk.bind(null,r),n_:Fk.bind(null,r),ea:Bk.bind(null,r),ta:qk.bind(null,r)}),r.da.push(async e=>{e?(r.ma.N_(),await Rf(r)):(await r.ma.stop(),r.Pa.length>0&&(ce(Aa,`Stopping write stream with ${r.Pa.length} pending writes`),r.Pa=[]))})),r.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new mi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const c=Date.now()+s,m=new xg(e,n,c,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dg(r,e){if(vi("AsyncQueue",`${e}: ${r}`),Fo(r))return new ue(te.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{static emptySet(e){return new Do(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ye.comparator(n.key,s.key):(n,s)=>ye.comparator(n.key,s.key),this.keyedMap=Jl(),this.sortedSet=new ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Do)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Do;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(){this.fa=new ct(ye.comparator)}track(e){const n=e.doc.key,s=this.fa.get(n);s?e.type!==0&&s.type===3?this.fa=this.fa.insert(n,e):e.type===3&&s.type!==1?this.fa=this.fa.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.fa=this.fa.remove(n):e.type===1&&s.type===2?this.fa=this.fa.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Te(63341,{At:e,ga:s}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,s)=>{e.push(s)}),e}}class Po{constructor(e,n,s,o,u,c,m,p,g){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,n,s,o,u){const c=[];return n.forEach(m=>{c.push({type:0,doc:m})}),new Po(e,n,Do.emptySet(n),c,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_f(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class $k{constructor(){this.queries=eT(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,s){const o=Ae(n),u=o.queries;o.queries=eT(),u.forEach((c,m)=>{for(const p of m.wa)p.onError(s)})})(this,new ue(te.ABORTED,"Firestore shutting down"))}}function eT(){return new Na(r=>PS(r),_f)}async function Og(r,e){const n=Ae(r);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.Sa()&&e.ba()&&(s=2):(u=new Gk,s=e.ba()?0:1);try{switch(s){case 0:u.ya=await n.onListen(o,!0);break;case 1:u.ya=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(c){const m=Dg(c,`Initialization of query '${So(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.wa.push(e),e.va(n.onlineState),u.ya&&e.Ca(u.ya)&&Mg(n)}async function kg(r,e){const n=Ae(r),s=e.query;let o=3;const u=n.queries.get(s);if(u){const c=u.wa.indexOf(e);c>=0&&(u.wa.splice(c,1),u.wa.length===0?o=e.ba()?0:1:!u.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function Kk(r,e){const n=Ae(r);let s=!1;for(const o of e){const u=o.query,c=n.queries.get(u);if(c){for(const m of c.wa)m.Ca(o)&&(s=!0);c.ya=o}}s&&Mg(n)}function Qk(r,e,n){const s=Ae(r),o=s.queries.get(e);if(o)for(const u of o.wa)u.onError(n);s.queries.delete(e)}function Mg(r){r.Da.forEach(e=>{e.next()})}var Mp,tT;(tT=Mp||(Mp={})).Fa="default",tT.Cache="cache";class Vg{constructor(e,n,s){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=s||{}}Ca(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Po(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const s=n!=="Offline";return(!this.options.ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Po.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Mp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e){this.key=e}}class yb{constructor(e){this.key=e}}class Yk{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Le(),this.mutatedKeys=Le(),this.Xa=LS(e),this.eu=new Do(this.Xa)}get tu(){return this.Ha}nu(e,n){const s=n?n.ru:new Z0,o=n?n.eu:this.eu;let u=n?n.mutatedKeys:this.mutatedKeys,c=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((_,w)=>{const I=o.get(_),M=Ef(this.query,w)?w:null,U=!!I&&this.mutatedKeys.has(I.key),$=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let B=!1;I&&M?I.data.isEqual(M.data)?U!==$&&(s.track({type:3,doc:M}),B=!0):this.iu(I,M)||(s.track({type:2,doc:M}),B=!0,(p&&this.Xa(M,p)>0||g&&this.Xa(M,g)<0)&&(m=!0)):!I&&M?(s.track({type:0,doc:M}),B=!0):I&&!M&&(s.track({type:1,doc:I}),B=!0,(p||g)&&(m=!0)),B&&(M?(c=c.add(M),u=$?u.add(_):u.delete(_)):(c=c.delete(_),u=u.delete(_)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),u=u.delete(_.key),s.track({type:1,doc:_})}return{eu:c,ru:s,Ds:m,mutatedKeys:u}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort((_,w)=>function(M,U){const $=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{At:B})}};return $(M)-$(U)}(_.type,w.type)||this.Xa(_.doc,w.doc)),this.su(s),o=o!=null&&o;const m=n&&!o?this.ou():[],p=this.Za.size===0&&this.current&&!o?1:0,g=p!==this.Ya;return this.Ya=p,c.length!==0||g?{snapshot:new Po(this.query,e.eu,u,c,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),_u:m}:{_u:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Z0,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Le(),this.eu.forEach(s=>{this.au(s.key)&&(this.Za=this.Za.add(s.key))});const n=[];return e.forEach(s=>{this.Za.has(s)||n.push(new yb(s))}),this.Za.forEach(s=>{e.has(s)||n.push(new gb(s))}),n}uu(e){this.Ha=e.qs,this.Za=Le();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Po.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Pg="SyncEngine";class Xk{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class Wk{constructor(e){this.key=e,this.lu=!1}}class Jk{constructor(e,n,s,o,u,c){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new Na(m=>PS(m),_f),this.Tu=new Map,this.Iu=new Set,this.du=new ct(ye.comparator),this.Eu=new Map,this.Au=new wg,this.Ru={},this.Vu=new Map,this.mu=Vo.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function Zk(r,e,n=!0){const s=Sb(r);let o;const u=s.Pu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.cu()):o=await vb(s,e,n,!0),o}async function e4(r,e){const n=Sb(r);await vb(n,e,!0,!1)}async function vb(r,e,n,s){const o=await Ek(r.localStore,Rr(e)),u=o.targetId,c=r.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await t4(r,e,u,c==="current",o.resumeToken)),r.isPrimaryClient&&n&&cb(r.remoteStore,o),m}async function t4(r,e,n,s,o){r.gu=(w,I,M)=>async function($,B,X,re){let Z=B.view.nu(X);Z.Ds&&(Z=await K0($.localStore,B.query,!1).then(({documents:D})=>B.view.nu(D,Z)));const le=re&&re.targetChanges.get(B.targetId),me=re&&re.targetMismatches.get(B.targetId)!=null,ae=B.view.applyChanges(Z,$.isPrimaryClient,le,me);return rT($,B.targetId,ae._u),ae.snapshot}(r,w,I,M);const u=await K0(r.localStore,e,!0),c=new Yk(e,u.qs),m=c.nu(u.documents),p=Du.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),g=c.applyChanges(m,r.isPrimaryClient,p);rT(r,n,g._u);const _=new Xk(e,n,c);return r.Pu.set(e,_),r.Tu.has(n)?r.Tu.get(n).push(e):r.Tu.set(n,[e]),g.snapshot}async function n4(r,e,n){const s=Ae(r),o=s.Pu.get(e),u=s.Tu.get(o.targetId);if(u.length>1)return s.Tu.set(o.targetId,u.filter(c=>!_f(c,e))),void s.Pu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Op(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Rg(s.remoteStore,o.targetId),Vp(s,o.targetId)}).catch(qo)):(Vp(s,o.targetId),await Op(s.localStore,o.targetId,!0))}async function r4(r,e){const n=Ae(r),s=n.Pu.get(e),o=n.Tu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Rg(n.remoteStore,s.targetId))}async function i4(r,e,n){const s=h4(r);try{const o=await function(c,m){const p=Ae(c),g=st.now(),_=m.reduce((M,U)=>M.add(U.key),Le());let w,I;return p.persistence.runTransaction("Locally write mutations","readwrite",M=>{let U=_i(),$=Le();return p.Os.getEntries(M,_).next(B=>{U=B,U.forEach((X,re)=>{re.isValidDocument()||($=$.add(X))})}).next(()=>p.localDocuments.getOverlayedDocuments(M,U)).next(B=>{w=B;const X=[];for(const re of m){const Z=EO(re,w.get(re.key).overlayedDocument);Z!=null&&X.push(new Vs(re.key,Z,CS(Z.value.mapValue),Qn.exists(!0)))}return p.mutationQueue.addMutationBatch(M,g,X,m)}).next(B=>{I=B;const X=B.applyToLocalDocumentSet(w,$);return p.documentOverlayCache.saveOverlays(M,B.batchId,X)})}).then(()=>({batchId:I.batchId,changes:jS(w)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(c,m,p){let g=c.Ru[c.currentUser.toKey()];g||(g=new ct(De)),g=g.insert(m,p),c.Ru[c.currentUser.toKey()]=g}(s,o.batchId,n),await ku(s,o.changes),await Rf(s.remoteStore)}catch(o){const u=Dg(o,"Failed to persist write");n.reject(u)}}async function _b(r,e){const n=Ae(r);try{const s=await yk(n.localStore,e);e.targetChanges.forEach((o,u)=>{const c=n.Eu.get(u);c&&(Qe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.lu=!0:o.modifiedDocuments.size>0?Qe(c.lu,14607):o.removedDocuments.size>0&&(Qe(c.lu,42227),c.lu=!1))}),await ku(n,s,e)}catch(s){await qo(s)}}function nT(r,e,n){const s=Ae(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Pu.forEach((u,c)=>{const m=c.view.va(e);m.snapshot&&o.push(m.snapshot)}),function(c,m){const p=Ae(c);p.onlineState=m;let g=!1;p.queries.forEach((_,w)=>{for(const I of w.wa)I.va(m)&&(g=!0)}),g&&Mg(p)}(s.eventManager,e),o.length&&s.hu.J_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function s4(r,e,n){const s=Ae(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Eu.get(e),u=o&&o.key;if(u){let c=new ct(ye.comparator);c=c.insert(u,tn.newNoDocument(u,Se.min()));const m=Le().add(u),p=new Sf(Se.min(),new Map,new ct(De),c,m);await _b(s,p),s.du=s.du.remove(u),s.Eu.delete(e),Lg(s)}else await Op(s.localStore,e,!1).then(()=>Vp(s,e,n)).catch(qo)}async function a4(r,e){const n=Ae(r),s=e.batch.batchId;try{const o=await gk(n.localStore,e);Tb(n,s,null),Eb(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await ku(n,o)}catch(o){await qo(o)}}async function o4(r,e,n){const s=Ae(r);try{const o=await function(c,m){const p=Ae(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let _;return p.mutationQueue.lookupMutationBatch(g,m).next(w=>(Qe(w!==null,37113),_=w.keys(),p.mutationQueue.removeMutationBatch(g,w))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,_,m)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_)).next(()=>p.localDocuments.getDocuments(g,_))})}(s.localStore,e);Tb(s,e,n),Eb(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await ku(s,o)}catch(o){await qo(o)}}function Eb(r,e){(r.Vu.get(e)||[]).forEach(n=>{n.resolve()}),r.Vu.delete(e)}function Tb(r,e,n){const s=Ae(r);let o=s.Ru[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Ru[s.currentUser.toKey()]=o}}function Vp(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Tu.get(e))r.Pu.delete(s),n&&r.hu.pu(s,n);r.Tu.delete(e),r.isPrimaryClient&&r.Au.zr(e).forEach(s=>{r.Au.containsKey(s)||wb(r,s)})}function wb(r,e){r.Iu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(Rg(r.remoteStore,n),r.du=r.du.remove(e),r.Eu.delete(n),Lg(r))}function rT(r,e,n){for(const s of n)s instanceof gb?(r.Au.addReference(s.key,e),l4(r,s)):s instanceof yb?(ce(Pg,"Document no longer in limbo: "+s.key),r.Au.removeReference(s.key,e),r.Au.containsKey(s.key)||wb(r,s.key)):Te(19791,{yu:s})}function l4(r,e){const n=e.key,s=n.path.canonicalString();r.du.get(n)||r.Iu.has(s)||(ce(Pg,"New document in limbo: "+n),r.Iu.add(s),Lg(r))}function Lg(r){for(;r.Iu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Iu.values().next().value;r.Iu.delete(e);const n=new ye(tt.fromString(e)),s=r.mu.next();r.Eu.set(s,new Wk(n)),r.du=r.du.insert(n,s),cb(r.remoteStore,new ps(Rr(vf(n.path)),s,"TargetPurposeLimboResolution",pf.ue))}}async function ku(r,e,n){const s=Ae(r),o=[],u=[],c=[];s.Pu.isEmpty()||(s.Pu.forEach((m,p)=>{c.push(s.gu(p,e,n).then(g=>{var _;if((g||n)&&s.isPrimaryClient){const w=g?!g.fromCache:(_=n==null?void 0:n.targetChanges.get(p.targetId))===null||_===void 0?void 0:_.current;s.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(g){o.push(g);const w=bg.Es(p.targetId,g);u.push(w)}}))}),await Promise.all(c),s.hu.J_(o),await async function(p,g){const _=Ae(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>ne.forEach(g,I=>ne.forEach(I.Is,M=>_.persistence.referenceDelegate.addReference(w,I.targetId,M)).next(()=>ne.forEach(I.ds,M=>_.persistence.referenceDelegate.removeReference(w,I.targetId,M)))))}catch(w){if(!Fo(w))throw w;ce(Ag,"Failed to update sequence numbers: "+w)}for(const w of g){const I=w.targetId;if(!w.fromCache){const M=_.Fs.get(I),U=M.snapshotVersion,$=M.withLastLimboFreeSnapshotVersion(U);_.Fs=_.Fs.insert(I,$)}}}(s.localStore,u))}async function u4(r,e){const n=Ae(r);if(!n.currentUser.isEqual(e)){ce(Pg,"User change. New user:",e.toKey());const s=await ab(n.localStore,e);n.currentUser=e,function(u,c){u.Vu.forEach(m=>{m.forEach(p=>{p.reject(new ue(te.CANCELLED,c))})}),u.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ku(n,s.Bs)}}function c4(r,e){const n=Ae(r),s=n.Eu.get(e);if(s&&s.lu)return Le().add(s.key);{let o=Le();const u=n.Tu.get(e);if(!u)return o;for(const c of u){const m=n.Pu.get(c);o=o.unionWith(m.view.tu)}return o}}function Sb(r){const e=Ae(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=_b.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=c4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=s4.bind(null,e),e.hu.J_=Kk.bind(null,e.eventManager),e.hu.pu=Qk.bind(null,e.eventManager),e}function h4(r){const e=Ae(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=a4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=o4.bind(null,e),e}class Jh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=bf(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return pk(this.persistence,new fk,e.initialUser,this.serializer)}Du(e){return new sb(Sg.Vi,this.serializer)}bu(e){return new wk}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jh.provider={build:()=>new Jh};class f4 extends Jh{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Qe(this.persistence.referenceDelegate instanceof Xh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new WO(s,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?vn.withCacheSize(this.cacheSizeBytes):vn.DEFAULT;return new sb(s=>Xh.Vi(s,n),this.serializer)}}class Pp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>nT(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=u4.bind(null,this.syncEngine),await Hk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new $k}()}createDatastore(e){const n=bf(e.databaseInfo.databaseId),s=function(u){return new Ik(u)}(e.databaseInfo);return function(u,c,m,p){return new Dk(u,c,m,p)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,o,u,c,m){return new kk(s,o,u,c,m)}(this.localStore,this.datastore,e.asyncQueue,n=>nT(this.syncEngine,n,0),function(){return X0.C()?new X0:new Sk}())}createSyncEngine(e,n){return function(o,u,c,m,p,g,_){const w=new Jk(o,u,c,m,p,g);return _&&(w.fu=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const u=Ae(o);ce(Aa,"RemoteStore shutting down."),u.Ia.add(5),await Ou(u),u.Ea.shutdown(),u.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Pp.provider={build:()=>new Pp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):vi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns="FirestoreClient";class d4{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=en.UNAUTHENTICATED,this.clientId=hg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async c=>{ce(Ns,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(s,c=>(ce(Ns,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Dg(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function sp(r,e){r.asyncQueue.verifyOperationInProgress(),ce(Ns,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await ab(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>{Ss("Terminating Firestore due to IndexedDb database deletion"),r.terminate().then(()=>{ce("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(o=>{Ss("Terminating Firestore due to IndexedDb database deletion failed",o)})}),r._offlineComponents=e}async function iT(r,e){r.asyncQueue.verifyOperationInProgress();const n=await m4(r);ce(Ns,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener(s=>J0(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>J0(e.remoteStore,o)),r._onlineComponents=e}async function m4(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ce(Ns,"Using user provided OfflineComponentProvider");try{await sp(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===te.FAILED_PRECONDITION||o.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;Ss("Error using user provided cache. Falling back to memory cache: "+n),await sp(r,new Jh)}}else ce(Ns,"Using default OfflineComponentProvider"),await sp(r,new f4(void 0));return r._offlineComponents}async function bb(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ce(Ns,"Using user provided OnlineComponentProvider"),await iT(r,r._uninitializedComponentsProvider._online)):(ce(Ns,"Using default OnlineComponentProvider"),await iT(r,new Pp))),r._onlineComponents}function p4(r){return bb(r).then(e=>e.syncEngine)}async function Zh(r){const e=await bb(r),n=e.eventManager;return n.onListen=Zk.bind(null,e.syncEngine),n.onUnlisten=n4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=e4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=r4.bind(null,e.syncEngine),n}function g4(r,e,n={}){const s=new mi;return r.asyncQueue.enqueueAndForget(async()=>function(u,c,m,p,g){const _=new Ug({next:I=>{_.Ou(),c.enqueueAndForget(()=>kg(u,w));const M=I.docs.has(m);!M&&I.fromCache?g.reject(new ue(te.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&I.fromCache&&p&&p.source==="server"?g.reject(new ue(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(I)},error:I=>g.reject(I)}),w=new Vg(vf(m.path),_,{includeMetadataChanges:!0,ka:!0});return Og(u,w)}(await Zh(r),r.asyncQueue,e,n,s)),s.promise}function y4(r,e,n={}){const s=new mi;return r.asyncQueue.enqueueAndForget(async()=>function(u,c,m,p,g){const _=new Ug({next:I=>{_.Ou(),c.enqueueAndForget(()=>kg(u,w)),I.fromCache&&p.source==="server"?g.reject(new ue(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(I)},error:I=>g.reject(I)}),w=new Vg(m,_,{includeMetadataChanges:!0,ka:!0});return Og(u,w)}(await Zh(r),r.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb="firestore.googleapis.com",aT=!0;class oT{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ue(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Rb,this.ssl=aT}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:aT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ib;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<YO)throw new ue(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ab((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new ue(te.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new ue(te.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new ue(te.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class If{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new AD;switch(s.type){case"firstParty":return new ND(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ue(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=sT.get(n);s&&(ce("ComponentProvider","Removing Datastore"),sT.delete(n),s.terminate())}(this),Promise.resolve()}}function v4(r,e,n,s={}){var o;r=Tn(r,If);const u=Uo(e),c=r._getSettings(),m=Object.assign(Object.assign({},c),{emulatorOptions:r._getEmulatorOptions()}),p=`${e}:${n}`;u&&(XT(`https://${p}`),WT("Firestore",!0)),c.host!==Rb&&c.host!==p&&Ss("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},c),{host:p,ssl:u,emulatorOptions:s});if(!ws(g,m)&&(r._setSettings(g),s.mockUserToken)){let _,w;if(typeof s.mockUserToken=="string")_=s.mockUserToken,w=en.MOCK_USER;else{_=mI(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const I=s.mockUserToken.sub||s.mockUserToken.user_id;if(!I)throw new ue(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new en(I)}r._authCredentials=new RD(new pS(_,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Da(this.firestore,e,this._query)}}class pt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _s(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pt(this.firestore,e,this._key)}toJSON(){return{type:pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Cu(n,pt._jsonSchema))return new pt(e,s||null,new ye(tt.fromString(n.referencePath)))}}pt._jsonSchemaVersion="firestore/documentReference/1.0",pt._jsonSchema={type:Ct("string",pt._jsonSchemaVersion),referencePath:Ct("string")};class _s extends Da{constructor(e,n,s){super(e,n,vf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pt(this.firestore,null,new ye(e))}withConverter(e){return new _s(this.firestore,e,this._path)}}function Es(r,e,...n){if(r=Et(r),yS("collection","path",e),r instanceof If){const s=tt.fromString(e,...n);return E0(s),new _s(r,null,s)}{if(!(r instanceof pt||r instanceof _s))throw new ue(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(tt.fromString(e,...n));return E0(s),new _s(r.firestore,null,s)}}function nn(r,e,...n){if(r=Et(r),arguments.length===1&&(e=hg.newId()),yS("doc","path",e),r instanceof If){const s=tt.fromString(e,...n);return _0(s),new pt(r,null,new ye(s))}{if(!(r instanceof pt||r instanceof _s))throw new ue(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(tt.fromString(e,...n));return _0(s),new pt(r.firestore,r instanceof _s?r.converter:null,new ye(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="AsyncQueue";class uT{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new lb(this,"async_queue_retry"),this.oc=()=>{const s=ip();s&&ce(lT,"Visibility state changed to "+s.visibilityState),this.F_.y_()},this._c=e;const n=ip();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=ip();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new mi;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Fo(e))throw e;ce(lT,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(s=>{throw this.tc=s,this.nc=!1,vi("INTERNAL UNHANDLED ERROR: ",cT(s)),s}).then(s=>(this.nc=!1,s))));return this._c=n,n}enqueueAfterDelay(e,n,s){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const o=xg.createAndSchedule(this,e,n,s,u=>this.lc(u));return this.ec.push(o),o}ac(){this.tc&&Te(47125,{hc:cT(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function cT(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(r){return function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1}(r,["next","error","complete"])}class Ei extends If{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new uT,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new uT(e),this._firestoreClient=void 0,await e}}}function _4(r,e){const n=typeof r=="object"?r:Kp(),s=typeof r=="string"?r:Fh,o=Ca(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=fI("firestore");u&&v4(o,...u)}return o}function Cf(r){if(r._terminated)throw new ue(te.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||E4(r),r._firestoreClient}function E4(r){var e,n,s;const o=r._freezeSettings(),u=function(m,p,g,_){return new GD(m,p,g,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,Ab(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new d4(r._authCredentials,r._appCheckCredentials,r._queue,u,r._componentsProvider&&function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $n(Yt.fromBase64String(e))}catch(n){throw new ue(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new $n(Yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:$n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Cu(e,$n._jsonSchema))return $n.fromBase64String(e.bytes)}}$n._jsonSchemaVersion="firestore/bytes/1.0",$n._jsonSchema={type:Ct("string",$n._jsonSchemaVersion),bytes:Ct("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ue(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ue(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ue(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Cr._jsonSchemaVersion}}static fromJSON(e){if(Cu(e,Cr._jsonSchema))return new Cr(e.latitude,e.longitude)}}Cr._jsonSchemaVersion="firestore/geoPoint/1.0",Cr._jsonSchema={type:Ct("string",Cr._jsonSchemaVersion),latitude:Ct("number"),longitude:Ct("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Nr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Cu(e,Nr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Nr(e.vectorValues);throw new ue(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Nr._jsonSchemaVersion="firestore/vectorValue/1.0",Nr._jsonSchema={type:Ct("string",Nr._jsonSchemaVersion),vectorValues:Ct("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4=/^__.*__$/;class w4{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Vs(e,this.data,this.fieldMask,n,this.fieldTransforms):new xu(e,this.data,n,this.fieldTransforms)}}class Ib{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Vs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Cb(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ec:r})}}class zg{constructor(e,n,s,o,u,c){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Ac(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new zg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Rc({path:s,mc:!1});return o.fc(e),o}gc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Rc({path:s,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return ef(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(Cb(this.Ec)&&T4.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class S4{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||bf(e)}Dc(e,n,s,o=!1){return new zg({Ec:e,methodName:n,bc:s,path:Qt.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xf(r){const e=r._freezeSettings(),n=bf(r._databaseId);return new S4(r._databaseId,!!e.ignoreUndefinedProperties,n)}function Nb(r,e,n,s,o,u={}){const c=r.Dc(u.merge||u.mergeFields?2:0,e,n,o);Bg("Data must be an object, but it was:",c,s);const m=xb(s,c);let p,g;if(u.merge)p=new On(c.fieldMask),g=c.fieldTransforms;else if(u.mergeFields){const _=[];for(const w of u.mergeFields){const I=Lp(e,w,n);if(!c.contains(I))throw new ue(te.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);Ob(_,I)||_.push(I)}p=new On(_),g=c.fieldTransforms.filter(w=>p.covers(w.field))}else p=null,g=c.fieldTransforms;return new w4(new _n(m),p,g)}class Df extends jg{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Df}}function b4(r,e,n,s){const o=r.Dc(1,e,n);Bg("Data must be an object, but it was:",o,s);const u=[],c=_n.empty();Ms(s,(p,g)=>{const _=qg(e,p,n);g=Et(g);const w=o.gc(_);if(g instanceof Df)u.push(_);else{const I=Mu(g,w);I!=null&&(u.push(_),c.set(_,I))}});const m=new On(u);return new Ib(c,m,o.fieldTransforms)}function A4(r,e,n,s,o,u){const c=r.Dc(1,e,n),m=[Lp(e,s,n)],p=[o];if(u.length%2!=0)throw new ue(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<u.length;I+=2)m.push(Lp(e,u[I])),p.push(u[I+1]);const g=[],_=_n.empty();for(let I=m.length-1;I>=0;--I)if(!Ob(g,m[I])){const M=m[I];let U=p[I];U=Et(U);const $=c.gc(M);if(U instanceof Df)g.push(M);else{const B=Mu(U,$);B!=null&&(g.push(M),_.set(M,B))}}const w=new On(g);return new Ib(_,w,c.fieldTransforms)}function R4(r,e,n,s=!1){return Mu(n,r.Dc(s?4:3,e))}function Mu(r,e){if(Db(r=Et(r)))return Bg("Unsupported field value:",e,r),xb(r,e);if(r instanceof jg)return function(s,o){if(!Cb(o.Ec))throw o.wc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(s,o){const u=[];let c=0;for(const m of s){let p=Mu(m,o.yc(c));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),c++}return{arrayValue:{values:u}}}(r,e)}return function(s,o){if((s=Et(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return mO(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=st.fromDate(s);return{timestampValue:Yh(o.serializer,u)}}if(s instanceof st){const u=new st(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Yh(o.serializer,u)}}if(s instanceof Cr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof $n)return{bytesValue:WS(o.serializer,s._byteString)};if(s instanceof pt){const u=o.databaseId,c=s.firestore._databaseId;if(!c.isEqual(u))throw o.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Tg(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Nr)return function(c,m){return{mapValue:{fields:{[RS]:{stringValue:IS},[Hh]:{arrayValue:{values:c.toArray().map(g=>{if(typeof g!="number")throw m.wc("VectorValues must only contain numeric values.");return yg(m.serializer,g)})}}}}}}(s,o);throw o.wc(`Unsupported field value: ${mf(s)}`)}(r,e)}function xb(r,e){const n={};return ES(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ms(r,(s,o)=>{const u=Mu(o,e.Vc(s));u!=null&&(n[s]=u)}),{mapValue:{fields:n}}}function Db(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof st||r instanceof Cr||r instanceof $n||r instanceof pt||r instanceof jg||r instanceof Nr)}function Bg(r,e,n){if(!Db(n)||!vS(n)){const s=mf(n);throw s==="an object"?e.wc(r+" a custom object"):e.wc(r+" "+s)}}function Lp(r,e,n){if((e=Et(e))instanceof Nf)return e._internalPath;if(typeof e=="string")return qg(r,e);throw ef("Field path arguments must be of type string or ",r,!1,void 0,n)}const I4=new RegExp("[~\\*/\\[\\]]");function qg(r,e,n){if(e.search(I4)>=0)throw ef(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Nf(...e.split("."))._internalPath}catch{throw ef(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function ef(r,e,n,s,o){const u=s&&!s.isEmpty(),c=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||c)&&(p+=" (found",u&&(p+=` in field ${s}`),c&&(p+=` in document ${o}`),p+=")"),new ue(te.INVALID_ARGUMENT,m+r+p)}function Ob(r,e){return r.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new C4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Fg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class C4 extends kb{data(){return super.data()}}function Fg(r,e){return typeof e=="string"?qg(r,e):e instanceof Nf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ue(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hg{}class N4 extends Hg{}function vu(r,e,...n){let s=[];e instanceof Hg&&s.push(e),s=s.concat(n),function(u){const c=u.filter(p=>p instanceof Gg).length,m=u.filter(p=>p instanceof Of).length;if(c>1||c>0&&m>0)throw new ue(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)r=o._apply(r);return r}class Of extends N4{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Of(e,n,s)}_apply(e){const n=this._parse(e);return Vb(e._query,n),new Da(e.firestore,e.converter,Rp(e._query,n))}_parse(e){const n=xf(e.firestore);return function(u,c,m,p,g,_,w){let I;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ue(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){dT(w,_);const U=[];for(const $ of w)U.push(fT(p,u,$));I={arrayValue:{values:U}}}else I=fT(p,u,w)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||dT(w,_),I=R4(m,c,w,_==="in"||_==="not-in");return It.create(g,_,I)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function li(r,e,n){const s=e,o=Fg("where",r);return Of._create(o,s,n)}class Gg extends Hg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Gg(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:lr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,u){let c=o;const m=u.getFlattenedFilters();for(const p of m)Vb(c,p),c=Rp(c,p)}(e._query,n),new Da(e.firestore,e.converter,Rp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function fT(r,e,n){if(typeof(n=Et(n))=="string"){if(n==="")throw new ue(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!VS(e)&&n.indexOf("/")!==-1)throw new ue(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(tt.fromString(n));if(!ye.isDocumentKey(s))throw new ue(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return C0(r,new ye(s))}if(n instanceof pt)return C0(r,n._key);throw new ue(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mf(n)}.`)}function dT(r,e){if(!Array.isArray(r)||r.length===0)throw new ue(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Vb(r,e){const n=function(o,u){for(const c of o)for(const m of c.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ue(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class x4{convertValue(e,n="none"){switch(Is(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Ms(e,(o,u)=>{s[o]=this.convertValue(u,n)}),s}convertVectorValue(e){var n,s,o;const u=(o=(s=(n=e.fields)===null||n===void 0?void 0:n[Hh].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(c=>_t(c.doubleValue));return new Nr(u)}convertGeoPoint(e){return new Cr(_t(e.latitude),_t(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=yf(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(du(e));default:return null}}convertTimestamp(e){const n=As(e);return new st(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=tt.fromString(e);Qe(rb(s),9688,{name:e});const o=new mu(s.get(1),s.get(3)),u=new ye(s.popFirst(5));return o.isEqual(n)||vi(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}class eu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ya extends kb{constructor(e,n,s,o,u,c){super(e,n,s,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Nh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Fg("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ya._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ya._jsonSchemaVersion="firestore/documentSnapshot/1.0",ya._jsonSchema={type:Ct("string",ya._jsonSchemaVersion),bundleSource:Ct("string","DocumentSnapshot"),bundleName:Ct("string"),bundle:Ct("string")};class Nh extends ya{data(e={}){return super.data(e)}}class va{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new eu(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Nh(this._firestore,this._userDataWriter,s.key,s,new eu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ue(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map(m=>{const p=new Nh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new eu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}})}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const p=new Nh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new eu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,_=-1;return m.type!==0&&(g=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),_=c.indexOf(m.doc.key)),{type:D4(m.type),doc:p,oldIndex:g,newIndex:_}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=va._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=hg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach(u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function D4(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(r){r=Tn(r,pt);const e=Tn(r.firestore,Ei);return g4(Cf(e),r._key).then(n=>Ub(e,r,n))}va._jsonSchemaVersion="firestore/querySnapshot/1.0",va._jsonSchema={type:Ct("string",va._jsonSchemaVersion),bundleSource:Ct("string","QuerySnapshot"),bundleName:Ct("string"),bundle:Ct("string")};class $g extends x4{constructor(e){super(),this.firestore=e}convertBytes(e){return new $n(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,n)}}function _u(r){r=Tn(r,Da);const e=Tn(r.firestore,Ei),n=Cf(e),s=new $g(e);return Mb(r._query),y4(n,r._query).then(o=>new va(e,s,r,o))}function kf(r,e,n){r=Tn(r,pt);const s=Tn(r.firestore,Ei),o=Pb(r.converter,e,n);return Mf(s,[Nb(xf(s),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,Qn.none())])}function xh(r,e,n,...s){r=Tn(r,pt);const o=Tn(r.firestore,Ei),u=xf(o);let c;return c=typeof(e=Et(e))=="string"||e instanceof Nf?A4(u,"updateDoc",r._key,e,n,s):b4(u,"updateDoc",r._key,e),Mf(o,[c.toMutation(r._key,Qn.exists(!0))])}function O4(r){return Mf(Tn(r.firestore,Ei),[new vg(r._key,Qn.none())])}function Lb(r,e){const n=Tn(r.firestore,Ei),s=nn(r),o=Pb(r.converter,e);return Mf(n,[Nb(xf(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,Qn.exists(!1))]).then(()=>s)}function k4(r,...e){var n,s,o;r=Et(r);let u={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||hT(e[c])||(u=e[c++]);const m={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(hT(e[c])){const w=e[c];e[c]=(n=w.next)===null||n===void 0?void 0:n.bind(w),e[c+1]=(s=w.error)===null||s===void 0?void 0:s.bind(w),e[c+2]=(o=w.complete)===null||o===void 0?void 0:o.bind(w)}let p,g,_;if(r instanceof pt)g=Tn(r.firestore,Ei),_=vf(r._key.path),p={next:w=>{e[c]&&e[c](Ub(g,r,w))},error:e[c+1],complete:e[c+2]};else{const w=Tn(r,Da);g=Tn(w.firestore,Ei),_=w._query;const I=new $g(g);p={next:M=>{e[c]&&e[c](new va(g,I,w,M))},error:e[c+1],complete:e[c+2]},Mb(r._query)}return function(I,M,U,$){const B=new Ug($),X=new Vg(M,B,U);return I.asyncQueue.enqueueAndForget(async()=>Og(await Zh(I),X)),()=>{B.Ou(),I.asyncQueue.enqueueAndForget(async()=>kg(await Zh(I),X))}}(Cf(g),_,m,p)}function Mf(r,e){return function(s,o){const u=new mi;return s.asyncQueue.enqueueAndForget(async()=>i4(await p4(s),o,u)),u.promise}(Cf(r),e)}function Ub(r,e,n){const s=n.docs.get(e._key),o=new $g(r);return new ya(r,o,e._key,s,new eu(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){Bo=o})(jo),xr(new or("firestore",(s,{instanceIdentifier:o,options:u})=>{const c=s.getProvider("app").getImmediate(),m=new Ei(new ID(s.getProvider("auth-internal")),new xD(c,s.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ue(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mu(g.options.projectId,_)}(c,o),c);return u=Object.assign({useFetchStreams:n},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),Kn(m0,p0,e),Kn(m0,p0,"esm2017")})();const M4={apiKey:"AIzaSyD8b5eP3vmOx1z-4azTHAj6jNWaXw27NIY",authDomain:"my-workout-tracker-b9cee.firebaseapp.com",projectId:"my-workout-tracker-b9cee",storageBucket:"my-workout-tracker-b9cee.firebasestorage.app",messagingSenderId:"70331160079",appId:"1:70331160079:web:1fe0a00f8f4fc2b9e4357a",measurementId:"G-FS73HDHPF4"},Kg=iw(M4);TD(Kg);const Ti=nx(Kg),V4=new ui,lt=_4(Kg),P4=async()=>{const r=await hN(Ti,V4);L4(r);const e=nn(lt,"users",r.user.uid);return kf(e,{name:r.user.displayName,email:r.user.email,uid:r.user.uid},{merge:!0}),r};function L4(r){const e={name:r.user.displayName,isAuthenticated:!0};localStorage.setItem("user",JSON.stringify(e))}function U4(){const r=ur();return{handleGoogleSignIn:async()=>{try{await P4(),r("/dashboard")}catch(n){console.error("Sign in failed:",n)}}}}function j4(r,e){return B2(Ti,r,e)}const z4=({className:r})=>{const[e,n]=L.useState(""),[s,o]=L.useState(""),u=ur(),c=async m=>{m.preventDefault();try{await j4(e,s),u("/dashboard")}catch(p){alert("Login failed: "+p.message)}};return T.jsxs("form",{onSubmit:c,className:r,children:[T.jsxs("div",{className:"form-group",children:[T.jsx("label",{htmlFor:"email",children:"Email:"}),T.jsx("input",{className:"form-input",type:"email",id:"email",value:e,onChange:m=>n(m.target.value),required:!0})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{htmlFor:"password",children:"Password:"}),T.jsx("input",{className:"form-input",type:"password",id:"password",required:!0,value:s,onChange:m=>o(m.target.value)})]}),T.jsx("button",{type:"submit",children:"Login"})]})},B4=async(r,e)=>{const n=await z2(Ti,r,e),s=n.user,o=nn(lt,"users",s.uid);return await kf(o,{name:s.displayName,email:s.email,uid:s.uid,createdAt:new Date().toISOString()},{merge:!0}),n},mT=r=>{const e=[];return r.length<8&&e.push("At least 8 characters"),/[A-Z]/.test(r)||e.push("At least one uppercase letter"),/[a-z]/.test(r)||e.push("At least one lowercase letter"),/[0-9]/.test(r)||e.push("At least one number"),/[^a-zA-Z0-9]/.test(r)||e.push("At least one special character"),{isValid:e.length===0,missingRequirements:e,message:e.length===0?"Password meets all requirements":"Password does not meet requirements",status:{containsLowercaseLetter:/[a-z]/.test(r),containsUppercaseLetter:/[A-Z]/.test(r),containsNumericCharacter:/[0-9]/.test(r),containsNonAlphanumericCharacter:/[^a-zA-Z0-9]/.test(r),meetsMinPasswordLength:r.length>=8}}},pT=r=>{const n=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r);return{isValid:n,message:n?"Valid email":"Please enter a valid email address"}},q4=["tempmail.com","10minutemail.com","guerrillamail.com","mailinator.com","throwaway.email","temp-mail.org","fakeinbox.com","trashmail.com","yopmail.com"],gT=r=>{var n;const e=(n=r.split("@")[1])==null?void 0:n.toLowerCase();return q4.includes(e)},F4=({className:r})=>{const[e,n]=L.useState(""),[s,o]=L.useState(""),[u,c]=L.useState(""),[m,p]=L.useState(null),[g,_]=L.useState(!1),[w,I]=L.useState(!1),M=ur();L.useEffect(()=>{if(s){const X=mT(s);p(X)}else p(null)},[s]);const U=()=>{if(e){const X=pT(e);X.isValid?gT(e)?c("Disposable email addresses are not allowed"):c(""):c(X.message)}},$=async X=>{X.preventDefault(),I(!0);const re=pT(e);if(!re.isValid){c(re.message),I(!1);return}if(gT(e)){c("Disposable email addresses are not allowed"),I(!1);return}if(!mT(s).isValid){alert("Password does not meet requirements. Please check the requirements below."),I(!1);return}try{await B4(e,s),M("/dashboard")}catch(le){let me="Sign up failed. Please try again.";switch(le.code){case"auth/email-already-in-use":me="This email is already registered. Please login instead.",c(me);break;case"auth/invalid-email":me="Invalid email address.",c(me);break;case"auth/weak-password":me="Password is too weak. Please choose a stronger password.";break;case"auth/operation-not-allowed":me="Email/password accounts are not enabled. Please contact support.";break;case"auth/too-many-requests":me="Too many sign-up attempts. Please try again later.";break;default:me=le.message||me}alert(me)}finally{I(!1)}},B=()=>e&&s&&!u&&(m==null?void 0:m.isValid);return T.jsxs("form",{className:r,onSubmit:$,children:[T.jsxs("div",{className:"form-group",children:[T.jsx("label",{htmlFor:"email",children:"Email:"}),T.jsx("input",{className:"form-input",type:"email",id:"email",value:e,onChange:X=>{n(X.target.value),c("")},onBlur:U,required:!0,style:{borderColor:u?"#f44336":void 0}}),u&&T.jsx("p",{style:ir.errorText,children:u})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{htmlFor:"password",children:"Password:"}),T.jsxs("div",{style:ir.passwordContainer,children:[T.jsx("input",{className:"form-input",type:g?"text":"password",id:"password",value:s,onChange:X=>o(X.target.value),required:!0,style:{width:"100%",paddingRight:"60px"}}),T.jsx("button",{type:"button",onClick:()=>_(!g),style:ir.showButton,children:g?"Hide":"Show"})]}),s&&m&&T.jsxs("div",{style:ir.requirementsBox,children:[T.jsx("p",{style:ir.requirementsTitle,children:"Password Requirements:"}),T.jsxs("ul",{style:ir.requirementsList,children:[T.jsxs("li",{style:{...ir.requirement,color:m.status.meetsMinPasswordLength?"#4CAF50":"#666"},children:[m.status.meetsMinPasswordLength?"":""," ","At least 8 characters"]}),T.jsxs("li",{style:{...ir.requirement,color:m.status.containsUppercaseLetter?"#4CAF50":"#666"},children:[m.status.containsUppercaseLetter?"":""," ","One uppercase letter (A-Z)"]}),T.jsxs("li",{style:{...ir.requirement,color:m.status.containsLowercaseLetter?"#4CAF50":"#666"},children:[m.status.containsLowercaseLetter?"":""," ","One lowercase letter (a-z)"]}),T.jsxs("li",{style:{...ir.requirement,color:m.status.containsNumericCharacter?"#4CAF50":"#666"},children:[m.status.containsNumericCharacter?"":""," ","One number (0-9)"]}),T.jsxs("li",{style:{...ir.requirement,color:m.status.containsNonAlphanumericCharacter?"#4CAF50":"#666"},children:[m.status.containsNonAlphanumericCharacter?"":""," ","One special character"]})]})]})]}),T.jsx("button",{type:"submit",disabled:!B()||w,style:{opacity:B()&&!w?1:.5,cursor:B()&&!w?"pointer":"not-allowed"},children:w?"Signing up...":"Sign Up"})]})},ir={errorText:{color:"#f44336",fontSize:"12px",marginTop:"5px",marginBottom:0},passwordContainer:{position:"relative",display:"flex",alignItems:"center"},showButton:{position:"absolute",right:"10px",background:"none",border:"none",color:"#3498db",cursor:"pointer",fontSize:"12px",padding:"5px 10px"},requirementsBox:{marginTop:"10px",padding:"12px",backgroundColor:"#f9f9f9",borderRadius:"4px",border:"1px solid #e0e0e0"},requirementsTitle:{fontSize:"12px",fontWeight:"bold",marginBottom:"8px",marginTop:0,color:"#333"},requirementsList:{listStyle:"none",padding:0,margin:0},requirement:{fontSize:"12px",marginBottom:"4px",transition:"color 0.2s ease"}},H4=()=>{const{handleGoogleSignIn:r}=U4(),[e,n]=L.useState(!0);return T.jsx("div",{className:"auth-container",children:T.jsxs("div",{className:"auth-card",children:[T.jsx("div",{className:"auth-title",children:e?"Login":"Sign Up"}),T.jsxs("div",{className:"auth-form-wrapper",children:[T.jsx(z4,{className:`auth-form${e?" active":""}`}),T.jsx(F4,{className:`auth-form${e?"":" active"}`})]}),T.jsx("button",{className:"auth-btn auth-btn-google",onClick:r,children:"Sign in with Google"}),T.jsx("div",{className:"auth-switch",children:e?T.jsxs(T.Fragment,{children:["Don't have an account?",T.jsx("a",{href:"#",onClick:s=>{s.preventDefault(),n(!1)},children:"Sign Up"})]}):T.jsxs(T.Fragment,{children:["Already have an account?",T.jsx("a",{href:"#",onClick:s=>{s.preventDefault(),n(!0)},children:"Login"})]})})]})})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function G4(r,e,n,s){function o(u){return u instanceof n?u:new n(function(c){c(u)})}return new(n||(n=Promise))(function(u,c){function m(_){try{g(s.next(_))}catch(w){c(w)}}function p(_){try{g(s.throw(_))}catch(w){c(w)}}function g(_){_.done?u(_.value):o(_.value).then(m,p)}g((s=s.apply(r,[])).next())})}function $4(r,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},s,o,u,c;return c={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function m(g){return function(_){return p([g,_])}}function p(g){if(s)throw new TypeError("Generator is already executing.");for(;n;)try{if(s=1,o&&(u=g[0]&2?o.return:g[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,g[1])).done)return u;switch(o=0,u&&(g=[g[0]&2,u.value]),g[0]){case 0:case 1:u=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,o=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!u||g[1]>u[0]&&g[1]<u[3])){n.label=g[1];break}if(g[0]===6&&n.label<u[1]){n.label=u[1],u=g;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(g);break}u[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(r,n)}catch(_){g=[6,_],o=0}finally{s=u=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ro=function(){return Ro=Object.assign||function(e){for(var n,s=1,o=arguments.length;s<o;s++){n=arguments[s];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(e[u]=n[u])}return e},Ro.apply(this,arguments)},jb=function(r){return{loading:r==null,value:r}},K4=function(){return function(r,e){switch(e.type){case"error":return Ro(Ro({},r),{error:e.error,loading:!1,value:void 0});case"reset":return jb(e.defaultValue);case"value":return Ro(Ro({},r),{error:void 0,loading:!1,value:e.value});default:return r}}},Q4=function(r){var e=r?r():void 0,n=L.useReducer(K4(),jb(e)),s=n[0],o=n[1],u=L.useCallback(function(){var p=r?r():void 0;o({type:"reset",defaultValue:p})},[r]),c=L.useCallback(function(p){o({type:"error",error:p})},[]),m=L.useCallback(function(p){o({type:"value",value:p})},[]);return L.useMemo(function(){return{error:s.error,loading:s.loading,reset:u,setError:c,setValue:m,value:s.value}},[s.error,s.loading,u,c,m,s.value])},Y4=function(r,e){var n=Q4(function(){return r.currentUser}),s=n.error,o=n.loading,u=n.setError,c=n.setValue,m=n.value;return L.useEffect(function(){var p=H2(r,function(g){return G4(void 0,void 0,void 0,function(){var _;return $4(this,function(w){switch(w.label){case 0:return[3,4];case 1:return w.trys.push([1,3,,4]),[4,e.onUserChanged(g)];case 2:return w.sent(),[3,4];case 3:return _=w.sent(),u(_),[3,4];case 4:return c(g),[2]}})})},u);return function(){p()}},[r]),[m,o,s]};const zb=L.createContext();function X4({children:r}){const[e,n,s]=Y4(Ti),o=async()=>{try{await G2(Ti),console.log("User signed out successfully")}catch(u){throw console.error("Error signing out:",u),u}};return T.jsx(zb.Provider,{value:{user:e,loading:n,error:s,logout:o},children:r})}function Vu(){return L.useContext(zb)}function W4(){const[r,e]=L.useState(Gp());L.useEffect(()=>{const s=o=>{e(o.detail.theme)};return window.addEventListener("themechange",s),()=>window.removeEventListener("themechange",s)},[]);const n=()=>{const s=nI();e(s)};return T.jsx("button",{className:"btn btn-ghost btn-icon",onClick:n,"aria-label":`Switch to ${r==="dark"?"light":"dark"} theme`,title:`Switch to ${r==="dark"?"light":"dark"} theme`,children:r==="dark"?"":""})}const J4=()=>{const r=ur(),{user:e,logout:n}=Vu(),s=async()=>{try{await n(),r("/")}catch(o){console.error("Failed to sign out:",o),alert("Failed to sign out. Please try again.")}};return T.jsxs("div",{className:"dashboard-container",children:[T.jsx("div",{className:"dashboard-header",children:T.jsxs("div",{className:"dashboard-header-actions",children:[T.jsx(W4,{}),T.jsx("button",{className:"btn-sign-out",onClick:s,children:"Sign Out"})]})}),T.jsxs("div",{className:"nav-cards",children:[T.jsxs("div",{className:"nav-card create-program-card",onClick:()=>r("/CreateProgram"),children:[T.jsx("h3",{children:"Create New Program"}),T.jsx("p",{children:"Build a custom workout program tailored to your goals"}),T.jsx("div",{className:"card-action",children:"Get Started "})]}),T.jsxs("div",{className:"nav-card view-programs-card",onClick:()=>r("/ListOfUsersPrograms"),children:[T.jsx("h3",{children:"My Programs"}),T.jsx("p",{children:"View and manage your existing workout programs"}),T.jsx("div",{className:"card-action",children:"View Programs "})]})]}),T.jsxs("div",{className:"quick-stats",children:[T.jsx("h3",{children:"Quick Stats"}),T.jsxs("div",{className:"stats-grid",children:[T.jsxs("div",{className:"stat-item",children:[T.jsx("span",{className:"stat-label"}),T.jsx("span",{className:"stat-value",children:"-"})]}),T.jsxs("div",{className:"stat-item",children:[T.jsx("span",{className:"stat-label"}),T.jsx("span",{className:"stat-value",children:"-"})]}),T.jsxs("div",{className:"stat-item",children:[T.jsx("span",{className:"stat-label"}),T.jsx("span",{className:"stat-value",children:"-"})]})]}),T.jsx("p",{className:"stats-note",children:" Stats coming soon in future updates!"})]}),T.jsx("div",{className:"dashboard-footer",children:T.jsx("p",{children:"Thanks for testing my workout tracker! "})})]})};class Qg{watch(e,n,s){throw new Error("Not implemented")}}class Z4 extends Qg{watchUserPrograms(e,n,s){throw new Error("Not implemented")}getUserPrograms(e){throw new Error("Not implemented")}getProgram(e){throw new Error("Not implemented")}createProgram(e){throw new Error("Not implemented")}updateProgram(e,n){throw new Error("Not implemented")}deleteProgram(e){throw new Error("Not implemented")}}class eM extends Z4{watchUserPrograms(e,n,s){const o=vu(Es(lt,"programs"),li("createdBy","==",e));return k4(o,u=>{const c=[];u.forEach(m=>{c.push({id:m.id,...m.data()})}),n(c)},s)}async getUserPrograms(e){const n=vu(Es(lt,"programs"),li("createdBy","==",e)),s=await _u(n),o=[];return s.forEach(u=>{o.push({id:u.id,...u.data()})}),o}async getProgram(e){const n=nn(lt,"programs",e),s=await Ts(n);if(s.exists())return{id:s.id,...s.data()};throw new Error("Program not found")}async createProgram(e){return(await Lb(Es(lt,"programs"),e)).id}async updateProgram(e,n){const s=nn(lt,"programs",e);return await xh(s,n),!0}async deleteProgram(e){return await O4(nn(lt,"programs",e)),!0}}class tM extends Qg{getWorkout(e){throw new Error("Not implemented")}saveWorkoutProgress(e,n){throw new Error("Not implemented")}addWorkout(e,n){throw new Error("Not implemented")}updateWorkoutName(e,n,s){throw new Error("Not implemented")}getPreviousWeekSession(e,n,s){throw new Error("Not implemented")}}class nM extends tM{async getWorkout(e){const n=nn(lt,"workouts",e),s=await Ts(n);if(s.exists())return{id:s.id,...s.data()};throw new Error("Workout not found")}async saveWorkoutProgress(e,n){const s=nn(lt,"workouts",e);return await xh(s,{progress:n}),!0}async addWorkoutToProgram(e,n){try{const s=nn(lt,"programs",e),o=await Ts(s);if(!o.exists())throw new Error(`Program with ID ${e} not found`);const u=o.data(),c=u.workouts||[];console.log("Current Program Data:",u);const m=[...c,n];return await xh(s,{workouts:m}),n.id}catch(s){throw console.error("Error adding workout to program:",s),s}}async updateWorkoutName(e,n,s){try{const o=nn(lt,"programs",e),u=await Ts(o);if(!u.exists())throw new Error(`Program with ID ${e} not found`);const m=(u.data().workouts||[]).map(p=>p.id===n?{...p,name:s}:p);return await xh(o,{workouts:m}),!0}catch(o){throw console.error("Error updating workout name:",o),o}}async getPreviousWeekSession(e,n,s){try{const o=s-1;if(o<1)return null;const u=Es(lt,"sessions"),c=vu(u,li("userId","==",e),li("workoutTemplateId","==",n),li("week","==",o)),m=await _u(c);return m.empty?null:m.docs.map(_=>({id:_.id,..._.data()})).sort((_,w)=>{const I=new Date(_.timestamp).getTime();return new Date(w.timestamp).getTime()-I})[0]}catch(o){return console.error("Error fetching previous week session:",o),null}}async getSessionByTemplateAndWeek(e,n,s){try{const o=Es(lt,"sessions"),u=vu(o,li("userId","==",e),li("workoutTemplateId","==",n),li("week","==",s)),c=await _u(u);return c.empty?null:c.docs.map(g=>({id:g.id,...g.data()})).sort((g,_)=>{const w=new Date(g.timestamp).getTime();return new Date(_.timestamp).getTime()-w})[0]}catch(o){return console.error("Error fetching session by template and week:",o),null}}}class rM extends Qg{getTemplate(e,n){throw new Error("Method not implemented")}createTemplate(e,n){throw new Error("Method not implemented")}getOrCreateTemplate(e,n){throw new Error("Method not implemented")}getExerciseTemplates(e){throw new Error("Method not implemented")}getTemplateById(e,n){throw new Error("Method not implemented")}updateTemplate(e,n,s){throw new Error("Method not implemented")}}function yT(r){let e=r.trim().toLowerCase();return e=e.replace(/[^\w\s]/gi,""),e=e.replace(/[-_]/g," "),e=e.replace(/\s+/g," "),console.log("Standardized input:",e),e}class iM extends rM{constructor(){super(),this.templateCache=new Map}async getTemplate(e,n){const s=yT(n.name),o=`${e}:${s}`;if(this.templateCache.has(o))return this.templateCache.get(o);if(n.templateId)try{const m=await this.getTemplateById(e,n.templateId);if(m)return this.templateCache.set(o,m),m}catch(m){console.error("Error fetching template:",m)}const u=Es(lt,"users",e,"exerciseTemplates"),c=vu(u,li("standardizedName","==",s));try{const m=await _u(c);if(!m.empty){const p=m.docs[0],g={id:p.id,...p.data()};return this.templateCache.set(o,g),g}return null}catch(m){throw console.error("Error in getTemplate:",m),m}}async createTemplate(e,n){const s=yT(n.name),o=await this.getTemplate(e,n);if(o)return o;const u={name:n.name,standardizedName:s,category:n.category||"Other",defaultSets:n.sets?n.sets.map(_=>({reps:_.reps||"",weight:_.weight||null,rir:_.rir||""})):[{reps:"",weight:null,rir:""}],createdAt:new Date,userId:e},c=Es(lt,"users",e,"exerciseTemplates"),p={id:(await Lb(c,u)).id,...u},g=`${e}:${s}`;return this.templateCache.set(g,p),p}async getOrCreateTemplate(e,n){const s=await this.getTemplate(e,n);return s||await this.createTemplate(e,n)}async getTemplateById(e,n){try{const s=nn(lt,"users",e,"exerciseTemplates",n),o=await Ts(s);return o.exists()?{id:o.id,...o.data()}:null}catch(s){throw console.error("Error in getTemplateById:",s),s}}async getExerciseTemplates(e){try{const n=Es(lt,"users",e,"exerciseTemplates");return(await _u(n)).docs.map(o=>({id:o.id,...o.data()}))}catch(n){throw console.error("Error in getExerciseTemplates:",n),n}}async updateTemplate(e,n,s){try{const o=nn(lt,"users",e,"exerciseTemplates",n);return await kf(o,s,{merge:!0}),{id:n,...s}}catch(o){throw console.error("Error in updateTemplate:",o),o}}}class sM{constructor(){this._programRepository=new eM,this._workoutRepository=new nM,this._exerciseTemplateRepository=new iM}get programRepository(){return this._programRepository}get workoutRepository(){return this._workoutRepository}get exerciseTemplateRepository(){return this._exerciseTemplateRepository}}const Or=new sM,Bb=Object.freeze(Object.defineProperty({__proto__:null,repositoryFactory:Or},Symbol.toStringTag,{value:"Module"})),qb=Or.programRepository,aM=async r=>await qb.createProgram(r),oM=async r=>await qb.deleteProgram(r),lM=({program:r,setProgram:e})=>T.jsxs("div",{className:"program-details__container",children:[T.jsx("h2",{className:"program-details__heading",children:"Program Details"}),T.jsxs("div",{className:"program-details__form-group",children:[T.jsx("label",{children:"Program Name"}),T.jsx("input",{type:"text",required:!0,value:r.name,onChange:n=>e(s=>({...s,name:n.target.value})),placeholder:"Enter program name"})]}),T.jsxs("div",{className:"program-details__form-group",children:[T.jsx("label",{children:"Description"}),T.jsx("textarea",{value:r.description,onChange:n=>e(s=>({...s,description:n.target.value})),placeholder:"Describe your program",rows:"3"})]}),T.jsx("div",{className:"program-details__form-row",children:T.jsxs("div",{className:"program-details__form-group",children:[T.jsx("label",{children:"Duration (weeks)"}),T.jsx("input",{required:!0,type:"number",value:r.duration,onChange:n=>e(s=>({...s,duration:n.target.value})),placeholder:"e.g., 12"})]})})]}),uM=({exercise:r,setExercise:e,onAddExercise:n})=>{const[s,o]=L.useState([]);return L.useEffect(()=>{(async()=>{const c=Ti.currentUser;if(c)try{const m=await Or.exerciseTemplateRepository.getExerciseTemplates(c.uid);o(m||[])}catch(m){console.error("Error fetching templates:",m)}})()},[]),T.jsxs("div",{className:"exercise-form__section",children:[T.jsx("h3",{className:"exercise-form__heading",children:"Add Exercise"}),T.jsxs("div",{className:"exercise-form__row",children:[T.jsx("input",{type:"text",className:"exercise-form__input",value:r.name,onChange:u=>e(c=>({...c,name:u.target.value})),placeholder:"Exercise name",list:"exercise-templates"}),T.jsx("datalist",{id:"exercise-templates",children:s.map(u=>T.jsx("option",{value:u.name},u.id))}),T.jsx("input",{type:"number",className:"exercise-form__input",value:r.sets,onChange:u=>e(c=>({...c,sets:u.target.value})),placeholder:"Sets"}),T.jsx("input",{type:"text",className:"exercise-form__input",value:r.reps,onChange:u=>e(c=>({...c,reps:u.target.value})),placeholder:"Reps"}),T.jsx("button",{type:"button",onClick:n,className:"exercise-form__button",children:"Add"})]})]})},cM=({exercises:r,onRemoveExercise:e})=>r.length===0?null:T.jsx("div",{className:"exercise-list__container",children:r.map(n=>T.jsxs("div",{className:"exercise-list__item",children:[T.jsxs("span",{children:[n.name," - ",n.sets.length," sets x"," ",n.sets[0].reps," reps"," "]}),T.jsx("button",{onClick:()=>e(n.id),className:"exercise-list__remove-button","aria-label":`Remove ${n.name}`,title:`Remove ${n.name}`,children:"X"})]},n.id))}),hM=({workout:r,onRemoveWorkout:e})=>T.jsxs("div",{className:"workout-preview__container",children:[T.jsxs("div",{className:"workout-preview__header",children:[T.jsx("h5",{children:r.name}),T.jsx("button",{onClick:()=>e(r.id),className:"workout-preview__remove-button",children:"x"})]}),T.jsx("div",{className:"workout-preview__exercises",children:r.exercises.map(n=>T.jsxs("div",{className:"workout-preview__exercise",children:[T.jsx("div",{className:"workout-preview__exercise-name",children:n.name}),T.jsxs("div",{className:"workout-preview__exercise-details",children:[n.sets.length," sets  ",n.sets[0].reps," reps"]})]},n.id))})]}),fM=({program:r,onRemoveWorkout:e})=>T.jsxs("div",{className:"program-preview__step-content",children:[T.jsx("h2",{className:"program-preview__heading",children:"Program Preview"}),T.jsxs("div",{className:"program-preview__container",children:[T.jsxs("div",{className:"program-preview__header",children:[T.jsx("h3",{children:r.name||"Untitled Program"}),T.jsxs("div",{className:"program-preview__meta",children:[T.jsxs("span",{className:"program-preview__duration",children:[r.duration," weeks"]}),T.jsx("span",{className:"program-preview__difficulty",children:r.difficulty})]}),T.jsx("p",{className:"program-preview__description",children:r.description})]}),T.jsxs("div",{className:"program-preview__workouts",children:[T.jsxs("h4",{children:["Workouts (",r.workouts.length,")"]}),r.workouts.map(n=>T.jsx(hM,{workout:n,onRemoveWorkout:e},n.id))]}),r.workouts.length===0&&T.jsx("p",{className:"program-preview__no-workouts",children:"No workouts added yet. Go back to add some workouts!"})]})]}),dM=({workout:r,isEditing:e,onEdit:n,onUpdate:s,onCancel:o,onDelete:u})=>{const[c,m]=L.useState(r),[p,g]=L.useState(null),[_,w]=L.useState(null),[I,M]=L.useState(!1),[U,$]=L.useState({name:"",sets:"",reps:""});L.useEffect(()=>{e&&m({...r})},[e,r]);const B=()=>{s(r.id,c)},X=b=>{m(A=>({...A,exercises:A.exercises.filter(C=>C.id!==b)})),p===b&&(g(null),w(null))},re=b=>{g(b.id),w({...b}),M(!1)},Z=()=>{m(b=>({...b,exercises:b.exercises.map(A=>A.id===p?_:A)})),g(null),w(null)},le=()=>{g(null),w(null)},me=()=>{M(!0),g(null)},ae=()=>{if(!U.name.trim()){alert("Please enter an exercise name");return}if(!U.sets||U.sets<1){alert("Please enter number of sets");return}if(!U.reps){alert("Please enter reps");return}const b={id:Date.now().toString(),name:U.name,sets:Array.from({length:parseInt(U.sets)},()=>({reps:U.reps,weight:null,complete:!1}))};m(A=>({...A,exercises:[...A.exercises,b]})),$({name:"",sets:"",reps:""}),M(!1)},D=()=>{$({name:"",sets:"",reps:""}),M(!1)};return T.jsx("div",{className:`saved-workout-card ${e?"saved-workout-card--editing":""}`,children:e?T.jsxs("div",{className:"saved-workout-card__edit-mode",children:[T.jsx("div",{className:"saved-workout-card__edit-header",children:T.jsx("span",{className:"saved-workout-card__edit-indicator",children:" Editing Workout"})}),T.jsxs("div",{className:"saved-workout-card__edit-body",children:[T.jsxs("div",{className:"saved-workout-card__form-group",children:[T.jsx("label",{children:"Workout Name"}),T.jsx("input",{type:"text",value:c.name,onChange:b=>m(A=>({...A,name:b.target.value}))})]}),T.jsxs("div",{className:"saved-workout-card__edit-exercises",children:[T.jsxs("h5",{children:["Exercises (",c.exercises.length,")"]}),T.jsx("ul",{children:c.exercises.map(b=>{var C;const A=p===b.id;return T.jsx("li",{className:"saved-workout-card__exercise-item",children:A?T.jsxs("div",{className:"saved-workout-card__exercise-edit-form",children:[T.jsx("div",{className:"saved-workout-card__exercise-form-row",children:T.jsx("input",{type:"text",value:_.name,onChange:x=>w(O=>({...O,name:x.target.value})),placeholder:"Exercise name",className:"saved-workout-card__input-exercise-name"})}),T.jsx("div",{className:"saved-workout-card__exercise-form-row",children:T.jsx("input",{type:"number",value:_.sets.length,onChange:x=>{const O=parseInt(x.target.value)||1,N=Array.from({length:O},(pe,Ie)=>_.sets[Ie]||{reps:"10",weight:null,complete:!1});w(pe=>({...pe,sets:N}))},placeholder:"Sets",min:"1",className:"saved-workout-card__input-sets"})}),T.jsx("div",{className:"saved-workout-card__exercise-form-row",children:T.jsx("input",{type:"text",value:((C=_.sets[0])==null?void 0:C.reps)||"",onChange:x=>{const O=x.target.value;w(N=>({...N,sets:N.sets.map(pe=>({...pe,reps:O}))}))},placeholder:"Reps",className:"saved-workout-card__input-reps"})}),T.jsxs("div",{className:"saved-workout-card__exercise-edit-actions",children:[T.jsx("button",{onClick:Z,className:"saved-workout-card__btn-save-exercise",children:" Save"}),T.jsx("button",{onClick:le,className:"saved-workout-card__btn-cancel-exercise",children:"Cancel"})]})]}):T.jsxs("div",{className:"saved-workout-card__exercise-view",children:[T.jsxs("span",{className:"saved-workout-card__exercise-info",children:[T.jsx("strong",{children:b.name})," -"," ",b.sets.length," sets"]}),T.jsxs("div",{className:"saved-workout-card__exercise-actions",children:[T.jsx("button",{onClick:()=>re(b),className:"saved-workout-card__btn-edit-exercise",children:""}),T.jsx("button",{onClick:()=>X(b.id),className:"saved-workout-card__btn-delete-exercise",children:""})]})]})},b.id)})}),I?T.jsxs("div",{className:"saved-workout-card__add-exercise-form",children:[T.jsx("h6",{children:"Add New Exercise"}),T.jsx("div",{className:"saved-workout-card__exercise-form-row",children:T.jsx("input",{type:"text",value:U.name,onChange:b=>$(A=>({...A,name:b.target.value})),placeholder:"Exercise name",className:"saved-workout-card__input-exercise-name"})}),T.jsx("div",{className:"saved-workout-card__exercise-form-row",children:T.jsx("input",{type:"number",value:U.sets,onChange:b=>$(A=>({...A,sets:b.target.value})),placeholder:"Sets",min:"1",className:"saved-workout-card__input-sets"})}),T.jsx("div",{className:"saved-workout-card__exercise-form-row",children:T.jsx("input",{type:"text",value:U.reps,onChange:b=>$(A=>({...A,reps:b.target.value})),placeholder:"Reps",className:"saved-workout-card__input-reps"})}),T.jsxs("div",{className:"saved-workout-card__exercise-edit-actions",children:[T.jsx("button",{onClick:ae,className:"saved-workout-card__btn-save-exercise",children:" Add"}),T.jsx("button",{onClick:D,className:"saved-workout-card__btn-cancel-exercise",children:"Cancel"})]})]}):T.jsx("button",{onClick:me,className:"saved-workout-card__add-exercise-btn",children:" Add Exercise"})]})]}),T.jsxs("div",{className:"saved-workout-card__edit-actions",children:[T.jsx("button",{onClick:B,className:"saved-workout-card__btn-save-workout",children:" Save Changes"}),T.jsx("button",{onClick:o,className:"saved-workout-card__btn-cancel-workout",children:"Cancel"})]})]}):T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"saved-workout-card__header",children:T.jsx("h4",{children:r.name})}),T.jsx("div",{className:"saved-workout-card__exercises",children:T.jsx("ul",{children:r.exercises.map(b=>T.jsxs("li",{children:[T.jsx("strong",{children:b.name})," - ",b.sets.length," sets"]},b.id))})}),T.jsxs("div",{className:"saved-workout-card__actions",children:[T.jsx("button",{onClick:n,className:"saved-workout-card__btn-edit",children:" Edit"}),T.jsx("button",{onClick:()=>{window.confirm(`Are you sure you want to delete "${r.name}"?

This will delete the entire workout and all its exercises.

This action cannot be undone.`)&&u(r.id)},className:"saved-workout-card__btn-delete",children:" Delete"})]})]})})},mM=({currentWorkout:r,setCurrentWorkout:e,currentExercise:n,setCurrentExercise:s,onAddExercise:o,onRemoveExercise:u,onAddWorkout:c,showSuccessMessage:m,lastAddedWorkout:p,onEditWorkout:g,editingWorkoutId:_,onCancelEdit:w,onUpdateWorkout:I,onRemoveWorkout:M,program:U})=>T.jsxs("div",{className:"workout-builder__container",children:[T.jsx("h2",{className:"workout-builder__heading",children:"Build Your Workouts"}),m&&T.jsxs("div",{className:"workout-builder__success-toast",children:[' "',p,'" added to your program!']}),T.jsxs("div",{className:"workout-builder__draft-card",children:[T.jsxs("div",{className:"workout-builder__draft-header",children:[T.jsx("span",{className:"workout-builder__draft-indicator",children:"Building Workout"}),r.name&&T.jsxs("span",{className:"workout-builder__draft-title",children:[" ",'"',r.name,'"']}),T.jsx("div",{className:"workout-builder__draft-body",children:T.jsxs("div",{className:"workout-builder__form-group",children:[T.jsx("label",{className:"workout-builder__form-label",children:"Workout Name"}),T.jsx("input",{type:"text",value:r.name,onChange:$=>e(B=>({...B,name:$.target.value})),placeholder:"e.g., Upper Body Day"})]})})]}),T.jsx(uM,{exercise:n,setExercise:s,onAddExercise:o}),r.exercises.length>0&&T.jsxs("div",{className:"workout-builder__draft-exercises",children:[T.jsxs("h4",{children:["Exercises in this workout (",r.exercises.length,")"]}),T.jsx(cM,{exercises:r.exercises,onRemoveExercise:u})]}),T.jsx("div",{className:"workout-builder__draft-footer",children:r.exercises.length>0&&T.jsxs("button",{onClick:c,className:"btn-primary",children:['Save "',r.name||"Workout",'" to Program']})})]}),T.jsxs("div",{className:"workout-builder__saved-workouts",children:[T.jsx("h3",{children:" Workouts in Your Program"}),U.workouts.length>0?T.jsx("div",{className:"workout-builder__saved-workouts-list",children:U.workouts.map($=>T.jsx(dM,{workout:$,isEditing:$.id===_,onEdit:()=>g($.id),onUpdate:I,onCancel:w,onDelete:()=>M($.id)},$.id))}):T.jsx("p",{className:"workout-builder__empty-state",children:"No workouts added yet. Complete the workout above to add it!"})]})]}),pM=({currentStep:r,steps:e})=>T.jsx("div",{className:"step-indicator",children:e.map((n,s)=>T.jsx("div",{className:`step ${r>=s+1?"active":""}`,children:n},s))}),$t=[];for(let r=0;r<256;++r)$t.push((r+256).toString(16).slice(1));function gM(r,e=0){return($t[r[e+0]]+$t[r[e+1]]+$t[r[e+2]]+$t[r[e+3]]+"-"+$t[r[e+4]]+$t[r[e+5]]+"-"+$t[r[e+6]]+$t[r[e+7]]+"-"+$t[r[e+8]]+$t[r[e+9]]+"-"+$t[r[e+10]]+$t[r[e+11]]+$t[r[e+12]]+$t[r[e+13]]+$t[r[e+14]]+$t[r[e+15]]).toLowerCase()}let ap;const yM=new Uint8Array(16);function vM(){if(!ap){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ap=crypto.getRandomValues.bind(crypto)}return ap(yM)}const _M=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),vT={randomUUID:_M};function _a(r,e,n){var o;if(vT.randomUUID&&!r)return vT.randomUUID();r=r||{};const s=r.random??((o=r.rng)==null?void 0:o.call(r))??vM();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,gM(s)}function EM(r,e){const n=Number.isInteger(e)&&e>0?e:parseInt(e,10)>0?parseInt(e,10):1,s=[];for(let o=1;o<=n;o++)for(const u of r)s.push({...u,week:o,id:_a(),templateId:u.templateId});return s}const TM=()=>{const r=ur(),[e,n]=L.useState(1),[s,o]=L.useState({name:"",description:"",duration:"",difficulty:"beginner",workouts:[]}),[u,c]=L.useState({name:"",exercises:[]}),[m,p]=L.useState({name:"",sets:"",reps:"",weight:"",restTime:""}),[g,_]=L.useState(!1),[w,I]=L.useState(""),[M,U]=L.useState(null),$=async()=>{if(m.name&&m.sets&&m.reps){const C=parseInt(m.sets)||1,x=Array.from({length:C},()=>({reps:m.reps,weight:m.weight||null,complete:!1}));let O={name:m.name,sets:x,id:_a()};const N=Ti.currentUser;if(N)try{const pe=await Or.exerciseTemplateRepository.getOrCreateTemplate(N.uid,O);O={...O,templateId:pe.id},console.log("Created exercise with template ID:",O)}catch(pe){console.error("Error creating exercise template:",pe)}c(pe=>({...pe,exercises:[...pe.exercises,O]})),console.log(O),p({name:"",sets:"",reps:"",weight:"",restTime:""})}},B=C=>{U(C)},X=()=>{U(null)},re=(C,x)=>{o(O=>({...O,workouts:O.workouts.map(N=>N.id===C?{...x,id:C}:N)})),U(null),I(x.name),_(!0),setTimeout(()=>_(!1),3e3)},Z=()=>{const C=u.name;u.name&&u.exercises.length>0&&(M?(o(x=>({...x,workouts:x.workouts.map(O=>O.id===M?{...u,id:M}:O)})),U(null),I(C),_(!0),setTimeout(()=>_(!1),3e3)):(o(x=>({...x,workouts:[...x.workouts,{...u,id:_a(),templateId:_a()}]})),I(C),_(!0),setTimeout(()=>_(!1),3e3)),c({name:"",exercises:[]}))},le=C=>{c(x=>({...x,exercises:x.exercises.filter(O=>O.id!==C)}))},me=C=>{o(x=>({...x,workouts:x.workouts.filter(O=>O.id!==C)}))},ae=async(C,x)=>{const O=JSON.parse(JSON.stringify(C));for(const N of O)if(N.exercises&&N.exercises.length>0)for(let pe=0;pe<N.exercises.length;pe++){const Ie=N.exercises[pe];if(!Ie.templateId)try{const H=await Or.exerciseTemplateRepository.getOrCreateTemplate(x,Ie);N.exercises[pe]={...Ie,templateId:H.id},console.log(`Added template ID ${H.id} to exercise ${Ie.name}`)}catch(H){console.error(`Error creating template for ${Ie.name}:`,H)}}return O},D=async()=>{const C=Ti.currentUser;if(!C){alert("You must be logged in to save a program.");return}try{let x=[...s.workouts];x=await ae(x,C.uid);const O=EM(x,s.duration),N={...s,workouts:O,createdBy:C.uid,createdAt:new Date},pe=await aM(N);alert("Program saved successfully! ID: "+pe),r(`/ExecuteProgram/${pe}`)}catch(x){console.error("Error saving program:",x),alert("Failed to save program: "+x.message)}},b=()=>{switch(e){case 1:return T.jsx(lM,{program:s,setProgram:o});case 2:return T.jsx(mM,{currentWorkout:u,setCurrentWorkout:c,currentExercise:m,setCurrentExercise:p,onAddExercise:$,onEditWorkout:B,editingWorkoutId:M,onUpdateWorkout:re,onCancelEdit:X,onRemoveExercise:le,onAddWorkout:Z,onRemoveWorkout:me,program:s,showSuccessMessage:g,lastAddedWorkout:w});case 3:return T.jsx(fM,{program:s,onRemoveWorkout:me});default:return null}},A=["Details","Workouts","Preview"];return T.jsxs("div",{className:"create-program-container",children:[T.jsx("div",{className:"create-program-header",children:T.jsx(pM,{currentStep:e,steps:A})}),T.jsx("div",{className:"create-program-content",children:b()}),T.jsxs("div",{className:"create-program-actions",children:[e>1&&T.jsx("button",{onClick:()=>n(e-1),className:"btn-secondary",children:"Previous"}),e<3?T.jsx("button",{onClick:()=>n(e+1),className:"btn-primary",disabled:e===1&&(!s.name||!s.duration)||e===2&&s.workouts.length===0,children:"Next"}):T.jsx("button",{onClick:D,className:"btn-success",disabled:!s.name||s.workouts.length===0,children:"Save"}),T.jsx("button",{onClick:()=>r("/dashboard"),className:"btn-cancel",children:"Cancel"})]})]})};function tf({actions:r,trigger:e}){const[n,s]=L.useState(!1),o=L.useRef();return L.useEffect(()=>{function u(c){o.current&&!o.current.contains(c.target)&&s(!1)}return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]),T.jsxs("div",{className:"dropdown",ref:o,children:[T.jsx("button",{className:"dropdown-trigger",onClick:u=>{u.stopPropagation(),s(c=>!c)},children:e||""}),n&&T.jsx("div",{className:"dropdown-content",children:r.map((u,c)=>T.jsx("button",{className:"dropdown-item",onClick:m=>{u.onClick(m),s(!1)},children:u.label},c))})]})}const wM=()=>{const r=ur(),{programId:e}=kT(),{logout:n}=Vu(),[s,o]=L.useState(null),[u,c]=L.useState(1),[m,p]=L.useState(!0),[g,_]=L.useState(""),[w,I]=L.useState(!1),[M,U]=L.useState(null),$=async()=>{try{await n(),r("/")}catch(ae){console.error("Failed to sign out:",ae),alert("Failed to sign out. Please try again.")}},B=async(ae,D)=>{try{await Or.workoutRepository.updateWorkoutName(e,ae,D),o(b=>({...b,workouts:b.workouts.map(A=>A.id===ae?{...A,name:D}:A)}))}catch(b){console.error(" Test failed:",b),alert(` Test failed: ${b.message}`)}console.log(s)},X=ae=>{U(ae),I(!0)},re=async()=>{M&&g.trim()&&await B(M,g.trim()),I(!1),U(null),_("")},Z=async()=>{const ae={id:_a(),templateId:_a(),name:"New Workout - double click to edit name",week:u,exercises:[],createdAt:new Date};try{await Or.workoutRepository.addWorkoutToProgram(e,ae),o(D=>({...D,workouts:[...D.workouts,ae]})),console.log("Updated userProgram state:",{...s,workouts:[...s.workouts,ae]}),alert(" Successful! Added workout")}catch(D){console.error(" Test failed:",D),alert(` Test failed: ${D.message}`)}};L.useEffect(()=>{(async()=>{try{const D=nn(lt,"programs",e),b=await Ts(D);if(console.log(b),b.exists()){const A=b.data();console.log(A.workouts),o(A),c(1)}else o(null);p(!1)}catch(D){console.error("Failed to fetch program:",D),p(!1)}})()},[e]);const le=s?s.workouts.filter(ae=>ae.week===u):[],me=ae=>{c(ae)};return m?T.jsx("div",{className:"execute-program-container",children:T.jsx("div",{className:"loading",children:"Loading your program..."})}):s?T.jsxs("div",{className:"execute-program-container",children:[T.jsxs("div",{className:"execute-program-header",children:[T.jsx("nav",{className:"breadcrumb",children:T.jsx(tf,{actions:[{label:"Home",onClick:ae=>{ae.stopPropagation(),r("/dashboard")}},{label:"Create Program",onClick:ae=>{ae.stopPropagation(),r("/CreateProgram")}},{label:"Sign Out",onClick:ae=>{ae.stopPropagation(),$()}}],trigger:T.jsx("span",{children:""})})}),T.jsx("h1",{children:s.name}),T.jsxs("div",{className:"program-info",children:[T.jsxs("span",{children:["Week ",u," of ",s.duration]}),T.jsx("span",{children:s.difficulty})]})]}),T.jsx("div",{className:"week-navigation",children:Array.from({length:parseInt(s.duration,10)},(ae,D)=>D+1).map(ae=>T.jsxs("button",{className:`week-btn ${u===ae?"active":""}`,onClick:()=>me(ae),children:["Week ",ae]},ae))}),T.jsxs("div",{className:"week-content",children:[T.jsxs("h2",{children:["Week ",u," Workouts"]}),T.jsx("nav",{className:"add-workout-menu",children:T.jsx(tf,{actions:[{label:"Add Workout",onClick:ae=>{ae.stopPropagation(),Z()}}],trigger:T.jsx("span",{children:"+"})})}),le.length===0?T.jsx("div",{className:"no-workouts",children:"No workouts scheduled for this week"}):T.jsx("div",{className:"workouts-grid",children:le.map(ae=>T.jsxs("div",{className:"execution-workout-card",children:[T.jsx("div",{className:"execution-workout-card-header",children:w&&M===ae.id?T.jsx("input",{type:"text",value:g,onChange:D=>_(D.target.value),onBlur:re,onKeyDown:D=>{D.key==="Enter"&&re(),D.key==="Escape"&&(I(!1),U(null),_(""))},autoFocus:!0}):T.jsx("h3",{onDoubleClick:()=>X(ae.id,ae.name),children:ae.name})}),T.jsx("div",{className:"workout-exercises",children:ae.exercises.map(D=>T.jsx("div",{className:"exercise-summary",children:T.jsx("span",{className:"exercise-name",children:D.name})},D.id))}),T.jsx("div",{className:"workout-actions",children:T.jsx("button",{onClick:()=>r(`/CurrentSession/${e}/${ae.id}`),className:"btn-primary",children:"Start Workout"})})]},ae.id))})]})]}):T.jsx("div",{className:"execute-program-container",children:T.jsx("div",{className:"error",children:"Failed to load program"})})};var Fb={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},_T=ga.createContext&&ga.createContext(Fb),SM=["attr","size","title"];function bM(r,e){if(r==null)return{};var n=AM(r,e),s,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(r);for(o=0;o<u.length;o++)s=u[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(r,s)&&(n[s]=r[s])}return n}function AM(r,e){if(r==null)return{};var n={};for(var s in r)if(Object.prototype.hasOwnProperty.call(r,s)){if(e.indexOf(s)>=0)continue;n[s]=r[s]}return n}function nf(){return nf=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},nf.apply(this,arguments)}function ET(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,s)}return n}function rf(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ET(Object(n),!0).forEach(function(s){RM(r,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):ET(Object(n)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(n,s))})}return r}function RM(r,e,n){return e=IM(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function IM(r){var e=CM(r,"string");return typeof e=="symbol"?e:e+""}function CM(r,e){if(typeof r!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var s=n.call(r,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Hb(r){return r&&r.map((e,n)=>ga.createElement(e.tag,rf({key:n},e.attr),Hb(e.child)))}function Pu(r){return e=>ga.createElement(NM,nf({attr:rf({},r.attr)},e),Hb(r.child))}function NM(r){var e=n=>{var{attr:s,size:o,title:u}=r,c=bM(r,SM),m=o||n.size||"1em",p;return n.className&&(p=n.className),r.className&&(p=(p?p+" ":"")+r.className),ga.createElement("svg",nf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,c,{className:p,style:rf(rf({color:r.color||n.color},n.style),r.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),u&&ga.createElement("title",null,u),r.children)};return _T!==void 0?ga.createElement(_T.Consumer,null,n=>e(n)):e(Fb)}function xM(r){return Pu({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M0 64C0 28.7 28.7 0 64 0L224 0l0 128c0 17.7 14.3 32 32 32l128 0 0 38.6C310.1 219.5 256 287.4 256 368c0 59.1 29.1 111.3 73.7 143.3c-3.2 .5-6.4 .7-9.7 .7L64 512c-35.3 0-64-28.7-64-64L0 64zm384 64l-128 0L256 0 384 128zm48 96a144 144 0 1 1 0 288 144 144 0 1 1 0-288zm0 240a24 24 0 1 0 0-48 24 24 0 1 0 0 48zM368 321.6l0 6.4c0 8.8 7.2 16 16 16s16-7.2 16-16l0-6.4c0-5.3 4.3-9.6 9.6-9.6l40.5 0c7.7 0 13.9 6.2 13.9 13.9c0 5.2-2.9 9.9-7.4 12.3l-32 16.8c-5.3 2.8-8.6 8.2-8.6 14.2l0 14.8c0 8.8 7.2 16 16 16s16-7.2 16-16l0-5.1 23.5-12.3c15.1-7.9 24.5-23.6 24.5-40.6c0-25.4-20.6-45.9-45.9-45.9l-40.5 0c-23 0-41.6 18.6-41.6 41.6z"},child:[]}]})(r)}function DM(r){return Pu({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-242.7c0-17-6.7-33.3-18.7-45.3L352 50.7C340 38.7 323.7 32 306.7 32L64 32zm0 96c0-17.7 14.3-32 32-32l192 0c17.7 0 32 14.3 32 32l0 64c0 17.7-14.3 32-32 32L96 224c-17.7 0-32-14.3-32-32l0-64zM224 288a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"},child:[]}]})(r)}function TT(r){return Pu({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l224 0 0-112c0-26.5 21.5-48 48-48l112 0 0-224c0-35.3-28.7-64-64-64L64 32zM448 352l-45.3 0L336 352c-8.8 0-16 7.2-16 16l0 66.7 0 45.3 32-32 64-64 32-32z"},child:[]}]})(r)}function OM(r){return Pu({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M410.3 231l11.3-11.3-33.9-33.9-62.1-62.1L291.7 89.8l-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L387.7 253.7 410.3 231zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9L59.4 452l23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1 0 32c0 8.8 7.2 16 16 16l32 0zM362.7 18.7L348.3 33.2 325.7 55.8 314.3 67.1l33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5L453.3 18.7c-25-25-65.5-25-90.5 0zm-47.4 168l-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z"},child:[]}]})(r)}function kM(r){return Pu({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"},child:[]}]})(r)}const MM=({notes:r,onSave:e})=>{const[n,s]=L.useState(!1),[o,u]=L.useState(r||""),[c,m]=L.useState(!1),p=1e3,g=o.length,_=g>p*.8,w=g>p,I=()=>{s(!0),m(!1),u(r||"")},M=()=>{s(!1),m(!1)},U=()=>m(!0),$=()=>{g<=p&&(e(o.trim()),m(!1),s(!1))},B=()=>{u(r||""),m(!1)},X=r&&r.trim().length>0;return T.jsxs(T.Fragment,{children:[T.jsx("button",{onClick:I,className:`notes-icon-btn ${X?"has-notes":""}`,"aria-label":"View session notes",title:X?"View notes":"Add notes",children:T.jsx(TT,{})}),n&&T.jsx("div",{className:"modal-backdrop",onClick:M,children:T.jsxs("div",{className:"modal-content",onClick:re=>re.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:[T.jsxs("div",{className:"modal-header",children:[T.jsxs("h2",{id:"modal-title",children:[T.jsx(TT,{}),"Session Notes"]}),T.jsx("button",{onClick:M,className:"close-btn","aria-label":"Close modal",children:T.jsx(kM,{})})]}),T.jsx("div",{className:"modal-body",children:c?T.jsxs(T.Fragment,{children:[T.jsx("textarea",{className:"notes-textarea",value:o,onChange:re=>u(re.target.value),placeholder:"Add your session notes here...",maxLength:p,autoFocus:!0}),T.jsxs("div",{className:`character-counter ${_?"warning":""} ${w?"error":""}`,children:[g," / ",p," characters"]})]}):T.jsx("div",{className:`notes-content ${o?"":"empty"}`,children:o||T.jsxs(T.Fragment,{children:[T.jsx(xM,{}),T.jsx("span",{children:"No notes available."})]})})}),T.jsx("div",{className:`modal-footer ${c?"":"space-between"}`,children:c?T.jsxs(T.Fragment,{children:[T.jsx("button",{className:"notes-modal-btn btn-cancel",onClick:B,children:"Cancel"}),T.jsxs("button",{className:"notes-modal-btn btn-save",onClick:$,disabled:w,children:[T.jsx(DM,{}),"Save Notes"]})]}):T.jsxs(T.Fragment,{children:[T.jsx("button",{className:"notes-modal-btn btn-cancel",onClick:M,children:"Close"}),T.jsxs("button",{className:"notes-modal-btn btn-edit",onClick:U,"aria-label":"Edit notes",children:[T.jsx(OM,{}),o?"Edit":"Add Notes"]})]})})]})})]})},VM=({workout:r,setWorkout:e,handleSaveSession:n,saveSuccess:s})=>{const o=u=>{e(c=>({...c,notes:u}))};return T.jsxs("div",{className:"session-actions",children:[T.jsx(MM,{notes:r.notes,onSave:o}),T.jsx("div",{className:"session-action-buttons",children:T.jsx("button",{className:`btn-save ${s?"btn-save-success":""}`,onClick:n,children:s?"Saved!":"Save Session"})})]})},PM=({workout:r})=>T.jsxs("div",{className:"session-header",children:[T.jsxs("h1",{className:"session-title",children:[r.name," "]}),T.jsx("div",{className:"session-meta",children:T.jsxs("span",{children:["Week ",r.week," "]})})]});function Gb({actions:r,trigger:e}){const[n,s]=L.useState(!1),o=L.useRef();return L.useEffect(()=>{function u(c){o.current&&!o.current.contains(c.target)&&s(!1)}return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]),T.jsxs("div",{className:"dropdown",ref:o,children:[T.jsx("button",{className:"dropdown-trigger",onClick:()=>s(u=>!u),children:e||""}),n&&T.jsx("div",{className:"dropdown-content",children:r.map((u,c)=>T.jsx("button",{className:"dropdown-item",onClick:m=>{u.onClick(m),s(!1)},children:u.label},c))})]})}const LM=({exercise:r,onExpand:e,dragHandleProps:n})=>T.jsx("div",{className:"collapsed-exercise-inner",onClick:e,children:T.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[T.jsx("div",{className:"drag-handle",...n,children:""}),T.jsx("h2",{className:"exercise-name",children:r.name})]})}),UM=({exercises:r,setWorkout:e,handleDeleteExercise:n})=>{const[s,o]=L.useState(null),[u,c]=L.useState(null),[m,p]=L.useState(null),[g,_]=L.useState(null),w=b=>{c(A=>A===b?null:b)},I=(b,A)=>{e(C=>({...C,exercises:C.exercises.map((x,O)=>O===b?{...x,name:A}:x)}))},M=(b,A)=>{e(C=>{const x=C.exercises.map((O,N)=>{if(N!==b)return O;const pe=O.sets.filter((Ie,H)=>H!==A);return{...O,sets:pe}});return{...C,exercises:x}})},U=(b,A,C)=>{e(x=>{const O=x.exercises.map((N,pe)=>{if(pe!==b)return N;const Ie=N.sets.map((H,se)=>se!==A?H:{...H,reps:C});return{...N,sets:Ie}});return{...x,exercises:O}})},$=(b,A,C)=>{e(x=>{const O=x.exercises.map((N,pe)=>{if(pe!==b)return N;const Ie=N.sets.map((H,se)=>se!==A?H:{...H,weight:C});return{...N,sets:Ie}});return{...x,exercises:O}})},B=(b,A,C)=>{e(x=>{const O=x.exercises.map((N,pe)=>{if(pe!==b)return N;const Ie=N.sets.map((H,se)=>se!==A?H:{...H,rir:C});return{...N,sets:Ie}});return{...x,exercises:O}})},X=(b,A)=>{e(C=>{const x=C.exercises.map((O,N)=>N!==b?O:{...O,sets:O.sets.map((pe,Ie)=>Ie!==A?pe:{...pe,complete:!pe.complete})});return{...C,exercises:x}})},re=b=>{e(A=>{const C=A.exercises.map((x,O)=>O!==b?x:{...x,sets:[...x.sets,{reps:"",weight:"",complete:!1}]});return{...A,exercises:C}})},Z=L.useRef(0),le=L.useRef(0),me=()=>{if(!(Z.current===null||le.current===null)){if(Z.current!==le.current){const b=[...r],A=b[Z.current];b[Z.current]=b[le.current],b[le.current]=A,e(C=>({...C,exercises:b}))}Z.current=null,le.current=null}},[ae,D]=L.useState([]);return L.useEffect(()=>{(async()=>{const A=Ti.currentUser;if(A)try{const C=await Or.exerciseTemplateRepository.getExerciseTemplates(A.uid);D(C||[])}catch(C){console.error("Error fetching templates:",C)}})()},[]),T.jsx("div",{className:"exercise-list-session",children:r.map((b,A)=>T.jsx("div",{className:`exercise-card 
            ${u===b.id?"expanded":"collapsed"} 
            ${m===b.id?"dragging":""} 
            ${g===b.id?"drag-over":""}
          `,onDragOver:C=>C.preventDefault(),onDragEnter:()=>{le.current=A,_(b.id)},onDragLeave:()=>{g===b.id&&_(null)},"data-id":b.id,children:u===b.id?T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"exercise-header",children:s===b.id?T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"name-container edit-mode",children:[T.jsx("input",{type:"text",value:b.name,onChange:C=>I(A,C.target.value),className:"edit-exercise-name",list:"exercise-templates"}),T.jsx("datalist",{id:"exercise-templates",children:ae.map(C=>T.jsx("option",{value:C.name},C.id))})]}),T.jsxs("div",{className:"edit-actions",children:[T.jsx("button",{className:"btn-save-edit",onClick:()=>o(null),children:"Save"}),T.jsx("button",{className:"btn-cancel-edit",onClick:()=>o(null),children:"X"})]})]}):T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"drag-handle",draggable:!0,onDragStart:C=>{Z.current=A,p(b.id);const x=C.target.closest(".exercise-card");if(x){const O=x.getBoundingClientRect();C.dataTransfer.setDragImage(x,C.clientX-O.left,C.clientY-O.top)}},onDragEnd:()=>{me(),p(null),_(null);const C=document.querySelector(`.exercise-card[data-id="${b.id}"]`);C&&(C.classList.add("dropped"),setTimeout(()=>{C.classList.remove("dropped")},300))},children:""}),T.jsx("div",{className:"name-container",children:T.jsx("h2",{className:"exercise-name",children:b.name})}),T.jsx(Gb,{actions:[{label:"Edit",onClick:C=>{C.stopPropagation(),o(b.id)}},{label:"Delete",onClick:C=>{C.stopPropagation(),n(b.id)}}],trigger:T.jsx("span",{children:""})})]})}),T.jsx("div",{className:"sets-list",children:Array.from({length:Number(b.sets.length)}).map((C,x)=>{var O,N,pe,Ie;return T.jsxs("div",{className:"set-row",children:[T.jsx("input",{type:"number",className:"input-weight",placeholder:"Weight",value:((O=b.sets[x])==null?void 0:O.weight)||"",onChange:H=>$(A,x,H.target.value)}),T.jsx("input",{type:"number",className:"input-reps",placeholder:"Reps",value:((N=b.sets[x])==null?void 0:N.reps)||"",onChange:H=>U(A,x,H.target.value)}),T.jsx("input",{type:"number",className:"input-rir",placeholder:"RIR",value:((pe=b.sets[x])==null?void 0:pe.rir)||"",onChange:H=>B(A,x,H.target.value)}),s===b.id?T.jsx("button",{className:"btn-delete-set",onClick:()=>M(A,x),children:"X"}):T.jsx("div",{className:"set-complete-checkbox",children:T.jsx("input",{type:"checkbox",checked:((Ie=b.sets[x])==null?void 0:Ie.complete)||!1,onChange:()=>X(A,x)})})]},x)})}),T.jsx("button",{className:"btn-add-set",onClick:()=>re(A),children:"Add Set"})]}):T.jsx(LM,{exercise:b,onExpand:()=>w(b.id),dragHandleProps:{draggable:!0,onDragStart:C=>{Z.current=A,p(b.id);const x=C.target.closest(".exercise-card");if(x){const O=x.getBoundingClientRect();C.dataTransfer.setDragImage(x,C.clientX-O.left,C.clientY-O.top)}},onDragEnd:()=>{me(),p(null),_(null);const C=document.querySelector(`.exercise-card[data-id="${b.id}"]`);C&&(C.classList.add("dropped"),setTimeout(()=>{C.classList.remove("dropped")},300))}}})},b.id))})},jM=({previousSession:r,isLoading:e,programId:n,workoutId:s})=>{const[o,u]=L.useState(!1),[c,m]=L.useState(!1),p=ur(),g=M=>{M.stopPropagation(),p(`/CurrentSession/${n}/${s}?week=${r.week}`)};if(e)return T.jsx("div",{className:"previous-week-summary loading",children:T.jsx("div",{className:"summary-header",children:T.jsx("span",{children:"Loading previous week data..."})})});if(!r)return T.jsx("div",{className:"previous-week-summary no-data",children:T.jsx("div",{className:"summary-header",children:T.jsx("span",{children:"No previous week data available"})})});const _=()=>{u(!o)},w=()=>{m(!c)},I=M=>{const U=M.weight?`${M.weight}lbs`:"BW",$=M.reps||"0";return`${U}  ${$}`};return console.log("PreviousWeekSummary previousSession:",r),T.jsxs("div",{className:"previous-week-summary",children:[T.jsxs("div",{className:"summary-header",onClick:_,children:[T.jsxs("div",{className:"header-content",children:[T.jsx("h3",{children:"Last Week's Performance"}),T.jsxs("span",{onClick:g,style:{cursor:"pointer"},className:"week-info",children:["Week ",r.week]})]}),T.jsx("button",{className:"toggle-btn",children:o?"":""})]}),o&&T.jsxs("div",{className:"summary-content",children:[T.jsx("div",{className:"session-date",children:new Date(r.timestamp).toLocaleDateString()}),T.jsxs("div",{className:"collapsible-notes-panel",children:[T.jsxs("div",{className:"notes-panel-header",onClick:w,style:{cursor:"pointer",display:"flex",alignItems:"center",marginBottom:"8px"},"aria-expanded":c,"aria-controls":"session-notes",id:"notes-panel-header",children:[T.jsx("span",{className:"notes-chevron",style:{marginRight:"6px"},children:c?"":""}),T.jsx("span",{className:"notes-label",children:"Session Notes"})]}),c&&T.jsx("div",{className:"session-notes",id:"session-notes",children:r.notes||"No notes"})]}),T.jsx("div",{className:"exercises-list",children:r.exercises.map((M,U)=>T.jsxs("div",{className:"exercise-item",children:[T.jsx("div",{className:"exercise-name-previous-week",children:M.name}),T.jsx("div",{className:"sets-display",children:M.sets&&M.sets.map(($,B)=>T.jsx("span",{className:"set-item",children:I($)},B))})]},M.id||U))})]})]})},zM="modulepreload",BM=function(r){return"/my-workout-tracker/"+r},wT={},$b=function(e,n,s){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),m=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));o=Promise.allSettled(n.map(p=>{if(p=BM(p),p in wT)return;wT[p]=!0;const g=p.endsWith(".css"),_=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${_}`))return;const w=document.createElement("link");if(w.rel=g?"stylesheet":zM,g||(w.as="script"),w.crossOrigin="",w.href=p,m&&w.setAttribute("nonce",m),document.head.appendChild(w),g)return new Promise((I,M)=>{w.addEventListener("load",I),w.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${p}`)))})}))}function u(c){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=c,window.dispatchEvent(m),!m.defaultPrevented)throw c}return o.then(c=>{for(const m of c||[])m.status==="rejected"&&u(m.reason);return e().catch(u)})};class qM{constructor(){this.templateRepository=Or.exerciseTemplateRepository}async processExercisesForSession(e,n,s=!0){return!n||!n.length?[]:await Promise.all(n.map(async o=>{if(o.templateId)try{if(await this.templateRepository.getTemplateById(e,o.templateId))return{...o}}catch(u){console.error("Error verifying template:",u)}try{const u=s?await this.templateRepository.getOrCreateTemplate(e,o):await this.templateRepository.getTemplate(e,o);return u?{...o,templateId:u.id}:o}catch(u){return console.error("Error processing exercise template:",u),o}}))}async copyExercisesWithTemplates(e,n,s=!1){return!n||!n.length?[]:await Promise.all(n.map(async o=>{let u=o.templateId;if(!u)try{const c=s?await this.templateRepository.getOrCreateTemplate(e,o):await this.templateRepository.getTemplate(e,o);c&&(u=c.id)}catch(c){console.error("Error getting template for copy:",c)}return{id:Date.now()+Math.random().toString(36).substr(2,9),name:o.name,templateId:u,sets:o.sets?[...o.sets]:[],notes:o.notes||"",category:o.category||"Other"}}))}async getTemplatesByCategory(e){try{return(await this.templateRepository.getExerciseTemplates(e)).reduce((s,o)=>{const u=o.category||"Other";return s[u]||(s[u]=[]),s[u].push(o),s},{})}catch(n){return console.error("Error getting templates by category:",n),{}}}async updateTemplateData(e,n,s){try{return await this.templateRepository.updateTemplate(e,n,s)}catch(o){throw console.error("Error updating template:",o),o}}}const Up=new qM;async function FM(r){const{userId:e,programId:n,workoutId:s,week:o}=r,u=Kb(e,n,s,o);try{return r.exercises&&r.exercises.length>0&&(r.exercises=await Up.processExercisesForSession(e,r.exercises,!0)),await kf(nn(lt,"sessions",u),r,{merge:!0}),console.log("Session saved:",r,"Document ID:",u),u}catch(c){throw console.error("Error saving session:",c,"Session data:",r),c}}async function HM(r,e,n,s,o){const u=Kb(r,e,n,s);try{const c=nn(lt,"sessions",u),m=await Ts(c);if(m.exists()){console.log(" Found existing session data:",m.data());const p=m.data();return p.exercises&&p.exercises.length>0&&(p.exercises=await Up.processExercisesForSession(r,p.exercises,!1)),p}else{if(console.log(" No session found with exact workoutId, searching by templateId..."),o!=null&&o.templateId)try{const{repositoryFactory:p}=await $b(async()=>{const{repositoryFactory:_}=await Promise.resolve().then(()=>Bb);return{repositoryFactory:_}},[]),g=await p.workoutRepository.getSessionByTemplateAndWeek(r,o.templateId,s);if(g)return console.log(" Found session by templateId:",g),g}catch(p){console.log("Fallback search failed:",p)}return console.log(" No session found, will use program data"),o&&o.exercises&&o.exercises.length>0&&(o.exercises=await Up.processExercisesForSession(r,o.exercises,!1)),o}}catch(c){return console.error("Error fetching session data:",c),o}}function Kb(r,e,n,s){return`${r}_${e}_${n}_${s}`}async function GM(r,e,n){try{const{repositoryFactory:s}=await $b(async()=>{const{repositoryFactory:u}=await Promise.resolve().then(()=>Bb);return{repositoryFactory:u}},void 0),o=await s.workoutRepository.getPreviousWeekSession(r,e,n);return o?{week:o.week,name:o.name,exercises:o.exercises||[],timestamp:o.timestamp,notes:o.notes||""}:null}catch(s){return console.error("Error fetching previous session data:",s),null}}const ST=()=>{const{workoutId:r,programId:e}=kT(),[n]=XR(),s=n.get("week"),o=s?parseInt(s,10):null,[u,c]=L.useState(null),[m,p]=L.useState(!0),[g,_]=L.useState(null),[w,I]=L.useState(!0),M=ur(),{user:U,logout:$}=Vu(),[B,X]=L.useState(!1),[re,Z]=L.useState(null),le=async()=>{try{await $(),M("/")}catch(A){console.error("Failed to sign out:",A),alert("Failed to sign out. Please try again.")}},me=()=>{M(`/ExecuteProgram/${e}`)},ae=()=>{c(A=>({...A,exercises:[...A.exercises,{id:_a(),name:"New Exercise",sets:[{reps:"",weight:"",complete:!1}]}]}))},D=A=>{console.log("delete"),c(C=>({...C,exercises:C.exercises.filter(x=>x.id!==A)}))},b=async()=>{console.log("Save session clicked"),console.log("Current workout state:",u);const A={userId:U.uid,programId:e,workoutId:r,workoutTemplateId:u.templateId,name:u.name,week:o||u.week,exercises:u.exercises,notes:u.notes||"",timestamp:new Date().toISOString()};console.log("Session data to save:",A);try{await FM(A),X(!0),setTimeout(()=>X(!1),3e3)}catch(C){Z("Failed to save session. Please try again.",C)}};return L.useEffect(()=>{if(!U)return;(async()=>{try{const C=nn(lt,"programs",e),N=(await Ts(C)).data().workouts.find(H=>H.id===r);console.log("Found workout from Firestore:",N);const pe=await HM(U.uid,e,r,o||N.week,N);console.log("Session data returned:",pe),console.log("Does sessionData have templateId?",pe.templateId);const Ie={...pe,templateId:N.templateId,week:o||N.week};if(console.log("Final workout data being set:",Ie),console.log("Does final data have templateId?",Ie.templateId),c(Ie),p(!1),N.templateId)try{const H=parseInt(o)||N.week,se=await GM(U.uid,N.templateId,H);_(se)}catch(H){console.error("Error fetching previous session:",H)}I(!1)}catch(C){console.error("Error fetching workout:",C),p(!1),I(!1)}})()},[r,e,o,U]),m?T.jsx("div",{className:"current-session-container",children:T.jsx("div",{className:"loading",children:"Loading workout..."})}):u?(console.log("Loaded workout:",u),T.jsxs("div",{className:"current-session-container",children:[T.jsx("nav",{className:"breadcrumb",children:T.jsx(Gb,{actions:[{label:"Home",onClick:A=>{A.stopPropagation(),M("/dashboard")}},{label:"Program Overview",onClick:A=>{A.stopPropagation(),M(`/ExecuteProgram/${e}`)}},{label:"All Programs",onClick:A=>{A.stopPropagation(),M("/ListOfUsersPrograms")}},{label:"Sign Out",onClick:A=>{A.stopPropagation(),le()}}],trigger:T.jsx("span",{children:""})})}),T.jsx(PM,{workout:u,onBack:me}),T.jsx(jM,{previousSession:g,isLoading:w,programId:e,workoutId:r}),T.jsxs("div",{className:"current-session-content",children:[T.jsx(UM,{exercises:u.exercises,setWorkout:c,handleDeleteExercise:D}),T.jsx("button",{className:"btn-add-exercise",onClick:ae,children:"Add Exercise"}),T.jsx(VM,{handleSaveSession:b,setWorkout:c,workout:u,saveSuccess:B}),re&&alert(re)]})]})):T.jsx("div",{className:"current-session-container",children:T.jsx("div",{className:"error",children:"Workout not found"})})};function $M(){const[r,e]=L.useState([]),[n,s]=L.useState(!0),[o,u]=L.useState(null),{user:c,loading:m}=Vu(),p=Or.programRepository,g=L.useCallback(async()=>{if(c){s(!0);try{const _=await p.getUserPrograms(c.uid);e(_)}catch(_){u(_.message||String(_))}finally{s(!1)}}},[c,p]);return L.useEffect(()=>{if(m)return;if(!c){u("Not logged in"),s(!1);return}const _=p.watchUserPrograms(c.uid,w=>{e(w),s(!1)},w=>{u(w.message),s(!1)});return g(),()=>_()},[g,m,c,p]),{userPrograms:r,loading:n||m,error:o,refetchPrograms:g}}const KM=()=>{const{userPrograms:r,loading:e,error:n,refetchPrograms:s}=$M(),o=ur(),{logout:u}=Vu(),c=async()=>{try{await u(),o("/")}catch(m){console.error("Failed to sign out:",m),alert("Failed to sign out. Please try again.")}};return L.useEffect(()=>{!e&&r.length===0&&o("/CreateProgram")},[e,r,o]),e?T.jsx("div",{children:"Loading..."}):n?T.jsxs("div",{children:["Error: ",n]}):T.jsxs("div",{className:"user-programs-container",children:[T.jsx("nav",{className:"breadcrumb",children:T.jsx(tf,{actions:[{label:"Home",onClick:m=>{m.stopPropagation(),o("/dashboard")}},{label:"Create Program",onClick:m=>{m.stopPropagation(),o("/CreateProgram")}},{label:"Sign Out",onClick:m=>{m.stopPropagation(),c()}}],trigger:T.jsx("span",{children:""})})}),T.jsx("h1",{children:"Your Programs"}),T.jsx("section",{className:"user-programs-list",children:r.map(m=>T.jsxs("div",{className:"user-program-card",onClick:()=>o(`/ExecuteProgram/${m.id}`),children:[T.jsx(tf,{actions:[{label:"Delete Program",onClick:async p=>{p.stopPropagation();try{await oM(m.id),s&&await s()}catch(g){console.error("Failed to delete program:",g)}}}],trigger:T.jsx("span",{children:""})}),T.jsx("h2",{children:m.name}),T.jsx("p",{children:m.description}),T.jsxs("span",{children:[m.duration," weeks"]})]},m.id))})]})};function QM(){return T.jsx(X4,{children:T.jsxs(TR,{children:[T.jsx(hs,{path:"/",element:T.jsx(H4,{})}),T.jsx(hs,{path:"/Dashboard",element:T.jsx(J4,{})}),T.jsx(hs,{path:"/CreateProgram",element:T.jsx(TM,{})}),T.jsx(hs,{path:"/ExecuteProgram/:programId",element:T.jsx(wM,{})}),T.jsx(hs,{path:"/CurrentSession/:programId/:workoutId",element:T.jsx(ST,{})}),T.jsx(hs,{path:"/CurrentSession/:programId/:workoutId/:week",element:T.jsx(ST,{})}),T.jsx(hs,{path:"/ListOfUsersPrograms",element:T.jsx(KM,{})})]})})}rI();D1.createRoot(document.getElementById("root")).render(T.jsx(L.StrictMode,{children:T.jsx(GR,{children:T.jsx(QM,{})})}));
